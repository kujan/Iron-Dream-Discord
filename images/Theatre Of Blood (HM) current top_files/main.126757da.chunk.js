/*!For license information please see main.126757da.chunk.js.LICENSE.txt*/(this["webpackJsonpwise-old-man-app"]=this["webpackJsonpwise-old-man-app"]||[]).push([[0],Array(85).concat([function(e,t,r){e.exports=r(237)},,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,function(e,t,r){},function(e,t,r){},,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},,function(e,t,r){},,,,,,,,function(e,t,r){},function(e,t,r){},,,,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"hideNotification",(function(){return H})),r.d(n,"showNotification",(function(){return K}));var a={};r.r(a),r.d(a,"isNotificationVisible",(function(){return z})),r.d(a,"getNotification",(function(){return W}));var o={};r.r(o),r.d(o,"create",(function(){return zt})),r.d(o,"edit",(function(){return Wt})),r.d(o,"remove",(function(){return Xt})),r.d(o,"updateAll",(function(){return tr})),r.d(o,"fetchList",(function(){return Jt})),r.d(o,"fetchDetails",(function(){return Zt})),r.d(o,"fetchStatistics",(function(){return Qt})),r.d(o,"fetchMonthlyTop",(function(){return $t})),r.d(o,"fetchPlayerGroups",(function(){return er})),r.d(o,"fetchTempleMembers",(function(){return rr})),r.d(o,"fetchCMLMembers",(function(){return nr}));var c={};r.r(c),r.d(c,"getError",(function(){return cr})),r.d(c,"isFetchingList",(function(){return ir})),r.d(c,"isFetchingDetails",(function(){return lr})),r.d(c,"isFetchingMonthlyTop",(function(){return sr})),r.d(c,"isFetchingStatistics",(function(){return ur})),r.d(c,"isCreating",(function(){return mr})),r.d(c,"isEditing",(function(){return fr})),r.d(c,"getGroups",(function(){return hr})),r.d(c,"getGroup",(function(){return vr})),r.d(c,"getPlayerGroups",(function(){return gr}));var i={};r.r(i),r.d(i,"fetchPlayer",(function(){return Gr})),r.d(i,"searchPlayers",(function(){return Rr})),r.d(i,"trackPlayer",(function(){return Mr})),r.d(i,"assertType",(function(){return qr})),r.d(i,"assertName",(function(){return Yr}));var l={};r.r(l),r.d(l,"isTracking",(function(){return Hr})),r.d(l,"isFetching",(function(){return Kr})),r.d(l,"getUpdatingUsernames",(function(){return Vr})),r.d(l,"getSearchResults",(function(){return Br})),r.d(l,"getPlayer",(function(){return zr}));var s={};r.r(s),r.d(s,"fetchPlayerDeltas",(function(){return Zn})),r.d(s,"fetchGroupPeriodDeltas",(function(){return $n})),r.d(s,"fetchGroupTimeRangeDeltas",(function(){return Qn})),r.d(s,"fetchLeaderboards",(function(){return Jn})),r.d(s,"invalidateDeltas",(function(){return ea}));var u={};r.r(u),r.d(u,"isFetching",(function(){return oa})),r.d(u,"getLeaderboards",(function(){return ca})),r.d(u,"isFetchingGroupDeltas",(function(){return ia})),r.d(u,"isFetchingPlayerDeltas",(function(){return la})),r.d(u,"getPlayerDeltas",(function(){return sa})),r.d(u,"getGroupDeltas",(function(){return ua}));var m={};r.r(m),r.d(m,"fetchPlayerRecords",(function(){return _a})),r.d(m,"fetchGroupRecords",(function(){return Sa})),r.d(m,"fetchLeaderboards",(function(){return ka})),r.d(m,"invalidateRecords",(function(){return La}));var f={};r.r(f),r.d(f,"isFetching",(function(){return Da})),r.d(f,"getLeaderboards",(function(){return Aa})),r.d(f,"isFetchingGroupRecords",(function(){return Ia})),r.d(f,"isFetchingPlayerRecords",(function(){return Ga})),r.d(f,"getPlayerRecords",(function(){return Ra})),r.d(f,"getGroupRecords",(function(){return Ma}));var p={};r.r(p),r.d(p,"create",(function(){return $a})),r.d(p,"edit",(function(){return Qa})),r.d(p,"remove",(function(){return eo})),r.d(p,"updateAll",(function(){return co})),r.d(p,"fetchList",(function(){return to})),r.d(p,"fetchDetails",(function(){return ro})),r.d(p,"fetchCompetitionTop5History",(function(){return no})),r.d(p,"fetchGroupCompetitions",(function(){return ao})),r.d(p,"fetchPlayerCompetitions",(function(){return oo}));var d={};r.r(d),r.d(d,"getError",(function(){return so})),r.d(d,"isFetchingList",(function(){return uo})),r.d(d,"isFetchingDetails",(function(){return mo})),r.d(d,"isCreating",(function(){return fo})),r.d(d,"isEditing",(function(){return po})),r.d(d,"getCompetitions",(function(){return yo})),r.d(d,"getCompetition",(function(){return bo})),r.d(d,"getCompetitionTopHistory",(function(){return Eo})),r.d(d,"getPlayerCompetitions",(function(){return wo})),r.d(d,"getGroupCompetitions",(function(){return Oo}));var h={};r.r(h),r.d(h,"fetchSnapshots",(function(){return Hc})),r.d(h,"invalidateSnapshots",(function(){return Kc}));var v={};r.r(v),r.d(v,"getPlayerSnapshots",(function(){return Bc})),r.d(v,"isFetchingPlayerSnapshots",(function(){return zc}));var g={};r.r(g),r.d(g,"fetchPlayerAchievements",(function(){return Xc})),r.d(g,"fetchGroupAchievements",(function(){return Jc})),r.d(g,"invalidateAchievements",(function(){return Zc}));var y={};r.r(y),r.d(y,"isFetchingGroupAchievements",(function(){return ti})),r.d(y,"isFetchingPlayerAchievements",(function(){return ri})),r.d(y,"getGroupAchievements",(function(){return ni})),r.d(y,"getPlayerAchievements",(function(){return ai})),r.d(y,"getPlayerAchievementsGrouped",(function(){return oi}));var b={};r.r(b),r.d(b,"fetchNameChanges",(function(){return Ui})),r.d(b,"submitNameChange",(function(){return Vi})),r.d(b,"fetchPlayerNameChanges",(function(){return Hi})),r.d(b,"fetchGroupNameChanges",(function(){return Ki}));var E={};r.r(E),r.d(E,"getError",(function(){return zi})),r.d(E,"isFetching",(function(){return Wi})),r.d(E,"isSubmitting",(function(){return Xi})),r.d(E,"isFetchingGroupNameChanges",(function(){return Ji})),r.d(E,"isFetchingPlayerNameChanges",(function(){return Zi})),r.d(E,"getNameChanges",(function(){return $i})),r.d(E,"getGroupNameChanges",(function(){return tl})),r.d(E,"getPlayerNames",(function(){return rl}));var w={};r.r(w),r.d(w,"fetchGroupHiscores",(function(){return zl}));var O={};r.r(O),r.d(O,"isFetching",(function(){return Wl})),r.d(O,"getGroupHiscores",(function(){return Xl}));var j={};r.r(j),r.d(j,"fetchLeaderboards",(function(){return Rs}));var x={};r.r(x),r.d(x,"getError",(function(){return qs})),r.d(x,"isFetching",(function(){return Ys})),r.d(x,"getLeaderboards",(function(){return Us}));var N={};r.r(N),r.d(N,"fetchRates",(function(){return tu}));var k={};r.r(k),r.d(k,"getError",(function(){return nu})),r.d(k,"isFetching",(function(){return au})),r.d(k,"getEHPRates",(function(){return ou})),r.d(k,"getEHBRates",(function(){return cu}));var _=r(0),S=r.n(_),L=r(45),C=r.n(L),P=r(3),T=r(7),F=r(14),D=r(73),A=r.n(D),I=r(38),G=r(4),R={text:"",type:"warn",duration:0},M={isNotificationVisible:!1,currentNotification:Object(G.a)({},R)},q=Object(F.b)({name:"app",initialState:M,reducers:{onHideNotification:function(e){e.isNotificationVisible=!1,e.currentNotification=R},onShowNotification:function(e,t){e.isNotificationVisible=!0,e.currentNotification=t.payload}}}),Y=q.actions,U=q.reducer,H=function(){return function(e){e(Y.onHideNotification())}},K=function(e){return function(t){t(Y.onShowNotification(e))}},V=r(11),B=function(e){return e.app},z=Object(V.a)(B,(function(e){return e.isNotificationVisible})),W=Object(V.a)(B,(function(e){return e.currentNotification})),X=r(25);function J(e,t,r){X.a.event({category:e,action:t,value:r})}var Z=function(){return function(e){return function(t){if(t&&t.type){switch(t.type){case"competitions/onCreateSuccess":J("Competition","Created new Competition",t.payload.data.id);break;case"competitions/onEditSuccess":J("Competition","Edited Competition",t.payload.data.id);break;case"competitions/onDeleteSuccess":J("Competition","Deleted Competition",t.payload.competitionId);break;case"competitions/onUpdateAllSuccess":J("Competition","Updated All Participants",t.payload.competitionId);break;case"groups/onCreateSuccess":J("Group","Created new Group",t.payload.data.id);break;case"groups/onEditSuccess":J("Group","Edited Group",t.payload.data.id);break;case"groups/onDeleteSuccess":J("Group","Deleted Group",t.payload.groupId);break;case"groups/onUpdateAllSuccess":J("Group","Updated All Members",t.payload.groupId);break;case"names/onSubmitSuccess":J("Name change","Submitted new name change",t.payload.data.id);break;case"players/onAssertNameSuccess":J("Player","Asserted player name",t.payload.username);break;case"players/onAssertTypeSuccess":J("Player","Asserted player type",t.payload.username);break;case"players/onTrackSuccess":J("Player","Tracked player",t.payload.username)}return e(t)}}}};function $(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n={type:"error",text:t,duration:r};e.dispatch(e.dispatch(K(n)))}function Q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n={type:"success",text:t,duration:r};e.dispatch(e.dispatch(K(n)))}function ee(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,n={type:"warn",text:t,duration:r};e.dispatch(e.dispatch(K(n)))}var te=function(e){return function(t){return function(r){if(r&&r.type){switch(r.type){case"players/onTrackSuccess":Q(e,"".concat(r.payload.username," has been successfully updated."));break;case"players/onAssertTypeSuccess":r.payload.changed?Q(e,"Player type successfully reassigned to ".concat(r.payload.playerType,".")):Q(e,"Player type confirmed to be ".concat(r.payload.playerType,"."));break;case"players/onAssertNameSuccess":r.payload.changed?Q(e,"Player name successfully changed to ".concat(r.payload.displayName,".")):Q(e,"Player name confirmed to be ".concat(r.payload.displayName,"."));break;case"names/onSubmitSuccess":Q(e,"Name change submitted successfully. Please wait for approval.");break;case"competitions/onCreateSuccess":Q(e,"Competition created successfully.");break;case"competitions/onEditSuccess":Q(e,"Competition edited successfully.");break;case"competitions/onDeleteSuccess":Q(e,"Competition deleted successfully.");break;case"groups/onCreateSuccess":Q(e,"Group created successfully.");break;case"groups/onEditSuccess":Q(e,"Group edited successfully.");break;case"groups/onDeleteSuccess":Q(e,"Group deleted successfully.");break;case"groups/onUpdateAllSuccess":case"competitions/onUpdateAllSuccess":Q(e,r.payload.data.message,1e4);break;case"players/onAssertNameRequest":ee(e,"Checking player display name...",1e4);break;case"players/onAssertTypeRequest":ee(e,"Reassigning player type...",1e4);break;case"groups/onCreateError":case"groups/onEditError":case"groups/onDeleteError":case"groups/onMigrateError":case"groups/onUpdateAllError":case"competitions/onDeleteError":case"competitions/onCreateError":case"competitions/onEditError":case"competitions/onUpdateAllError":$(e,r.payload.error,1e4);break;case"players/onTrackError":case"names/onSubmitError":case"players/onAssertTypeError":case"players/onAssertNameError":$(e,r.payload)}return t(r)}}}},re=r(74),ne=r.n(re),ae=r(23),oe=r.n(ae),ce=[Z,te,function(){return function(e){return function(t){var r=ne()(t).forEach((function(e){return"string"===typeof e&&e.includes("-")&&oe()(e,oe.a.ISO_8601).isValid()?new Date(e):e}));return e(r)}}}],ie=r(30),le=Object(F.b)({name:"hiscores",initialState:{isFetching:!1,error:null,groupHiscores:{}},reducers:{onFetchRequest:function(e){e.isFetching=!0,e.error=null},onFetchSuccess:function(e,t){var r=t.payload,n=r.groupId,a=r.hiscores,o=r.refresh;e.isFetching=!1,e.error=null,e.groupHiscores[n]=o?a:[].concat(Object(T.a)(e.groupHiscores[n]),Object(T.a)(a))},onFetchError:function(e,t){e.isFetching=!1,e.error=t.payload}}}),se=le.actions,ue=le.reducer,me=Object(F.b)({name:"rates",initialState:{isFetching:!1,error:null,ehpRates:[],ehbRates:[]},reducers:{onFetchRequest:function(e){e.isFetching=!0,e.error=null},onFetchSuccess:function(e,t){var r=t.payload,n=r.metric,a=r.rates;e.isFetching=!1,e.error=null,"ehp"===n?e.ehpRates=a:e.ehbRates=a},onFetchError:function(e,t){e.isFetching=!1,e.error=t.payload}}}),fe=me.actions,pe=me.reducer,de=r(18),he=Object(F.b)({name:"snapshots",initialState:{isFetching:!1,error:null,snapshots:{}},reducers:{onFetchRequest:function(e){e.isFetching=!0,e.error=null},onFetchSuccess:function(e,t){var r=t.payload,n=r.username,a=r.period,o=r.data;e.isFetching=!1,e.error=null,e.snapshots[n]=Object(G.a)(Object(G.a)({},e.snapshots[n]),{},Object(de.a)({},a||"custom",o))},onFetchError:function(e,t){e.isFetching=!1,e.error=t.payload},onInvalidate:function(e,t){var r=t.payload,n=r.period,a=r.username;e.snapshots[a]=n?Object(G.a)(Object(G.a)({},e.snapshots[a]),{},Object(de.a)({},n,null)):{}}}}),ve=he.actions,ge=he.reducer,ye=r(10),be=Object(F.b)({name:"records",initialState:{isFetchingPlayerRecords:!1,isFetchingGroupRecords:!1,isFetchingLeaderboards:{five_min:!1,day:!1,week:!1,month:!1,year:!1},leaderboards:{five_min:null,day:null,week:null,month:null,year:null},playerRecords:{},groupRecords:{},error:null},reducers:{onFetchLeaderboardsRequest:function(e,t){var r=t.payload.period;e.isFetchingLeaderboards[r]=!0,e.error=null},onFetchLeaderboardsSuccess:function(e,t){var r=t.payload,n=r.period,a=r.data;e.isFetchingLeaderboards[n]=!1,e.leaderboards[n]=a,e.error=null},onFetchLeaderboardsError:function(e,t){var r=t.period,n=t.error;e.isFetchingLeaderboards[r]=!1,e.error=n},onFetchPlayerRecordsRequest:function(e){e.isFetchingPlayerRecords=!0,e.error=null},onFetchPlayerRecordsSuccess:function(e,t){var r=t.payload,n=r.username,a=r.data;e.error=null,e.isFetchingPlayerRecords=!1,e.playerRecords[n]=a},onFetchPlayerRecordsError:function(e,t){e.isFetchingPlayerRecords=!1,e.error=t.payload},onFetchGroupRecordsRequest:function(e){e.isFetchingGroupRecords=!0,e.error=null},onFetchGroupRecordsSuccess:function(e,t){var r=t.payload,n=r.groupId,a=r.data,o=r.refresh;e.error=null,e.isFetchingGroupRecords=!1,e.groupRecords[n]=o?a:[].concat(Object(T.a)(e.groupRecords[n]),Object(T.a)(a))},onFetchGroupRecordsError:function(e,t){e.isFetchingGroupRecords=!1,e.error=t.payload},onInvalidate:function(e,t){var r=t.payload.username;e.playerRecords=Object(ye.omit)(e.playerRecords,r)}}}),Ee=be.actions,we=be.reducer,Oe=Object(F.b)({name:"deltas",initialState:{isFetchingPlayerDeltas:!1,isFetchingGroupDeltas:!1,isFetchingLeaderboards:{five_min:!1,day:!1,week:!1,month:!1,year:!1},leaderboards:{five_min:null,day:null,week:null,month:null,year:null},playerDeltas:{},groupDeltas:{},error:null},reducers:{onFetchLeaderboardsRequest:function(e,t){var r=t.payload.period;e.isFetchingLeaderboards[r]=!0,e.error=null},onFetchLeaderboardsSuccess:function(e,t){var r=t.payload,n=r.period,a=r.data;e.isFetchingLeaderboards[n]=!1,e.leaderboards[n]=a,e.error=null},onFetchLeaderboardsError:function(e,t){var r=t.period,n=t.error;e.isFetchingLeaderboards[r]=!1,e.error=n},onFetchPlayerDeltasRequest:function(e){e.isFetchingPlayerDeltas=!0,e.error=null},onFetchPlayerDeltasSuccess:function(e,t){var r=t.payload,n=r.username,a=r.data,o=!("week"in a);e.error=null,e.isFetchingPlayerDeltas=!1,e.playerDeltas[n]=o?Object(G.a)(Object(G.a)({},e.playerDeltas[n]),{},{custom:a}):a},onFetchPlayerDeltasError:function(e,t){e.isFetchingPlayerDeltas=!1,e.error=t.payload},onFetchGroupDeltasRequest:function(e){e.isFetchingGroupDeltas=!0,e.error=null},onFetchGroupDeltasSuccess:function(e,t){var r=t.payload,n=r.groupId,a=r.data,o=r.refresh;e.error=null,e.isFetchingGroupDeltas=!1,e.groupDeltas[n]=o?a:[].concat(Object(T.a)(e.groupDeltas[n]),Object(T.a)(a))},onFetchGroupDeltasError:function(e,t){e.isFetchingGroupDeltas=!1,e.error=t.payload},onInvalidate:function(e,t){var r=t.payload,n=r.period,a=r.username;e.playerDeltas[a]=n?Object(G.a)(Object(G.a)({},e.playerDeltas[a]),{},Object(de.a)({},n,null)):{}}}}),je=Oe.actions,xe=Oe.reducer;function Ne(e,t){var r={};return e.forEach((function(e){r[e[t]]=e})),r}var ke={isFetching:!1,isFetchingPlayerNameChanges:!1,isFetchingGroupNameChanges:!1,isSubmitting:!1,error:{message:null,data:null},nameChanges:{},playerNameChanges:{},groupNameChanges:{}},_e=Object(F.b)({name:"names",initialState:ke,reducers:{onFetchRequest:function(e){e.isFetching=!0,e.error=ke.error},onFetchSuccess:function(e,t){var r=t.payload,n=r.refresh,a=r.data;e.isFetching=!1,e.error=ke.error,e.nameChanges=n?Ne(a,"id"):Object(G.a)(Object(G.a)({},e.nameChanges),Ne(a,"id"))},onFetchError:function(e,t){e.isFetching=!1,e.error={message:t.error}},onSubmitRequest:function(e){e.isSubmitting=!0,e.error=ke.error},onSubmitSuccess:function(e,t){var r=t.payload.data;e.isSubmitting=!1,e.error=ke.error,e.nameChanges[r.id]=r},onSubmitError:function(e,t){e.isSubmitting=!1,e.error={message:t.error,data:t.data}},onFetchPlayerNameChangesRequest:function(e){e.isFetchingPlayerNameChanges=!0,e.error=ke.error},onFetchPlayerNameChangesSuccess:function(e,t){var r=t.payload,n=r.username,a=r.data;e.isFetchingPlayerNameChanges=!1,e.error=ke.error,e.playerNameChanges[n]=a},onFetchPlayerNameChangesError:function(e,t){e.isFetchingPlayerNameChanges=!1,e.error={message:t.payload.error}},onFetchGroupNameChangesRequest:function(e){e.isFetchingGroupNameChanges=!0,e.error=ke.error},onFetchGroupNameChangesSuccess:function(e,t){var r=t.payload,n=r.groupId,a=r.data,o=r.refresh;e.isFetchingGroupNameChanges=!1,e.error=ke.error,e.groupNameChanges[n]=o?a:[].concat(Object(T.a)(e.groupNameChanges[n]),Object(T.a)(a))},onFetchGroupNameChangesError:function(e,t){e.isFetchingGroupNameChanges=!1,e.error={message:t.payload.error}}}}),Se=_e.actions,Le=_e.reducer,Ce=Object(F.b)({name:"achievements",initialState:{isFetchingPlayerAchievements:!1,isFetchingGroupAchievements:!1,playerAchievements:{},groupAchievements:{},error:null},reducers:{onFetchPlayerAchievementsRequest:function(e){e.isFetchingPlayerAchievements=!0,e.error=null},onFetchPlayerAchievementsSuccess:function(e,t){var r=t.payload,n=r.username,a=r.data;e.error=null,e.isFetchingPlayerAchievements=!1,e.playerAchievements[n]=a},onFetchPlayerAchievementsError:function(e,t){e.isFetchingPlayerAchievements=!1,e.error=t.payload},onFetchGroupAchievementsRequest:function(e){e.isFetchingGroupAchievements=!0,e.error=null},onFetchGroupAchievementsSuccess:function(e,t){var r=t.payload,n=r.groupId,a=r.data,o=r.refresh;e.error=null,e.isFetchingGroupAchievements=!1,e.groupAchievements[n]=o?a:[].concat(Object(T.a)(e.groupAchievements[n]),Object(T.a)(a))},onFetchGroupAchievementsError:function(e,t){e.isFetchingGroupAchievements=!1,e.error=t.payload},onInvalidate:function(e,t){var r=t.payload.username;e.playerAchievements=Object(ye.omit)(e.playerAchievements,r)}}}),Pe=Ce.actions,Te=Ce.reducer,Fe=Object(F.b)({name:"leaderboards",initialState:{isFetching:!1,error:null,leaderboards:[]},reducers:{onFetchRequest:function(e){e.isFetching=!0,e.error=null},onFetchSuccess:function(e,t){var r=t.payload,n=r.refresh,a=r.data;e.isFetching=!1,e.error=null,e.leaderboards=n?a:[].concat(Object(T.a)(e.leaderboards),Object(T.a)(a))},onFetchError:function(e,t){e.isFetching=!1,e.error=t.payload}}}),De=Fe.actions,Ae=Fe.reducer,Ie=Object(F.b)({name:"players",initialState:{isFetching:!1,isSearching:!1,isTracking:!1,isAssertingType:!1,isAssertingName:!1,players:{},searchResults:{},updating:[]},reducers:{onFetchRequest:function(e){e.isFetching=!0,e.error=null},onFetchSuccess:function(e,t){var r=t.payload.data;e.isFetching=!1,e.error=null,e.players[r.username]=r},onFetchError:function(e,t){e.isFetching=!1,e.error=t.payload},onSearchRequest:function(e){e.isSearching=!0,e.error=null},onSearchSuccess:function(e,t){var r=t.payload.data;e.isSearching=!1,e.searchResults=Ne(r,"username"),e.players=Object(G.a)(Object(G.a)({},e.players),Ne(r,"username"))},onSearchError:function(e,t){e.isSearching=!1,e.error=t.payload},onTrackRequest:function(e,t){e.isTracking=!0,e.error=null,e.updating=[].concat(Object(T.a)(e.updating),[t.payload.username])},onTrackSuccess:function(e,t){var r=t.payload,n=r.username,a=r.data;e.isTracking=!1,e.updating=e.updating.filter((function(e){return e!==n})),e.players[n]=a},onTrackError:function(e,t){e.isTracking=!1,e.updating=e.updating.filter((function(e){return e!==t.payload.username})),e.error=t.payload},onAssertTypeRequest:function(e){e.isAssertingType=!0,e.error=null},onAssertTypeSuccess:function(e,t){var r=t.payload,n=r.username,a=r.playerType;e.error=null,e.isAssertingType=!1,e.players[n].type=a},onAssertTypeError:function(e,t){e.isAssertingType=!1,e.error=t.payload},onAssertNameRequest:function(e){e.isAssertingName=!0,e.error=null},onAssertNameSuccess:function(e,t){var r=t.payload,n=r.username,a=r.displayName;e.error=null,e.isAssertingName=!1,e.players[n].displayName=a},onAssertNameError:function(e,t){e.isAssertingName=!1,e.error=t.payload}}}),Ge=Ie.actions,Re=Ie.reducer,Me={isCreating:!1,isDeleting:!1,isEditing:!1,isFetchingList:!1,isFetchingDetails:!1,isFetchingTopHistory:!1,competitions:{},topHistory:{},playerCompetitions:{},groupCompetitions:{},error:{message:null,data:null}},qe=Object(F.b)({name:"competitions",initialState:Me,reducers:{onParticipantUpdated:function(e,t){var r,n;e.competitions=(r=e.competitions,n=t.payload.username,Object(ye.mapValues)(r,(function(e){return e.participants?Object(G.a)(Object(G.a)({},e),{},{participants:e.participants.map((function(e){return Object(G.a)(Object(G.a)({},e),{},{updatedAt:e.username===n?new Date:e.updatedAt})}))}):e})))},onFetchListRequest:function(e){e.isFetchingList=!0,e.error=Me.error},onFetchListSuccess:function(e,t){var r=t.payload,n=r.refresh,a=r.data;e.isFetchingList=!1,e.error=Me.error,e.competitions=n?Ne(a,"id"):Object(G.a)(Object(G.a)({},e.competitions),Ne(a,"id"))},onFetchListError:function(e,t){e.isFetchingList=!1,e.error={message:t.payload.error}},onFetchDetailsRequest:function(e){e.isFetchingDetails=!0,e.error=Me.error},onFetchDetailsSuccess:function(e,t){var r=t.payload.data;e.isFetchingDetails=!1,e.error=Me.error,e.competitions=function(e,t){if(!e[t.id])return Object(G.a)(Object(G.a)({},e),{},Object(de.a)({},t.id,t));return Object(G.a)(Object(G.a)({},e),{},Object(de.a)({},t.id,Object(G.a)(Object(G.a)({},e[t.id]),t)))}(e.competitions,r)},onFetchDetailsError:function(e,t){e.isFetchingDetails=!1,e.error={message:t.payload.error}},onFetchTop5HistoryRequest:function(e){e.isFetchingTopHistory=!0,e.error=Me.error},onFetchTop5HistorySuccess:function(e,t){var r=t.payload,n=r.data,a=r.competitionId;e.isFetchingTopHistory=!1,e.error=Me.error,e.topHistory=Object(G.a)(Object(G.a)({},e.topHistory),{},Object(de.a)({},a,n))},onFetchTop5HistoryError:function(e,t){e.isFetchingTopHistory=!1,e.error={message:t.payload.error}},onFetchPlayerCompetitionsRequest:function(e){e.isFetchingList=!0,e.error=Me.error},onFetchPlayerCompetitionsSuccess:function(e,t){var r=t.payload,n=r.username,a=r.data;e.isFetchingList=!1,e.error=Me.error,e.competitions=Ne(a,"id"),e.playerCompetitions[n]=a},onFetchPlayerCompetitionsError:function(e,t){e.isFetchingList=!1,e.error={message:t.payload.error}},onFetchGroupCompetitionsRequest:function(e){e.isFetchingList=!0,e.error=Me.error},onFetchGroupCompetitionsSuccess:function(e,t){var r=t.payload,n=r.groupId,a=r.data;e.isFetchingList=!1,e.error=Me.error,e.competitions=Ne(a,"id"),e.groupCompetitions[n]=a},onFetchGroupCompetitionsError:function(e,t){e.isFetchingList=!1,e.error={message:t.payload.error}},onCreateRequest:function(e){e.isCreating=!0},onCreateSuccess:function(e){e.isCreating=!1},onCreateError:function(e,t){var r=t.payload,n=r.error,a=r.data;e.isCreating=!1,e.error={message:n,data:a}},onEditRequest:function(e){e.isEditing=!0},onEditSuccess:function(e){e.isEditing=!1},onEditError:function(e,t){var r=t.payload,n=r.error,a=r.data;e.isEditing=!1,e.error={message:n,data:a}},onDeleteRequest:function(e){e.isDeleting=!0},onDeleteSuccess:function(e,t){var r=t.payload.competitionId;e.isDeleting=!1,e.competitions=Object(ye.omit)(e.competitions,r)},onDeleteError:function(e,t){e.isDeleting=!1,e.error={message:t.payload.error}},onUpdateAllRequest:function(){},onUpdateAllSuccess:function(){},onUpdateAllError:function(e,t){e.error={message:t.payload.error}}}});var Ye=qe.actions,Ue=qe.reducer,He={isCreating:!1,isEditing:!1,isDeleting:!1,isFetchingList:!1,isFetchingDetails:!1,isFetchingMonthlyTop:!1,isFetchingStatistics:!1,isFetchingPlayerGroups:!1,groups:{},playerGroups:{},error:{message:null,data:null}},Ke=Object(F.b)({name:"groups",initialState:He,reducers:{onFetchListRequest:function(e){e.isFetchingList=!0,e.error=He.error},onFetchListSuccess:function(e,t){var r=t.payload,n=r.refresh,a=r.data;e.isFetchingList=!1,e.error=He.error,e.groups=n?Ne(a,"id"):Object(G.a)(Object(G.a)({},e.groups),Ne(a,"id"))},onFetchListError:function(e,t){e.isFetchingList=!1,e.error={message:t.payload.error}},onFetchPlayerGroupsRequest:function(e){e.isFetchingList=!0,e.error=He.error},onFetchPlayerGroupsSuccess:function(e,t){var r=t.payload,n=r.username,a=r.data;e.isFetchingList=!1,e.error=He.error,e.groups=Ne(a,"id"),e.playerGroups[n]=a},onFetchPlayerGroupsError:function(e,t){e.isFetchingList=!1,e.error={message:t.payload.error}},onFetchDetailsRequest:function(e){e.isFetchingDetails=!0,e.error=He.error},onFetchDetailsSuccess:function(e,t){var r=t.payload.data;e.isFetchingDetails=!1,e.error=He.error,e.groups=Ve(e.groups,r)},onFetchDetailsError:function(e,t){e.isFetchingDetails=!1,e.error={message:t.payload.error}},onFetchMonthlyTopRequest:function(e){e.isFetchingMonthlyTop=!0,e.error=He.error},onFetchMonthlyTopSuccess:function(e,t){var r=t.payload,n=r.groupId,a=r.data;e.isFetchingMonthlyTop=!1,e.error=He.error,e.groups[n]=Object(G.a)(Object(G.a)({},e.groups[n]),{},{monthlyTopPlayer:a})},onFetchMonthlyTopError:function(e,t){e.isFetchingMonthlyTop=!1,e.error={message:t.payload.error}},onFetchStatisticsRequest:function(e){e.isFetchingStatistics=!0,e.error=He.error},onFetchStatisticsSuccess:function(e,t){var r=t.payload,n=r.groupId,a=r.data;e.isFetchingStatistics=!1,e.error=He.error,e.groups[n]=Object(G.a)(Object(G.a)({},e.groups[n]),{},{statistics:a})},onFetchStatisticsError:function(e,t){e.isFetchingStatistics=!1,e.error={message:t.payload.error}},onCreateRequest:function(e){e.isCreating=!0},onCreateSuccess:function(e,t){var r=t.payload.data;e.isCreating=!1,e.groups=Ve(e.groups,r.group)},onCreateError:function(e,t){var r=t.payload,n=r.error,a=r.data;e.isCreating=!1,e.error={message:n,data:a}},onEditRequest:function(e){e.isEditing=!0},onEditSuccess:function(e,t){var r=t.payload.data;e.isEditing=!1,e.groups=Ve(e.groups,r)},onEditError:function(e,t){var r=t.payload,n=r.error,a=r.data;e.isEditing=!1,e.error={message:n,data:a}},onDeleteRequest:function(e){e.isDeleting=!0},onDeleteSuccess:function(e){e.isDeleting=!1},onDeleteError:function(e,t){e.isDeleting=!1,e.error={message:t.payload.error}},onUpdateAllRequest:function(){},onUpdateAllSuccess:function(){},onUpdateAllError:function(e,t){e.error={message:t.payload.error}},onMigrateRequest:function(){},onMigrateSuccess:function(){},onMigrateError:function(e,t){e.error={message:t.payload.error}}}});function Ve(e,t){return e[t.id]?Object(G.a)(Object(G.a)({},e),{},Object(de.a)({},t.id,Object(G.a)(Object(G.a)({},e[t.id]),t))):Object(G.a)(Object(G.a)({},e),{},Object(de.a)({},t.id,t))}var Be=Ke.actions,ze=Ke.reducer,We=Object(ie.b)({app:U,deltas:xe,records:we,competitions:Ue,snapshots:ge,players:Re,achievements:Te,groups:ze,hiscores:ue,names:Le,leaderboards:Ae,rates:pe}),Xe=Object(F.a)({reducer:We,middleware:[I.a].concat(Object(T.a)(ce),[A.a],Object(T.a)(Object(F.c)({serializableCheck:!1})))}),Je=(r(95),r(96),r(97),r(98),r(99),r(100),r(16)),Ze=r(8),$e=r(6),Qe=r(12),et=r.n(Qe);r(101);function tt(e){var t=e.suggestions,r=e.onInput,n=e.onSelected,a=e.clearOnSelect,o=e.placeholder,c=Object(_.useState)(""),i=Object($e.a)(c,2),l=i[0],s=i[1],u=Object(_.useState)(!1),m=Object($e.a)(u,2),f=m[0],p=m[1],d=Object(_.useState)(-1),h=Object($e.a)(d,2),v=h[0],g=h[1],y=function(e,t){n(e,t),p(!1),b(null),a&&s("")},b=Object(_.useCallback)((function(e){e?v+e<0?g(t.length-1):v+e>=t.length?g(0):v+e<t.length&&g(v+e):g(-1)}),[v,g,t]),E=Object(_.useCallback)((function(e){var t=e.target.value;s(t),p(t.length>0),r(t)}),[]),w=Object(_.useCallback)((function(e){"Enter"===e.key?v>-1?y(t[v].value,!1):y(e.target.value,!0):"ArrowDown"===e.key?b(1):"ArrowUp"===e.key&&b(-1)}),[v,t]),O=Object(_.useCallback)((function(){p(l.length>0)}),[l]),j=Object(_.useCallback)((function(){p(!1),b(null)}),[]),x=Object(_.useCallback)(b,[]);return Object(_.useEffect)(x,[]),S.a.createElement("div",{className:"auto-suggest",onFocus:O,onBlur:j},S.a.createElement("input",{className:"auto-suggest__input",type:"text",value:l,placeholder:o,onChange:E,onKeyUp:w,autoComplete:"off"}),f&&t&&t.length>0&&S.a.createElement("ul",{className:"auto-suggest__list"},t.map((function(e,t){return S.a.createElement("li",{key:e.label,className:"suggestion-item"},S.a.createElement("button",{id:e.value,className:et()({"suggestion-item__btn":!0,"-highlighted":t===v}),type:"button",onMouseDown:function(){return y(e.value)}},e.label))}))))}tt.defaultProps={clearOnSelect:!1,placeholder:""};var rt=S.a.memo(tt);r(102);function nt(e){var t=e.color,r=e.text,n=e.hoverText;return S.a.createElement("abbr",{className:"badge",title:n,style:{color:t,borderColor:t}},S.a.createElement("span",null,r))}nt.defaultProps={color:null};var at=nt,ot=r(34);r(103);function ct(e){var t,r=e.text,n=e.className,a=e.icon,o=e.type,c=e.url,i=e.onClick,l=e.disabled,s=e.loading,u=c&&c.startsWith("http");return S.a.createElement(ot.a,{condition:!!c,wrap:function(e){return u?S.a.createElement("a",{href:c},e):S.a.createElement(Ze.b,{to:c},e)}},S.a.createElement("button",{className:et()((t={button:!0},Object(de.a)(t,n,!0),Object(de.a)(t,"-loading",s),t)),type:o,onClick:function(){setTimeout((function(){i&&i()}),150)},disabled:l},a&&!s&&S.a.createElement("img",{className:"button__icon",src:a,alt:""}),s&&S.a.createElement("img",{className:"button__icon -loading",src:"/img/icons/sync.svg",alt:""}),s?"Loading...":r))}ct.defaultProps={type:"button",className:"",icon:void 0,url:void 0,onClick:void 0,disabled:!1,loading:!1};var it=S.a.memo(ct);r(107);function lt(e){var t=e.items,r=e.urlSelector,n=e.emptyMessage;return S.a.createElement("ul",{className:"card-list"},0===t.length?S.a.createElement("li",{className:"card-list__item"},S.a.createElement("div",{className:"list-item__text"},S.a.createElement("span",{className:"list-item__title"},n))):t.map((function(e){var t=r&&r(e),n=t&&t.startsWith("http");return S.a.createElement(ot.a,{key:e.title,condition:!!t,wrap:function(e){return n?S.a.createElement("a",{href:t},e):S.a.createElement(Ze.b,{to:t},e)}},S.a.createElement("li",{className:et()("card-list__item",{"-clickable":!!t})},S.a.createElement("div",{className:"list-item__icon"},S.a.createElement("img",{src:e.icon,alt:""})),S.a.createElement("div",{className:"list-item__text"},S.a.createElement("span",{className:"list-item__title"},e.title),S.a.createElement("span",{className:"list-item__subtitle"},e.subtitle))))})))}lt.defaultProps={urlSelector:void 0,emptyMessage:void 0};var st=lt,ut=(r(108),Object(_.memo)((function(e){var t=e.children,r=Object(_.useState)(!1),n=Object($e.a)(r,2),a=n[0],o=n[1],c=Object(_.useState)(!1),i=Object($e.a)(c,2),l=i[0],s=i[1],u=Object(_.useState)({}),m=Object($e.a)(u,2),f=m[0],p=m[1],d=et()("popup",{"-show":a,"-success":l}),h=function(){navigator.clipboard.writeText(t),s(!0),a||(o(!0),setTimeout((function(){return o(!1)}),1500))},v=function(e){"mouseenter"===e.type&&p({left:"".concat(e.clientX,"px"),top:"".concat(e.clientY,"px")}),o(!a)};return S.a.createElement(S.a.Fragment,null,S.a.createElement("span",{style:{left:f.left,top:f.top},className:d},l?"\u2714 Copied!":"Click to copy"),S.a.createElement("span",{onClick:h,onKeyDown:h,onMouseEnter:v,onMouseLeave:v,className:"hover",role:"button",tabIndex:0},t))})));function mt(e){return e&&oe()(e,oe.a.ISO_8601).isValid()}function ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-DD-YYYY HH:mm";return oe()(e).format(t)}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM-DD-YYYY HH:mm";return oe.a.utc(e).format(t)}function dt(e){if(e<=0)return 0;var t=0,r=0,n=0;return n=Math.floor(e/1e3),r=Math.floor(n/60),n%=60,t=Math.floor(r/60),r%=60,{days:Math.floor(t/24),hours:t%=24,minutes:r,seconds:n}}function ht(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||!t)return null;var a=dt(t-e),o=a.days,c=a.hours,i=a.minutes,l=a.seconds,s=[];return o>0&&s.length<r&&s.push("".concat(o," days")),c>0&&s.length<r&&s.push("".concat(c," hours")),i>0&&s.length<r&&s.push("".concat(i," ").concat(n?"mins":"minutes")),l>0&&s.length<r&&s.push("".concat(l,"  ").concat(n?"secs":"seconds")),0===s.length?"0 seconds":s.join(", ")}var vt=r(1);function gt(e){return e<2?0:Math.floor(e-1+300*Math.pow(2,(e-1)/7))/4}function yt(e){return function(e){return e.replace(/[-_\s]/g," ").trim()}(e).toLowerCase()}function bt(e){return"/img/runescape/icons_small/".concat(e,".png")}function Et(e,t){return"archived"===t?"This player is archived. Their previous username has been taken by some other account.":"unranked"===t?"This player is uranked. Could not be found in the hiscores.":"flagged"===t?"This player is flagged. Likely caused by an unregistered name change. Visit their profile for more information.":"banned"===t?"This player is banned.":"unknown"===e?"This player has an unknown player type. Likely caused by not existing in the hiscores.":"Player type: ".concat(e,".")}function wt(e){return"member"===e?"/img/runescape/group_roles/minion.png":"/img/runescape/group_roles/".concat(e,".png")}function Ot(e){var t,r=encodeURI(e.username);switch(e.type){case"ironman":t="_ironman";break;case"ultimate":t="_ultimate";break;case"hardcore":t="_hardcore_ironman";break;case"regular":default:t=""}return"https://secure.runescape.com/m=hiscore_oldschool".concat(t,"/hiscorepersonal.ws?user1=").concat(r)}function jt(e,t){return"/img/runescape/".concat(t?"icons_small":"icons","/").concat(e,".png")}function xt(e){return e?e.charAt(0).toUpperCase()+e.slice(1):null}function Nt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return void 0===e?-1:e%1!==0?kt(e,2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):e<1e4&&e>-1e4||!t?e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):e<1e7&&e>-1e7?"".concat(Math.floor(e/1e3),"k"):e<1e9&&e>-1e9?"".concat(Math.round(100*(e/1e6+Number.EPSILON))/100,"m"):"".concat(Math.round(100*(e/1e9+Number.EPSILON))/100,"b")}function kt(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function _t(e){return e?e<10?"0".concat(e):e:"00"}var St=["#3498db","#1abc9c","#9b59b6","#f1c40f","#e67e22","#e74c3c","#bdc3c7","#ff9ff3","#341f97","##01a3a4"];var Lt=function(e,t,r,n){if(!e||0===e.length)return{distribution:{enabled:!1,before:0,after:0},datasets:[]};var a="computed";Object(vt.isSkill)(t)&&(a="skills"),Object(vt.isBoss)(t)&&(a="bosses"),Object(vt.isActivity)(t)&&(a="activities");var o=e.filter((function(e){return e.data[a][t][r]>0})),c=n&&o.length>30,i=function(e,t){if(e.length<=t)return e;for(var r=e[e.length-1],n=e[0],a=r.createdAt.getTime(),o=Math.round((n.createdAt-r.createdAt)/t),c=[],i=function(t){var r=a+t*o,n=a+(t+1)*o,i=r+(n-r)/2,l=e.filter((function(e){return e.createdAt>=r&&e.createdAt<=n}));if(l&&l.length>0){var s=l.reduce((function(e,t){return Math.abs(t.createdAt-i)<Math.abs(e.createdAt-i)?t:e}));s&&c.push(s)}},l=0;l<t;l++)i(l);return Object(ye.uniqBy)([r].concat(c,[n]),(function(e){return e.createdAt.getTime()}))}(o,c?30:1e5).map((function(e){return{x:e.createdAt,y:e.data[a][t][r]}}));return{distribution:{enabled:c,before:o.length,after:i.length},datasets:[{borderColor:St["experience"===r?0:1],pointBorderWidth:4,label:xt(r),data:i,fill:!1}]}};r(125);function Ct(e){return Math.max(0,e.getTime()-Date.now())}var Pt=S.a.memo((function(e){var t=e.targetDate,r=Object(_.useState)(Ct(t)),n=Object($e.a)(r,2),a=n[0],o=n[1];Object(_.useEffect)((function(){var e=setTimeout((function(){return o(Ct(t))}),500);return function(){return clearTimeout(e)}}));var c=dt(a),i=c.days,l=c.hours,s=c.minutes,u=c.seconds;return S.a.createElement("div",{className:"countdown"},S.a.createElement("div",{className:"countdown__slot"},S.a.createElement("b",{className:"slot__value"},_t(i)),S.a.createElement("span",{className:"slot__label"},1===i?"day":"days")),S.a.createElement("div",{className:"countdown__slot"},S.a.createElement("b",{className:"slot__value"},_t(l)),S.a.createElement("span",{className:"slot__label"},1===l?"hour":"hours")),S.a.createElement("div",{className:"countdown__slot"},S.a.createElement("b",{className:"slot__value"},_t(s)),S.a.createElement("span",{className:"slot__label"},1===s?"min":"mins")),S.a.createElement("div",{className:"countdown__slot"},S.a.createElement("b",{className:"slot__value"},_t(u)),S.a.createElement("span",{className:"slot__label"},1===u?"sec":"secs")))}));r(126);var Tt=r(244),Ft=r(84);r(127),r(128);var Dt=S.a.memo((function(e){var t=e.onRangeChanged,r=e.start,n=e.end,a=Object(_.useState)(r),o=Object($e.a)(a,2),c=o[0],i=o[1],l=Object(_.useState)(n),s=Object($e.a)(l,2),u=s[0],m=s[1],f=ht(c,u,3,!0);return Object(_.useEffect)((function(){return t([c,u])}),[c,u,t]),Object(_.useEffect)((function(){return i(r)}),[r]),Object(_.useEffect)((function(){return m(n)}),[n]),S.a.createElement(Ft.a,{startDate:c,endDate:u,onStartDateChange:i,onEndDateChange:m,format:"dd MMM yyyy HH:mm",locale:Tt.a},(function(e){var t=e.startDateInputProps,r=e.endDateInputProps,n=e.focus;return S.a.createElement("div",{className:"date-range-selector"},S.a.createElement("input",Object.assign({className:et()({"date-input":!0,"-focus":n})},t)),S.a.createElement("input",Object.assign({className:et()({"date-input":!0,"-focus":n})},r)),S.a.createElement("span",{className:"duration-label"},"Duration: ".concat(f||"Unknown")))}))})),At=r(39);r(136);function It(e){var t=e.options,r=e.align,n=e.onSelect,a=e.children,o=et()({"dropdown-list":!0,"-right":"right"===r,"-left":"left"===r});return S.a.createElement(At.Wrapper,{className:"dropdown__container"},S.a.createElement(At.Button,{className:"dropdown__toggle"},a),S.a.createElement(At.Menu,{className:o},t&&t.map((function(e){return S.a.createElement(At.MenuItem,{key:e.label,className:et()({"dropdown-list__item":!0,"dropdown-url":e.url}),onClick:e.url?void 0:function(){return n(e)}},e.url?S.a.createElement("a",{href:e.url},e.label):e.label)}))))}It.defaultProps={align:"right"};var Gt=S.a.memo(It);r(137);var Rt=function(e){var t=e.steps,r=e.currentIndex;return S.a.createElement("div",{className:"form-steps__container"},Object(ye.times)(t,(function(e){var n=et()("form-step",{"-current":r===e,"-completed":r>e}),a=et()("form-step-separator",{"-completed":r>e});return S.a.createElement(_.Fragment,{key:e},S.a.createElement("div",{className:n},e+1),e<t-1&&S.a.createElement("div",{className:a}))})))},Mt=r(9),qt=r(75),Yt=r.n(qt),Ut=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_ANALYTICS_TRACKING_ID:"UA-163340249-1"}).REACT_APP_BASE_API_URL||"https://api.wiseoldman.net/v2",Ht=Yt.a.create({baseURL:Ut,timeout:6e4,headers:{"X-User-Agent":"WiseOldMan Webapp"}}),Kt={fetchRates:"/efficiency/rates/",fetchLeaderboards:"/efficiency/leaderboard/",fetchNameChanges:"/names/",submitNameChange:"/names/",fetchRecordLeaderboards:"/records/leaderboard/",fetchDeltasLeaderboards:"/deltas/leaderboard/",createGroup:"/groups/",deleteGroup:"/groups/:id",editGroup:"/groups/:id",fetchGroups:"/groups/",fetchGroupDetails:"/groups/:id",fetchGroupDeltas:"/groups/:id/gained/",fetchGroupRecords:"/groups/:id/records/",fetchGroupHiscores:"/groups/:id/hiscores/",fetchGroupStatistics:"/groups/:id/statistics/",fetchGroupMonthlyTop:"/groups/:id/gained/",fetchGroupAchievements:"/groups/:id/achievements/",fetchGroupNameChanges:"/groups/:id/name-changes/",fetchGroupCompetitions:"/groups/:id/competitions/",updateAllMembers:"/groups/:id/update-all",migrateFromTemple:"/groups/migrate/temple/:id",migrateFromCML:"/groups/migrate/cml/:id",createCompetition:"/competitions/",deleteCompetition:"/competitions/:id",editCompetition:"/competitions/:id",fetchCompetitions:"/competitions/",fetchCompetitionDetails:"/competitions/:id",fetchCompetitionTopHistory:"/competitions/:id/top-history",updateAllParticipants:"/competitions/:id/update-all",searchPlayers:"/players/search/",trackPlayer:"/players/:username/",assertPlayerType:"/players/:username/assert-type/",assertPlayerName:"/players/assert-name/",fetchPlayerDetails:"/players/:username",fetchPlayerGroups:"/players/:username/groups/",fetchPlayerAchievements:"/players/:username/achievements/progress",fetchPlayerCompetitions:"/players/:username/competitions/",fetchPlayerSnapshots:"/players/:username/snapshots/",fetchPlayerRecords:"/players/:username/records/",fetchPlayerDeltas:"/players/:username/gained/",fetchPlayerNames:"/players/:username/names/"},Vt=Ht;function Bt(){Bt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var zt=function(e,t,r,n,a){return function(){var o=Object(Mt.a)(Bt().mark((function o(c){var i,l,s,u,m,f;return Bt().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c(Be.onCreateRequest()),o.prev=1,i={name:e,description:t,clanChat:r,homeworld:n?parseInt(n,10):void 0,members:a},o.next=5,Vt.post(Kt.createGroup,i);case 5:return l=o.sent,s=l.data,o.abrupt("return",c(Be.onCreateSuccess({data:s})));case 10:return o.prev=10,o.t0=o.catch(1),u=o.t0.response.data,m=u.message,f=u.data,o.abrupt("return",c(Be.onCreateError({error:m,data:f})));case 14:case"end":return o.stop()}}),o,null,[[1,10]])})));return function(e){return o.apply(this,arguments)}}()},Wt=function(e,t,r,n,a,o,c){return function(){var i=Object(Mt.a)(Bt().mark((function i(l){var s,u,m,f,p,d,h;return Bt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return l(Be.onEditRequest()),i.prev=1,s={name:t,description:r,clanChat:n,homeworld:a,members:o,verificationCode:c},u=Kt.editGroup.replace(":id",e),i.next=6,Vt.put(u,s);case 6:return m=i.sent,f=m.data,i.abrupt("return",l(Be.onEditSuccess({data:f})));case 11:return i.prev=11,i.t0=i.catch(1),p=i.t0.response.data,d=p.message,h=p.data,i.abrupt("return",l(Be.onEditError({error:d,data:h})));case 15:case"end":return i.stop()}}),i,null,[[1,11]])})));return function(e){return i.apply(this,arguments)}}()},Xt=function(e,t){return function(){var r=Object(Mt.a)(Bt().mark((function r(n){var a;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Be.onDeleteRequest()),r.prev=1,a=Kt.deleteGroup.replace(":id",e),r.next=5,Vt.delete(a,{data:{verificationCode:t}});case 5:return r.abrupt("return",n(Be.onDeleteSuccess({groupId:e})));case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",n(Be.onDeleteError({error:r.t0.response.data.message})));case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},Jt=function(e,t,r){return function(){var n=Object(Mt.a)(Bt().mark((function n(a){var o,c,i,l;return Bt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Be.onFetchListRequest()),n.prev=1,o=Object(G.a)(Object(G.a)({},e),{},{limit:t,offset:r}),n.next=5,Vt.get(Kt.fetchGroups,{params:o});case 5:c=n.sent,i=c.data,l=!r,a(Be.onFetchListSuccess({data:i,refresh:l})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),a(Be.onFetchListError(n.t0.message.toString()));case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()},Zt=function(e){return function(){var t=Object(Mt.a)(Bt().mark((function t(r){var n,a,o;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Be.onFetchDetailsRequest()),t.prev=1,n=Kt.fetchGroupDetails.replace(":id",e),t.next=5,Vt.get(n);case 5:return a=t.sent,o=a.data,t.abrupt("return",r(Be.onFetchDetailsSuccess({data:o})));case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(Be.onFetchDetailsError(t.t0.message.toString())));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},$t=function(e){return function(){var t=Object(Mt.a)(Bt().mark((function t(r){var n,a,o;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Be.onFetchMonthlyTopRequest()),t.prev=1,n=Kt.fetchGroupMonthlyTop.replace(":id",e),t.next=5,Vt.get(n,{params:{period:vt.Period.MONTH,metric:vt.Metric.OVERALL,limit:1}});case 5:return a=t.sent,o=a.data,t.abrupt("return",r(Be.onFetchMonthlyTopSuccess({groupId:e,data:o?o[0]:null})));case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(Be.onFetchMonthlyTopError(t.t0.message.toString())));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},Qt=function(e){return function(){var t=Object(Mt.a)(Bt().mark((function t(r){var n,a,o;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Be.onFetchStatisticsRequest()),t.prev=1,n=Kt.fetchGroupStatistics.replace(":id",e),t.next=5,Vt.get(n);case 5:return a=t.sent,o=a.data,t.abrupt("return",r(Be.onFetchStatisticsSuccess({groupId:e,data:o})));case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(Be.onFetchStatisticsError(t.t0.message.toString())));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},er=function(e){return function(){var t=Object(Mt.a)(Bt().mark((function t(r){var n,a,o;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Be.onFetchPlayerGroupsRequest()),t.prev=1,n=Kt.fetchPlayerGroups.replace(":username",e),t.next=5,Vt.get(n);case 5:a=t.sent,o=a.data,r(Be.onFetchPlayerGroupsSuccess({data:o,username:e})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r(Be.onFetchPlayerGroupsError(t.t0.message.toString()));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},tr=function(e,t){return function(){var r=Object(Mt.a)(Bt().mark((function r(n){var a,o,c,i,l,s;return Bt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Be.onUpdateAllRequest()),r.prev=1,a=Kt.updateAllMembers.replace(":id",e),r.next=5,Vt.post(a,{verificationCode:t});case 5:return o=r.sent,c=o.data,r.abrupt("return",n(Be.onUpdateAllSuccess({groupId:e,data:c})));case 10:return r.prev=10,r.t0=r.catch(1),i=r.t0.response.data,l=i.message,s=i.data,r.abrupt("return",n(Be.onUpdateAllError({error:l,data:s})));case 14:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e){return r.apply(this,arguments)}}()},rr=function(e){return function(){var t=Object(Mt.a)(Bt().mark((function t(r){var n,a,o,c,i,l;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Be.onMigrateRequest()),t.prev=1,n=Kt.migrateFromTemple.replace(":id",e),t.next=5,Vt.get(n);case 5:return a=t.sent,o=a.data,t.abrupt("return",r(Be.onMigrateSuccess({templeId:e,data:o})));case 10:return t.prev=10,t.t0=t.catch(1),c=t.t0.response.data,i=c.message,l=c.data,t.abrupt("return",r(Be.onMigrateError({error:i,data:l})));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},nr=function(e){return function(){var t=Object(Mt.a)(Bt().mark((function t(r){var n,a,o,c,i,l;return Bt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Be.onMigrateRequest()),t.prev=1,n=Kt.migrateFromCML.replace(":id",e),t.next=5,Vt.get(n);case 5:return a=t.sent,o=a.data,t.abrupt("return",r(Be.onMigrateSuccess({cmlId:e,data:o})));case 10:return t.prev=10,t.t0=t.catch(1),c=t.t0.response.data,i=c.message,l=c.data,t.abrupt("return",r(Be.onMigrateError({error:i,data:l})));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},ar=function(e){return e.groups},or=function(e){return e.groups.groups},cr=Object(V.a)(ar,(function(e){return e.error})),ir=Object(V.a)(ar,(function(e){return e.isFetchingList})),lr=Object(V.a)(ar,(function(e){return e.isFetchingDetails})),sr=Object(V.a)(ar,(function(e){return e.isFetchingMonthlyTop})),ur=Object(V.a)(ar,(function(e){return e.isFetchingStatistics})),mr=Object(V.a)(ar,(function(e){return e.isCreating})),fr=Object(V.a)(ar,(function(e){return e.isEditing})),pr=Object(V.a)(or,(function(e){return Object(ye.mapValues)(e,yr)})),dr=Object(V.a)((function(e){return e.groups.playerGroups}),(function(e){return Object(ye.mapValues)(e,(function(e){return e.map(yr)}))})),hr=Object(V.a)(or,(function(e){return Object.values(e).map(yr).sort((function(e,t){return t.score-e.score||e.id-t.id}))}));function vr(e){return function(t){return pr(t)[e]}}function gr(e){return function(t){return dr(t)[e]}}function yr(e){if(!e)return null;var t=e.memberships;if(t&&t.length>0){var r=t.map((function(e){return e.player.exp})).reduce((function(e,t){return e+t}),0),n=t.map((function(e){return e.player.ehp})).reduce((function(e,t){return e+t}),0);return Object(G.a)(Object(G.a)({},e),{},{totalExperience:r,totalEHP:n})}return e}r(156);var br=function(e){var t=e.resultsSize,r=e.sortingColumn,n=e.sortingDirection,a=e.bottomStroke,o=e.onExportClicked,c=r.label||xt(r.key),i="default"===n?"ascending":n;return S.a.createElement("div",{className:et()("table-toolbar",{"-stroke":a})},S.a.createElement("div",{className:"table-toolbar__info"},S.a.createElement("span",null,"Showing ".concat(t," results")),S.a.createElement("span",{className:"separator"},"|"),S.a.createElement("span",null,"Ordered by"),S.a.createElement("span",{className:"highlight"},"".concat(c," (").concat(i,")"))),S.a.createElement("button",{className:"table-toolbar__btn",type:"button",onClick:o},S.a.createElement("img",{src:"/img/icons/export.svg",alt:""}),"Export Table"))},Er=(r(157),"default"),wr="ascending",Or="descending",jr={type:Er,by:""};function xr(e){var t=e.rows,r=e.columns,n=e.uniqueKeySelector,a=e.renderRowDetails,o=e.highlightedRowKey,c=e.listStyle,i=e.listStyleHeaders,l=e.showToolbar,s=e.onRowClicked,u=e.onExportClicked,m=Object(_.useState)(jr),f=Object($e.a)(m,2),p=f[0],d=f[1],h=Object(_.useCallback)((function(e,t){var n=r.find((function(e){return e.key===p.by}));if(!n)return 0;var a=n.get?n.get(e):e[p.by],o=n.get?n.get(t):t[p.by],c="string"===typeof a||"string"===typeof o;return p.type===wr?c?String(a).localeCompare(String(o)):a-o:p.type===Or?c?String(o).localeCompare(String(a)):o-a:0}),[r,p]);Object(_.useEffect)((function(){return function(){return d(jr)}}),[]);var v=et()("table",{"-clickable":!!s,"-list":c,"-details":!!a}),g=function(e){return e&&e()||""},y=function(e){return et()("arrow",{"-default":p.by!==e,"-ascending":"ascending"===p.type&&p.by===e,"-descending":"descending"===p.type&&p.by===e})},b=function(e,t){return et()(e,{"-highlighted":t})},E=Object(_.useMemo)((function(){return Object(T.a)(t).sort(h)}),[t,h]);return S.a.createElement("div",null,l&&r.length>0&&S.a.createElement(br,{resultsSize:t.length,sortingColumn:r.find((function(e){return e.key===p.by}))||r[0],sortingDirection:p.type,bottomStroke:i,onExportClicked:u}),S.a.createElement("table",{className:v,cellSpacing:"0",cellPadding:"0"},S.a.createElement("colgroup",null,r&&r.map((function(e){var t=e.key,r=e.width;return S.a.createElement("col",{key:"colgroup-".concat(t),width:r})}))),(!c||i)&&S.a.createElement("thead",null,S.a.createElement("tr",null,r.map((function(e){var t=e.key,r=e.label,n=e.className,a=e.isSortable,o=void 0===a||a;return S.a.createElement("th",{key:"col-".concat(t),className:g(n),onClick:function(){return o&&function(e){var t=Er;p.type===Er||p.by!==e?t=wr:p.type===wr&&(t=Or),d({type:t,by:e})}(t)}},function(e,t){return e||""===e?e:xt(t)}(r,t),o&&S.a.createElement("div",{className:y(t)}))})))),S.a.createElement("tbody",null,t&&0!==t.length?E.map((function(e,t){var c=n(e);return S.a.createElement(_.Fragment,{key:c},S.a.createElement("tr",{onClick:function(){return s&&s(c)}},r.map((function(t){var r=t.key,n=t.transform,a=t.get,i=t.className,l="".concat(c,"/").concat(r),s=c===o,u=function(e,t,r,n){var a=r?r(e):e[t];return[n?n(a,e):a,a]}(e,r,a,n),m=Object($e.a)(u,2),f=m[0],p=function(e,t,r){return e?e(t,r):""}(i,m[1],e);return S.a.createElement("td",{className:b(p,s),key:l},f)}))),a&&S.a.createElement("td",{colSpan:"100%",className:"details-cell"},a(e,t)))})):S.a.createElement("tr",{className:"-empty"},S.a.createElement("td",{colSpan:2},"No results found")))))}xr.defaultProps={rows:[],onRowClicked:void 0,onExportClicked:void 0,renderRowDetails:void 0,listStyle:!1,listStyleHeaders:!1,showToolbar:!1,highlightedRowKey:null};var Nr=S.a.memo(xr),kr=(r(158),{uniqueKey:function(e){return e.id},columns:[{key:"name",className:function(){return"-primary"}},{key:"memberCount",transform:function(e){return e?"".concat(e," members"):""},width:130}]});function _r(e){return{label:e.name,value:e.id}}function Sr(e){var t=e.group,r=e.onGroupChanged,n=Object(P.b)(),a=Object(P.c)(c.getGroups),i=Object(_.useMemo)((function(){return a.map(_r)}),[a]),l=Object(ye.debounce)((function(e){return n(o.fetchList({name:e}))}),500);var s=Object(_.useCallback)((function(e){e&&e.length&&l(e)}),[]);return S.a.createElement("div",{className:"group-selector"},S.a.createElement(rt,{placeholder:"Search groups",suggestions:i,onInput:s,onSelected:function(e){var t=a.find((function(t){return t.id===e}));t&&r(t)},clearOnSelect:!0}),t?S.a.createElement(S.a.Fragment,null,S.a.createElement("span",{className:"form-row__label"},"Selected group"),S.a.createElement(Nr,{uniqueKeySelector:kr.uniqueKey,columns:kr.columns,rows:[t],listStyle:!0})):S.a.createElement("span",{className:"no-groups"},"No group is selected, please use the search bar above to select one."))}Sr.defaultProps={group:void 0};var Lr=Sr;r(159);var Cr=function(e){var t=e.data;return S.a.createElement("div",{className:"info-panel"},t.map((function(e){var t=e.key,r=e.value,n=e.className;return S.a.createElement("div",{key:t,className:"info-item"},S.a.createElement("span",{className:"info-item__label"},t),S.a.createElement("b",{className:"info-item__value ".concat(n||"")},r))})))},Pr=r(76),Tr=r.n(Pr);r(160);function Fr(e){var t=e.datasets,r=e.distribution,n=e.onDistributionChanged,a=e.isLoading,o=e.invertYAxis,c=e.labelPrefix,i=e.yAxisPrefix,l=t.filter((function(e){return e.data.length>1})).length>0,s=Object(_.useRef)(null),u=Object(_.useRef)(null);return Object(_.useEffect)((function(){if(l&&(s.current&&s.current.destroy(),u.current)){var e=u.current.getContext("2d");s.current=new Tr.a(e,function(e,t,r,n){return{type:"line",data:{labels:[],datasets:e},options:{animation:!1,legend:{display:!0,position:"bottom",labels:{usePointStyle:!0,boxWidth:6,fontColor:"white",padding:30},onHover:function(e){e.target.style.cursor="pointer"},onLeave:function(e){e.target.style.cursor="default"}},hover:{mode:"point"},tooltips:{callbacks:{title:function(e){return ft(e[0].xLabel,"DD MMM, HH:mm")},label:function(e,t){var r=e.datasetIndex,a=e.yLabel;return"".concat(t.datasets[r].label,": ").concat(n).concat(Nt(a))},labelColor:function(e,t){return{backgroundColor:t.config.data.datasets[e.datasetIndex].borderColor}}}},scales:{xAxes:[{type:"time",distribution:"linear",time:{displayFormats:{hour:"D MMM, HH:mm"}},ticks:{maxTicksLimit:5,maxRotation:0,minRotation:0}}],yAxes:[{ticks:{reverse:t,callback:function(e){return 0===e&&"+"===r?e:"".concat(r).concat(Nt(e,!0))},beginAtZero:!1,maxTicksLimit:5}}]},elements:{line:{tension:0}}}}}(t,o,i,c))}}),[t]),a?S.a.createElement("div",{className:"chart__container"},S.a.createElement("span",{className:"message"},"Loading...")):l?S.a.createElement("div",{className:"chart__container"},function(e,t){if(!e||e.before<=30)return null;var r=e.enabled,n=e.after,a=e.before;if(r)return S.a.createElement("span",{className:"distribution-label"},"Showing only ".concat(n," out of ").concat(a," snapshots for easier viewing."),S.a.createElement("button",{type:"button",onClick:t},"Show all"));return S.a.createElement("span",{className:"distribution-label"},"Showing ".concat(a," snapshots. Are these hard to read?"),S.a.createElement("button",{type:"button",onClick:t},"Click to smoothen the chart"))}(r,n),S.a.createElement("canvas",{id:"line-chart",ref:u})):S.a.createElement("div",{className:"chart__container"},S.a.createElement("span",{className:"message"},"Not enough data to display"))}Fr.defaultProps={invertYAxis:!1,isLoading:!1,labelPrefix:"",yAxisPrefix:"",distribution:void 0,onDistributionChanged:void 0};var Dr=S.a.memo(Fr);r(161);var Ar=S.a.memo((function(){return S.a.createElement("div",{className:"loading"},"Loading...")}));function Ir(){Ir=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var Gr=function(e){return function(){var t=Object(Mt.a)(Ir().mark((function t(r){var n,a,o;return Ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Ge.onFetchRequest()),t.prev=1,n=Kt.fetchPlayerDetails.replace(":username",e),t.next=5,Vt.get(n);case 5:return a=t.sent,o=a.data,t.abrupt("return",r(Ge.onFetchSuccess({data:o})));case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(Ge.onFetchError(t.t0.message.toString())));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},Rr=function(e){return function(){var t=Object(Mt.a)(Ir().mark((function t(r){var n,a,o;return Ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Ge.onSearchRequest()),t.prev=1,n={username:e},t.next=5,Vt.get(Kt.searchPlayers,{params:n});case 5:return a=t.sent,o=a.data,t.abrupt("return",r(Ge.onSearchSuccess({data:o})));case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(Ge.onSearchError(t.t0.message.toString())));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},Mr=function(e){return function(){var t=Object(Mt.a)(Ir().mark((function t(r){var n,a;return Ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Ge.onTrackRequest({username:e})),t.prev=1,t.next=4,Vt.post(Kt.trackPlayer.replace(":username",e));case 4:return n=t.sent,a=n.data,r(Ye.onParticipantUpdated({username:e})),t.abrupt("return",r(Ge.onTrackSuccess({username:e,data:a})));case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(Ge.onTrackError(t.t0.response?t.t0.response.data.message:t.t0.message.toString())));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},qr=function(e){return function(){var t=Object(Mt.a)(Ir().mark((function t(r){var n,a;return Ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Ge.onAssertTypeRequest()),t.prev=1,t.next=4,Vt.post(Kt.assertPlayerType.replace(":username",e));case 4:return n=t.sent,a=n.data,t.abrupt("return",r(Ge.onAssertTypeSuccess({username:e,playerType:a.player.type,changed:a.changed})));case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",r(Ge.onAssertTypeError(t.t0.response.data.message)));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},Yr=function(e,t){return function(){var r=Object(Mt.a)(Ir().mark((function r(n){var a,o,c,i;return Ir().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Ge.onAssertNameRequest()),r.prev=1,a={username:e},r.next=5,Vt.post(Kt.assertPlayerName,a);case 5:return o=r.sent,c=o.data,i=t!==c.displayName,r.abrupt("return",n(Ge.onAssertNameSuccess({username:e,displayName:c.displayName,changed:i})));case 11:return r.prev=11,r.t0=r.catch(1),r.abrupt("return",n(Ge.onAssertNameError(r.t0.response.data.message)));case 14:case"end":return r.stop()}}),r,null,[[1,11]])})));return function(e){return r.apply(this,arguments)}}()},Ur=function(e){return e.players},Hr=Object(V.a)(Ur,(function(e){return e.isTracking})),Kr=Object(V.a)(Ur,(function(e){return e.isFetching})),Vr=Object(V.a)((function(e){return e.players.updating}),(function(e){return e})),Br=Object(V.a)((function(e){return e.players.searchResults}),(function(e){return Object.values(e)}));function zr(e){return function(t){return Wr(t)[e]}}var Wr=Object(V.a)((function(e){return e.players.players}),(function(e){return e}));r(162);function Xr(e){var t=e.id,r=e.type,n=e.value,a=e.disabled,o=e.onChange,c=e.placeholder,i=e.search,l=e.disableAutocomplete,s=e.maxCharacters;return S.a.createElement("div",{className:"text-input"},S.a.createElement("input",{id:t,className:"text-input__input",type:r,value:n,placeholder:c,onChange:o,autoComplete:l?"off":"on",maxLength:s,disabled:a}),i&&S.a.createElement("img",{className:"text-input__icon",src:"/img/icons/search.svg",alt:""}),s&&n&&S.a.createElement("div",{className:"text-input__counter"},"".concat(s-n.toString().length,"/").concat(s)))}Xr.defaultProps={id:void 0,value:void 0,type:"text",search:!1,disabled:!1,disableAutocomplete:!0,maxCharacters:void 0};var Jr=S.a.memo(Xr),Zr=(r(163),function(e){return et()("selector-menu",{"-closed":!e})});function $r(e){var t=e.options,r=e.selectedIndex,n=e.onSelect,a=e.disabled,o=e.search,c=Object(_.useState)(!1),i=Object($e.a)(c,2),l=i[0],s=i[1],u=Object(_.useState)(""),m=Object($e.a)(u,2),f=m[0],p=m[1],d=t&&"selector-search-".concat(t[0].label);var h=Object(_.useCallback)((function(e){n&&n(e),g(),p("")}),[t,n]),v=Object(_.useCallback)((function(e){p(e.target.value)}),[t]),g=Object(_.useCallback)((function(){return s(!1)}),[]),y=Object(_.useCallback)((function(){return s((function(e){return!e}))}),[]);Object(_.useEffect)((function(){if(l&&d&&o){var e=document.getElementById(d);e&&e.focus()}}),[l]);var b,E=t&&t[r],w=E?E.label:"---",O=E&&E.icon;return S.a.createElement("div",{className:"selector",onBlur:function(e){e&&e.relatedTarget&&e.relatedTarget.id===d||g()}},S.a.createElement("button",{className:(b=a,et()({"selector-toggle":!0,"-disabled":b})),type:"button",onClick:y},O&&S.a.createElement("img",{className:"toggle__icon",src:O,alt:""}),S.a.createElement("span",{className:"toggle__text"},a?"":w),S.a.createElement("img",{className:"toggle__icon",src:"/img/icons/dropdown_arrow_down.svg",alt:""})),S.a.createElement("div",{className:Zr(l)},t&&S.a.createElement(S.a.Fragment,null,o&&S.a.createElement(Jr,{id:d,value:f,placeholder:"Search...",onChange:v,search:!0}),S.a.createElement("div",{className:"selector-list"},t.map((function(e,t){return S.a.createElement("button",{key:e.value,type:"button",className:(n=t===r,a=e.label.toLowerCase().includes(f.toLowerCase()),et()("selector-list__item",{"-selected":n,"-hidden":!a})),onMouseDown:function(){return h(e)}},e.icon&&S.a.createElement("img",{className:"selector-item__icon",src:e.icon,alt:""}),S.a.createElement("span",{className:"selector-item__label"},e.label));var n,a}))))))}$r.defaultProps={options:void 0,onSelect:void 0,selectedIndex:void 0,disabled:!1,search:!1};var Qr=S.a.memo($r);r(164);function en(e,t,r,n,a,o){return{uniqueKeySelector:function(e){return e.username},columns:[{key:"displayName",label:"Name",width:170,className:function(t,r){return n=r?r.username:"",e&&e.includes(n)?"-negative":"-primary";var n}},{key:"role",label:"Role",isSortable:!1,width:200,transform:function(e,t){return a.find((function(e){return e===t.username}))?S.a.createElement(Qr,{options:n,selectedIndex:n.findIndex((function(e){return e.value===t.role})),onSelect:function(e){return r(t.username,e.value)},search:!0}):S.a.createElement("div",{className:"role"},S.a.createElement("img",{src:wt(e),alt:""}),S.a.createElement("span",null,vt.GroupRoleProps[e].name),S.a.createElement("button",{type:"button",onClick:function(){return o((function(e){return[].concat(Object(T.a)(e),[t.username])}))}},"(Change)"))}},{key:"remove",label:"",width:90,isSortable:!1,transform:function(e,r){return S.a.createElement("button",{className:"table-btn -remove",type:"button",onClick:function(){return t(r.username)}},"Remove member")}}]}}function tn(e){var t=e.members,r=e.roles,n=e.invalidUsernames,a=e.onMemberAdded,o=e.onMemberRemoved,c=e.onMemberRoleSwitched,s=Object(P.b)(),u=Object(P.c)(l.getSearchResults),m=Object(_.useState)([]),f=Object($e.a)(m,2),p=f[0],d=f[1],h=Object(_.useMemo)((function(){return u.map((function(e){return{label:(t=e).displayName,value:t.username};var t}))}),[u]),v=Object(ye.debounce)((function(e){return s(i.searchPlayers(e))}),500),g=Object(_.useCallback)((function(e){e&&e.length&&v(e)}),[]),y=Object(_.useCallback)((function(e){a(e)}),[]),b=Object(_.useCallback)((function(e){o(e)}),[]),E=Object(_.useCallback)((function(e,t){c(e,t)}),[]),w=Object(_.useMemo)((function(){return en(n,b,E,r,p,d)}),[n,b,E,r,p,d]);return S.a.createElement("div",{className:"members-selector"},S.a.createElement(rt,{suggestions:h,onInput:g,onSelected:y,placeholder:"Search players",clearOnSelect:!0}),t&&t.length>0?S.a.createElement(Nr,{uniqueKeySelector:w.uniqueKeySelector,columns:w.columns,rows:t}):S.a.createElement("span",{className:"empty-selected"},"No players selected"))}tn.defaultProps={invalidUsernames:[]};var rn=tn;r(165);function nn(){nn=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var an=[{type:"dropdown",label:"Leaderboards",links:[{icon:"/img/icons/rising.svg",label:"Current Top",url:"/top"},{icon:"/img/icons/medal.svg",label:"Records",url:"/records"},{icon:"/img/icons/hiscores.svg",label:"Virtual Hiscores",url:"/leaderboards"}]},{type:"dropdown",label:"Community",links:[{icon:"/img/icons/group.svg",label:"Groups",url:"/groups"},{icon:"/img/icons/trophy.svg",label:"Competitions",url:"/competitions"},{icon:"/img/icons/label.svg",label:"Name changes",url:"/names"}]},{type:"dropdown",label:"Efficiency",links:[{icon:"/img/icons/skilling.svg",label:"EHP Rates",url:"/rates/ehp"},{icon:"/img/icons/sword.svg",label:"EHB Rates",url:"/rates/ehb"}]},{type:"link",label:"API",url:"https://docs.wiseoldman.net"},{type:"link",label:"Discord Bot",url:"https://bot.wiseoldman.net"}];var on=function(){var e=Object(Je.f)(),t=Object(P.b)(),r=Object(_.useState)(null),n=Object($e.a)(r,2),a=n[0],o=n[1],c=Object(_.useState)(!0),l=Object($e.a)(c,2),s=l[0],u=l[1],m=function(){u(!0)},f=function(){var r=Object(Mt.a)(nn().mark((function r(n){var o,c,l;return nn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),!a||!a.length){r.next=9;break}return o=a,r.next=5,t(i.fetchPlayer(o));case 5:c=r.sent,(l=c.payload).data&&l.data.username?e.push("/players/".concat(l.data.username)):e.push("/players/search/".concat(o)),m();case 9:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),p=et()({"nav-items__list":!0,"-collapsed":s}),d=function(e){return"dropdown"===e.type?"nav-item -dropdown":"nav-item -link"};return S.a.createElement("nav",{className:"nav-bar"},S.a.createElement("div",{className:"beta-warning"},"A new beta version of the website is now available. It is still under construction but we invite you to try it and share feedback.",S.a.createElement("a",{href:"https://beta.wiseoldman.net"},"Try the beta")),S.a.createElement("div",{className:"nav-bar__wrapper"},S.a.createElement(Ze.b,{className:"nav-brand col-md-3 col-8",to:"/",onClick:m},S.a.createElement("img",{className:"nav-logo-img",src:"/img/logo.png",alt:""}),S.a.createElement("div",{className:"nav-logo-text"},S.a.createElement("span",null,"WISE"),S.a.createElement("span",null,"OLD MAN"))),S.a.createElement("div",{className:"nav-menu col-md-9 col-4"},S.a.createElement("button",{className:"nav-toggle",type:"button",onClick:function(){u(!s)}},s?S.a.createElement("img",{src:"/img/icons/menu.svg",alt:""}):S.a.createElement("img",{src:"/img/icons/clear.svg",alt:""})),S.a.createElement("ul",{className:p},S.a.createElement("li",{className:"nav-item -search"},S.a.createElement("form",{onSubmit:f},S.a.createElement(Jr,{placeholder:"Search player",onChange:function(e){o(e.target.value)}}),S.a.createElement("button",{type:"submit",style:{display:"none"}}))),an.map((function(e){return S.a.createElement("li",{key:e.label,className:d(e)},"link"===e.type?S.a.createElement("a",{className:e.buttonStyle?"-button-link":"",href:e.url},e.label):S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"dropdown__wrapper"},S.a.createElement("b",null,e.label),S.a.createElement("img",{src:"/img/icons/dropdown_arrow_down.svg",alt:""})),S.a.createElement("ul",{className:"dropdown__content"},e.links.map((function(e){return S.a.createElement("li",{key:e.url},S.a.createElement(Ze.b,{to:e.url,onClick:m,className:"dropdown__link"},S.a.createElement("img",{src:e.icon,alt:e.label}),S.a.createElement("span",{className:"dropdown_link-text"},e.label)))})))))}))))))},cn=(r(166),{success:{className:"-success",icon:"/img/icons/check_green.svg",closeIcon:"/img/icons/clear_green.svg"},error:{className:"-error",icon:"/img/icons/error_red.svg",closeIcon:"/img/icons/clear_red.svg"},warn:{className:"-warn",icon:"/img/icons/warn_orange.svg",closeIcon:"/img/icons/clear_orange.svg"}});var ln=S.a.memo((function(){var e=Object(P.b)(),t=Object(P.c)(a.isNotificationVisible),r=Object(P.c)(a.getNotification),o=r.text,c=r.type,i=r.duration,l=Object(_.useRef)(null),s=function(){e(n.hideNotification())};Object(_.useEffect)((function(){t&&(clearTimeout(l.current),l.current=setTimeout((function(){return s()}),i))}),[t,o,c,i]);var u=et()({notification:!0,"-success":"success"===c,"-error":"error"===c,"-warn":"warn"===c,"-visible":t});return S.a.createElement("div",{className:"notification__container"},S.a.createElement("div",{className:u},S.a.createElement("img",{src:cn[c].icon,alt:""}),S.a.createElement("span",{className:"notification__text"},o),S.a.createElement("button",{className:"notification__close",type:"button",onClick:s},S.a.createElement("img",{src:cn[c].closeIcon,alt:""}))))}));r(167);function sn(e){var t=e.value,r=e.isColored,n=e.isSigned,a=e.lowThreshold,o=Object(_.useState)(!1),c=Object($e.a)(o,2),i=c[0],l=c[1],s=r?function(e,t){return 0===e?"":e<0?"-negative":e<t?"-low-positive":"-positive"}(t,a):"",u=Nt(t,!0),m=Nt(t,!1),f=n?function(e,t){return e<=0?t:"+".concat(t)}(t,u):u;return S.a.createElement("button",{className:"number-label-btn",type:"button",onClick:function(e){e.stopPropagation(),l(!i)},onBlur:function(){return l(!1)}},i&&S.a.createElement("div",{className:"number-label-popup"},m),S.a.createElement("abbr",{className:"number-label ".concat(s),title:m},S.a.createElement("span",null,f)))}sn.defaultProps={isColored:!1,isSigned:!1,lowThreshold:0};var un=sn;r(168);function mn(e){var t=e.title,r=e.icon,n=e.iconTooltip,a=e.renderRight,o=e.renderLeft;return S.a.createElement("div",{className:"page-header"},r&&S.a.createElement("abbr",{title:n},S.a.createElement("img",{className:"page-header__icon",src:r,alt:""})),S.a.createElement("h1",{className:"page-header__title"},t),o&&S.a.createElement("div",{className:"page-header__left"},o()),a&&S.a.createElement("div",{className:"page-header__right"},a()))}mn.defaultProps={icon:void 0,iconTooltip:void 0,renderLeft:void 0,renderRight:void 0};var fn=S.a.memo(mn);r(169);var pn=S.a.memo((function(e){var t=e.title;return S.a.createElement("h1",{className:"page__title"},t)}));r(170);function dn(e){var t=e.participants,r=e.invalidUsernames,n=e.onParticipantAdded,a=e.onParticipantRemoved,o=Object(P.b)(),c=Object(P.c)(l.getSearchResults),s=Object(_.useMemo)((function(){return c.map((function(e){return{label:(t=e).displayName,value:t.username};var t}))}),[c]),u=Object(ye.debounce)((function(e){return o(i.searchPlayers(e))}),500),m=Object(_.useCallback)((function(e){e&&e.length&&u(e)}),[]),f=Object(_.useCallback)((function(e){n(e)}),[]),p=Object(_.useCallback)((function(e){a(e)}),[]);return S.a.createElement("div",{className:"participants-selector"},S.a.createElement(rt,{suggestions:s,onInput:m,onSelected:f,placeholder:"Search players",clearOnSelect:!0}),S.a.createElement("ul",{className:"participants-selector__list"},t&&t.length>0?t.map((function(e){return S.a.createElement("li",{key:e},S.a.createElement("button",{className:"participant-btn",type:"button",onClick:function(){return p(e)}},S.a.createElement("span",{className:(t=r&&r.includes(e),et()("participant-btn__label",{"-invalid":t}))},e),S.a.createElement("img",{className:"participant-btn__icon",src:"/img/icons/clear.svg",alt:"x"})));var t})):S.a.createElement("span",{className:"empty-selected"},"No players selected")))}dn.defaultProps={invalidUsernames:[]};var hn=dn;r(171);function vn(e){var t,r=e.name,n=e.type,a=e.country,o=e.status;t="archived"===o?"/img/runescape/icons_small/archived.png":"flagged"===o?"/img/runescape/icons_small/flagged.png":"unranked"===o||"banned"===o?"/img/runescape/icons_small/unranked.png":bt(n);var c=Et(n,o);return S.a.createElement("div",{className:"player-tag"},S.a.createElement("div",{className:"left"},S.a.createElement("abbr",{className:"player-tag__type",title:c},S.a.createElement("img",{src:t,alt:""})),S.a.createElement("span",{className:"player-tag__name"},r)),a&&S.a.createElement("abbr",{className:"player-tag__flag",title:"Country: ".concat(a,". Set your own flag at wiseoldman.net/flags")},S.a.createElement("img",{src:"/img/flags/".concat(a,".svg"),alt:a})))}vn.defaultProps={type:void 0,country:void 0,status:void 0};var gn=S.a.memo(vn);r(172);var yn=S.a.memo((function(e){var t=e.role,r=wt(t);return S.a.createElement("div",{className:"role-tag"},S.a.createElement("div",{className:"left"},S.a.createElement("abbr",{className:"role-tag__img"},S.a.createElement("img",{src:r,alt:""})),S.a.createElement("span",{className:"role-tag__name"},vt.GroupRoleProps[t].name)))}));r(173);function bn(e){var t=e.title,r=e.bodyText,n=e.iconUrl,a=e.selected,o=e.disabled,c=e.onSelected;return S.a.createElement("button",{className:et()("selectable-card",{"-selected":a,"-disabled":o}),type:"button",onClick:o?void 0:c},S.a.createElement("div",{className:"left"},S.a.createElement("img",{src:n,alt:""})),S.a.createElement("div",{className:"right"},S.a.createElement("b",{className:"title"},t),S.a.createElement("p",{className:"text"},r)))}bn.defaultProps={disabled:!1};var En=bn,wn=(r(174),["NEUTRAL","POSITIVE","NEGATIVE"]);var On=S.a.memo((function(e){var t=e.status,r=et()({"status-dot":!0,"-neutral":t===wn[0],"-positive":t===wn[1],"-negative":t===wn[2]});return S.a.createElement("div",{className:r})}));r(175);var jn=function(e){var t=e.on,r=e.onToggle,n=et()("switch",{"-on":t});return S.a.createElement("button",{className:n,type:"button",onClick:r},S.a.createElement("div",{className:"switch-thumb"}))};r(176);function xn(){var e=50+Math.floor(250*Math.random());return S.a.createElement("li",{className:"table-placeholder__item"},S.a.createElement("div",{className:"placeholder-text",style:{width:e}}))}var Nn=S.a.memo((function(e){var t=e.size;return S.a.createElement("ul",{className:"table-placeholder"},Object(ye.times)(t,(function(e){return S.a.createElement(xn,{key:e})})))})),kn=r(54),_n=r.n(kn),Sn=r(77),Ln=r.n(Sn);r(180);function Cn(e){var t=e.tabs,r=e.selectedIndex,n=e.onTabSelected;return S.a.createElement(Ln.a,{className:"tab-bar",activeIndex:r,handleActiveIndexUpdate:n},t.map((function(e){return S.a.createElement(_n.a,{key:e},S.a.createElement("span",{className:"mdc-tab__text-label"},e))})))}Cn.defaultProps={onTabSelected:void 0};var Pn=S.a.memo(Cn);r(181);var Tn=function(e){var t=e.team,r=e.onEditClicked,n=e.onDeleteClicked;return S.a.createElement("div",{className:"team-card"},S.a.createElement("abbr",{title:"Edit competition"},S.a.createElement("button",{className:"edit-btn",type:"button",onClick:function(){return r(t)}},S.a.createElement("img",{src:"/img/icons/edit.svg",alt:""}))),S.a.createElement("abbr",{title:"Delete competition"},S.a.createElement("button",{className:"delete-btn",type:"button",onClick:function(){return n(t)}},S.a.createElement("img",{src:"/img/icons/clear_red.svg",alt:""}))),S.a.createElement("b",{className:"title"},t.name),t.participants.map((function(e){return S.a.createElement("div",{key:e,className:"participant"},S.a.createElement("b",{className:"participant__name"},e))})))};r(182);function Fn(e){var t=e.text,r=e.onClick,n=e.url,a=n&&n.startsWith("http");return S.a.createElement(ot.a,{condition:!!n,wrap:function(e){return a?S.a.createElement("a",{href:n},e):S.a.createElement(Ze.b,{to:n},e)}},S.a.createElement("button",{className:"text-button",type:"button",onClick:function(){setTimeout((function(){r&&r()}),150)}},t))}Fn.defaultProps={onClick:void 0,url:void 0};var Dn=S.a.memo(Fn);r(183);function An(e){var t=e.value,r=e.popupValue,n=Object(_.useState)(!1),a=Object($e.a)(n,2),o=a[0],c=a[1],i=r||t;return S.a.createElement("button",{className:"text-label-btn",type:"button",onClick:function(e){e.stopPropagation(),c(!o)},onBlur:function(){return c(!1)}},o&&S.a.createElement("div",{className:"text-label-popup"},i),S.a.createElement("abbr",{className:"text-label",title:i},S.a.createElement("span",null,t)))}An.defaultProps={popupValue:void 0};var In=S.a.memo(An);r(184);var Gn=function(){return S.a.createElement("abbr",{className:"verified-badge",title:"Verified group: This group's leader is verified on our Discord server."},S.a.createElement("img",{src:"/img/icons/verified.svg",alt:""}))},Rn=r(13);r(185);var Mn=function(){return S.a.createElement("div",{className:"not-found__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"404 Page not found")),S.a.createElement("div",{className:"panel"},S.a.createElement("h1",{className:"title"},"Ooops!"),S.a.createElement("h2",{className:"text"},"That page could not be found."),S.a.createElement(Ze.b,{to:"/",className:"cta"},"Return to the homepage"),S.a.createElement("img",{className:"troll",src:"/img/notfound/troll.png",alt:""})))};r(186);function qn(){qn=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var Yn=[{title:"Experience tracking",page:"/players/Lynx_Titan",description:"Track your skilling progression overtime, browse your recent gains, personal records and more.",image:"/img/landing_page/features/player_tracking.png"},{title:"Boss killcount tracking",page:"/top/general_graardor/",description:"Track your boss kills and take your rightful place in the global PvM leaderboards.",image:"/img/landing_page/features/boss_tracking.png"},{title:"Player achievements",page:"/players/Zulu/achievements",description:"Reach your in-game goals to unlock your player achievements.",image:"/img/landing_page/features/efficiency_metrics.png"},{title:"Discord Bot",url:"https://bot.wiseoldman.net",description:"Track your clan's progress, competitions and achievements from your own Discord server.",image:"/img/landing_page/features/discord_bot.png"},{title:"Group competitions",page:"/competitions",description:"Compete against all your friends in any skill, boss or activity of your choosing.",image:"/img/landing_page/features/team_competitions.png"},{title:"Global leaderboards",page:"/top",description:"Browse or compete with the community in the global record/gained leaderboards.",image:"/img/landing_page/features/leaderboards.png"}];function Un(){var e=window.scrollY,t=document.getElementById("hero"),r=document.getElementById("intro"),n=document.getElementById("illustration"),a=e/(.6*t.offsetHeight);r.style.opacity=1-a,r.style.transform="translateY(".concat(50*a,"px)"),n.style.opacity=1-a,n.style.transform="scale(".concat(1+.05*a,")")}var Hn=function(){var e=Object(Je.f)(),t=Object(P.b)(),r=Object(P.c)(l.isTracking),n=Object(_.useState)(""),a=Object($e.a)(n,2),o=a[0],c=a[1],s=function(){var r=Object(Mt.a)(qn().mark((function r(n){var a,c;return qn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.preventDefault(),o&&o.length){r.next=3;break}return r.abrupt("return");case 3:return r.next=5,t(i.trackPlayer(o));case 5:a=r.sent,(c=a.payload).username?e.push("/players/".concat(c.username)):e.push("/players/search/".concat(o));case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();return Object(_.useEffect)((function(){return window.addEventListener("scroll",Un),function(){return window.removeEventListener("scroll",Un)}}),[]),S.a.createElement("div",{className:"home__container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"Wise Old Man - The Open Source Old School Runescape player progress tracker.")),S.a.createElement("section",{id:"hero",className:"hero"},S.a.createElement("div",{id:"intro",className:"hero__intro"},S.a.createElement("div",{className:"intro-container"},S.a.createElement("span",{className:"intro-greeting"},"Hi, meet the"),S.a.createElement("h1",{className:"intro-title"},"Wise Old Man"),S.a.createElement("p",{className:"intro-description"},"The Open Source Old School Runescape player progress tracker."),S.a.createElement("form",{className:"intro-input-wrapper",onSubmit:s},S.a.createElement(Jr,{placeholder:"Enter your username",value:o,onChange:function(e){c(e.target.value)}}),S.a.createElement(it,{type:"submit",className:"intro-input-cta",text:"Start tracking",loading:r})),S.a.createElement("div",{className:"intro-links-container"},S.a.createElement("a",{className:"intro-link",href:"https://wiseoldman.net/discord"},S.a.createElement("span",{className:"link-title"},"Join our Discord"),S.a.createElement("img",{className:"link-icon",src:"/img/icons/arrow_right.svg",alt:""})),S.a.createElement("a",{className:"intro-link",href:"https://wiseoldman.net/github"},S.a.createElement("span",{className:"link-title"},"Contribute on Github"),S.a.createElement("img",{className:"link-icon",src:"/img/icons/arrow_right.svg",alt:""}))))),S.a.createElement("div",{id:"illustration",className:"hero__illustration"},S.a.createElement("img",{src:"/img/landing_page/hero_background.png",alt:""}))),S.a.createElement("section",{className:"about container"},S.a.createElement("div",{className:"details row"},S.a.createElement("div",{className:"details__info col-lg-7 col-md-12"},S.a.createElement("h1",{className:"section-title"},"What is it?"),S.a.createElement("p",{className:"description"},"The Wise Old Man is an app that tracks your Old School Runescape player progress. Built on top of the OSRS hiscores, it allows you to keep track of your gains, participate in group competitions, collect achievements and much more.",S.a.createElement("br",null),S.a.createElement("br",null),'It is also a free Open Source project, meaning anyone in the community can contribute code or ideas to add new functionality. Please consider supporting us on Patreon so we can keep expanding and project without relying on "premium" features.'),S.a.createElement("div",{className:"info-actions"},S.a.createElement("a",{href:"https://wiseoldman.net/github",className:"about-btn -github",role:"button"},S.a.createElement("img",{className:"about-btn__icon",src:"/img/icons/github.svg",alt:"github icon"}),S.a.createElement("span",{className:"about-btn__text"},"Contribute on Github")),S.a.createElement("a",{href:"https://wiseoldman.net/discord",className:"about-btn -discord",role:"button"},S.a.createElement("img",{className:"about-btn__icon",src:"/img/icons/discord.svg",alt:"discord icon"}),S.a.createElement("span",{className:"about-btn__text"},"Join our discord")),S.a.createElement("a",{href:"https://wiseoldman.net/patreon",className:"about-btn -patreon",role:"button"},S.a.createElement("img",{className:"about-btn__icon",src:"/img/icons/patreon.svg",alt:"patreon icon"}),S.a.createElement("span",{className:"about-btn__text"},"Become a patron")))),S.a.createElement("div",{className:"details__stats col-lg-5"},S.a.createElement("img",{src:"/img/landing_page/trophies.png",alt:""}))),S.a.createElement("div",{className:"features row"},Yn.map((function(e){var t=e.title,r=e.image,n=e.description,a=e.page,o=e.url;return S.a.createElement("div",{key:t,className:"feature-card"},S.a.createElement("img",{className:"feature-card__image",src:r,alt:""}),S.a.createElement("div",{className:"feature-card__info"},o&&S.a.createElement("a",{href:o},S.a.createElement("b",{className:"feature-title"},t)),a&&S.a.createElement(Ze.b,{to:a},S.a.createElement("b",{className:"feature-title"},t)),S.a.createElement("p",{className:"feature-description"},n)))})))))};var Kn=function(e){var t=e.resultsPerPage,r=e.selector,n=e.action,a=Object(_.useState)(0),o=Object($e.a)(a,2),c=o[0],i=o[1],l=Object(_.useRef)(null),s=Object(P.c)(r),u=s&&s.length<t*(c+1),m=function(e){var r=t,a=t*c;e?(n(r,a,e),l.current=e):n(r,a,l.current)};return Object(_.useEffect)(m,[c]),Object(_.useEffect)((function(){window.onscroll=Object(ye.debounce)((function(){if(!u){var e=window.innerHeight,t=document.documentElement;e+t.scrollTop+500>t.offsetHeight&&setTimeout((function(){return i((function(e){return e+1}))}),1e3)}}),100)}),[s,c]),{data:s,isFullyLoaded:u,reloadData:function(e){i(0),m(e)},resetPagination:function(){i(0)},pageIndex:c}},Vn=r(80),Bn=r.n(Vn);var zn=function(){var e=Object(Je.g)();return Bn.a.parse(e.search)};var Wn=function(e,t){var r=Object(Je.f)(),n=t(Object(Je.h)(),zn()),a=Object(_.useCallback)((function(t){r.push(e(Object(G.a)(Object(G.a)({},n),t)))}),[r,n,e]);return{context:n,updateContext:a}};function Xn(){Xn=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var Jn=function(e,t,r,n,a){return function(){var o=Object(Mt.a)(Xn().mark((function o(c){var i,l,s;return Xn().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c(je.onFetchLeaderboardsRequest({period:t})),o.prev=1,i={metric:e,period:t,playerType:r,playerBuild:n,country:a},o.next=5,Vt.get(Kt.fetchDeltasLeaderboards,{params:i});case 5:l=o.sent,s=l.data,c(je.onFetchLeaderboardsSuccess({period:t,data:s})),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(1),c(je.onFetchLeaderboardsError({period:t,error:o.t0.message.toString()}));case 13:case"end":return o.stop()}}),o,null,[[1,10]])})));return function(e){return o.apply(this,arguments)}}()},Zn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(){var n=Object(Mt.a)(Xn().mark((function n(a){var o,c,i,l,s,u;return Xn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a(je.onFetchPlayerDeltasRequest()),t||r){n.next=15;break}return n.prev=2,n.next=5,Promise.all(vt.PERIODS.map(function(){var t=Object(Mt.a)(Xn().mark((function t(r){var n,a,o,c;return Xn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Kt.fetchPlayerDeltas.replace(":username",e),a={period:r},t.next=4,Vt.get(n,{params:a});case 4:return o=t.sent,c=o.data,t.abrupt("return",{period:r,data:c});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:o=n.sent,c=Object.fromEntries(o.map((function(e){return[e.period,e.data]}))),a(je.onFetchPlayerDeltasSuccess({username:e,data:c})),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),a(je.onFetchPlayerDeltasError(n.t0.message.toString()));case 13:n.next=28;break;case 15:return n.prev=15,i=Kt.fetchPlayerDeltas.replace(":username",e),l={startDate:t,endDate:r},n.next=20,Vt.get(i,{params:l});case 20:s=n.sent,u=s.data,a(je.onFetchPlayerDeltasSuccess({username:e,data:u})),n.next=28;break;case 25:n.prev=25,n.t1=n.catch(15),a(je.onFetchPlayerDeltasError(n.t1.message.toString()));case 28:case"end":return n.stop()}}),n,null,[[2,10],[15,25]])})));return function(e){return n.apply(this,arguments)}}()},$n=function(e,t,r,n,a){return function(){var o=Object(Mt.a)(Xn().mark((function o(c){var i,l,s,u;return Xn().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c(je.onFetchGroupDeltasRequest()),o.prev=1,i={metric:t,period:r,limit:n,offset:a},l=Kt.fetchGroupDeltas.replace(":id",e),o.next=6,Vt.get(l,{params:i});case 6:s=o.sent,u=s.data,c(je.onFetchGroupDeltasSuccess({groupId:e,data:u,refresh:!a})),o.next=14;break;case 11:o.prev=11,o.t0=o.catch(1),c(je.onFetchGroupDeltasError(o.t0.message.toString()));case 14:case"end":return o.stop()}}),o,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},Qn=function(e,t,r,n,a,o){return function(){var c=Object(Mt.a)(Xn().mark((function c(i){var l,s,u,m;return Xn().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return i(je.onFetchGroupDeltasRequest()),c.prev=1,l={metric:t,startDate:r,endDate:n,limit:a,offset:o},s=Kt.fetchGroupDeltas.replace(":id",e),c.next=6,Vt.get(s,{params:l});case 6:u=c.sent,m=u.data,i(je.onFetchGroupDeltasSuccess({groupId:e,data:m,refresh:!o})),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(1),i(je.onFetchGroupDeltasError(c.t0.message.toString()));case 14:case"end":return c.stop()}}),c,null,[[1,11]])})));return function(e){return c.apply(this,arguments)}}()},ea=function(e,t){return function(){var r=Object(Mt.a)(Xn().mark((function r(n){return Xn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n(je.onInvalidate({username:e,period:t}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},ta=function(e){return e.deltas},ra=function(e){return e.deltas.leaderboards},na=Object(V.a)((function(e){return e.deltas.playerDeltas}),(function(e){return e})),aa=Object(V.a)((function(e){return e.deltas.groupDeltas}),(function(e){return Object(ye.mapValues)(e,(function(e){return e.map((function(e,t){return Object(G.a)(Object(G.a)({},e),{},{rank:t+1})}))}))})),oa=function(e){return Object(V.a)(ta,(function(t){return t.isFetchingLeaderboards[e]}))},ca=function(e){return Object(V.a)(ra,(function(t){return Object(ye.mapValues)(t,(function(e){return e&&e.map((function(e,t){return Object(G.a)(Object(G.a)({},e),{},{rank:t+1})}))}))[e]}))},ia=Object(V.a)(ta,(function(e){return e.isFetchingGroupDeltas})),la=Object(V.a)(ta,(function(e){return e.isFetchingPlayerDeltas}));function sa(e){return function(t){return na(t)[e]}}function ua(e){return function(t){return aa(t)[e]}}var ma=r(81),fa=r(82),pa=function(){function e(t){Object(ma.a)(this,e),this.basePath=t}return Object(fa.a)(e,[{key:"getSearchParam",value:function(e){return this.params&&this.params.find((function(t){return t.key===e}))}},{key:"appendSearchParam",value:function(e,t){this.params||(this.params=[]),this.params.push({key:e,value:t})}},{key:"appendToPath",value:function(e){this.basePath+=e}},{key:"getPath",value:function(){var e=this.params&&this.params.length>0?this.params.map((function(e){return"".concat(e.key,"=").concat(e.value)})).join("&"):null;return"".concat(this.basePath).concat(e?"?".concat(e):"")}}]),e}(),da=Object(_.createContext)({});function ha(e,t,r){var n=new pa("/players/".concat(e,"/gained"));return Object(vt.isSkill)(t)||"ehp"===t?n.appendToPath("/skilling"):Object(vt.isBoss)(t)||"ehb"===t?n.appendToPath("/bossing"):n.appendToPath("/activities"),n.appendSearchParam("metric",t),n.appendSearchParam("period",r),n.getPath()}var va=function(e){var t=e.period,r=Object(_.useContext)(da).context.metric,n=Object(P.c)(u.getLeaderboards(t)),a=Object(P.c)(u.isFetching(t)),o=function(e,t){return{uniqueKey:function(e){return e.player.username},columns:[{key:"rank",width:"30",transform:function(e){return S.a.createElement("span",{className:"top-rank"},e)}},{key:"displayName",get:function(e){return e.player.displayName},className:function(){return"-primary"},transform:function(r,n){return S.a.createElement(Ze.b,{to:ha(n.player.displayName,e,t)},S.a.createElement(gn,Object.assign({name:r},n.player)))}},{key:"gained",width:90,transform:function(e){return S.a.createElement(un,{value:e,isColored:!0})}}]}}(r,t);return S.a.createElement(S.a.Fragment,null,S.a.createElement("h3",{className:"period-label"},function(e){return"five_min"===e?"5 Min":xt(e)}(t)),a&&S.a.createElement("img",{className:"loading-icon",src:"/img/icons/loading.png",alt:""}),n?S.a.createElement(Nr,{uniqueKeySelector:o.uniqueKey,columns:o.columns,rows:n,listStyle:!0}):S.a.createElement(Nn,{size:20}))},ga=[{label:"All player types",value:null}].concat(Object(T.a)(vt.PLAYER_TYPES.filter((function(e){return e!==vt.PlayerType.UNKNOWN})).map((function(e){return{label:vt.PlayerTypeProps[e].name,icon:bt(e),value:e}})))),ya=[{label:"All player builds",value:null}].concat(Object(T.a)(vt.PLAYER_BUILDS.map((function(e){return{label:vt.PlayerBuildProps[e].name,value:e}})))),ba=vt.METRICS.map((function(e){return{label:vt.MetricProps[e].name,icon:jt(e,!0),value:e}})),Ea=[{label:"All countries",value:null}].concat(Object(T.a)(Object.entries(vt.CountryProps).map((function(e){var t=Object($e.a)(e,2),r=t[0];return{label:t[1].name,icon:"/img/flags/".concat(r,".svg"),value:r}}))));var wa=function(){var e=Object(_.useContext)(da),t=e.context,r=e.updateContext,n=t.metric,a=t.type,o=t.build,c=t.country,i=ba.findIndex((function(e){return e.value===n})),l=ga.findIndex((function(e){return e.value===a})),s=ya.findIndex((function(e){return e.value===o})),u=Ea.findIndex((function(e){return e.value===c}));return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"col-lg-4 col-md-6"},S.a.createElement(Qr,{options:ba,selectedIndex:i,onSelect:function(e){e&&e.value&&r({metric:e.value})},search:!0})),S.a.createElement("div",{className:"col-lg-2 col-md-4"},S.a.createElement(Qr,{options:ga,selectedIndex:l,onSelect:function(e){r({type:e.value})}})),S.a.createElement("div",{className:"col-lg-3 col-md-5"},S.a.createElement(Qr,{options:ya,selectedIndex:s,onSelect:function(e){r({build:e.value})}})),S.a.createElement("div",{className:"col-lg-3 col-md-5"},S.a.createElement(Qr,{options:Ea,selectedIndex:u,onSelect:function(e){r({country:e.value})},search:!0})))};r(196);function Oa(e){var t=e.metric,r=e.type,n=e.build,a=e.country,o=new pa("/top");return t&&"overall"!==t&&vt.METRICS.includes(t)&&o.appendToPath("/".concat(t)),r&&vt.PLAYER_TYPES.includes(r.toLowerCase())&&o.appendSearchParam("type",r.toLowerCase()),n&&vt.PLAYER_BUILDS.includes(n.toLowerCase())&&o.appendSearchParam("build",n.toLowerCase()),a&&vt.COUNTRY_CODES.includes(a)&&o.appendSearchParam("country",a),o.getPath()}function ja(e,t){var r=e.metric,n=t.type,a=t.build,o=t.country,c=r&&vt.METRICS.includes(r.toLowerCase()),i=n&&vt.PLAYER_TYPES.includes(n.toLowerCase()),l=a&&vt.PLAYER_BUILDS.includes(a.toLowerCase()),s=o&&vt.COUNTRY_CODES.includes(o.toUpperCase());return{metric:c?r.toLowerCase():"overall",type:i?n.toLowerCase():null,build:l?a.toLowerCase():null,country:s?o.toUpperCase():null}}var xa=function(){var e=Object(P.b)(),t=Wn(Oa,ja),r=t.context,n=t.updateContext,a=r.metric,o=r.type,c=r.build,i=r.country;return Object(_.useEffect)((function(){vt.PERIODS.forEach((function(t){e(s.fetchLeaderboards(a,t,o,c,i))}))}),[a,o,c,i]),S.a.createElement(da.Provider,{value:{context:r,updateContext:n}},S.a.createElement("div",{className:"top__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"".concat(vt.MetricProps[a].name," current top"))),S.a.createElement("div",{className:"top__header row"},S.a.createElement("div",{className:"col"},S.a.createElement(pn,{title:"Current Top"}))),S.a.createElement("div",{className:"top__filters row"},S.a.createElement(wa,null)),S.a.createElement("div",{className:"top__list row"},S.a.createElement("div",{className:"col-lg-4 col-md-6"},S.a.createElement(va,{period:vt.Period.DAY})),S.a.createElement("div",{className:"col-lg-4 col-md-6"},S.a.createElement(va,{period:vt.Period.WEEK})),S.a.createElement("div",{className:"col-lg-4 col-md-6"},S.a.createElement(va,{period:vt.Period.MONTH})),S.a.createElement("div",{className:"col-lg-4 col-md-6"},S.a.createElement(va,{period:vt.Period.FIVE_MIN})),S.a.createElement("div",{className:"col-lg-4 col-md-6"},S.a.createElement(va,{period:vt.Period.YEAR})))))};function Na(){Na=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var ka=function(e,t,r,n,a){return function(){var o=Object(Mt.a)(Na().mark((function o(c){var i,l,s;return Na().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c(Ee.onFetchLeaderboardsRequest({period:t})),o.prev=1,i={metric:e,period:t,playerType:r,playerBuild:n,country:a},o.next=5,Vt.get(Kt.fetchRecordLeaderboards,{params:i});case 5:l=o.sent,s=l.data,c(Ee.onFetchLeaderboardsSuccess({period:t,data:s})),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(1),c(Ee.onFetchLeaderboardsError({period:t,error:o.t0.message.toString()}));case 13:case"end":return o.stop()}}),o,null,[[1,10]])})));return function(e){return o.apply(this,arguments)}}()},_a=function(e){return function(){var t=Object(Mt.a)(Na().mark((function t(r){var n,a,o;return Na().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Ee.onFetchPlayerRecordsRequest()),t.prev=1,n=Kt.fetchPlayerRecords.replace(":username",e),t.next=5,Vt.get(n);case 5:a=t.sent,o=a.data,r(Ee.onFetchPlayerRecordsSuccess({username:e,data:o})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r(Ee.onFetchPlayerRecordsError(t.t0.message.toString()));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},Sa=function(e,t,r,n,a){return function(){var o=Object(Mt.a)(Na().mark((function o(c){var i,l,s,u;return Na().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c(Ee.onFetchGroupRecordsRequest()),o.prev=1,i={metric:t,period:r,limit:n,offset:a},l=Kt.fetchGroupRecords.replace(":id",e),o.next=6,Vt.get(l,{params:i});case 6:s=o.sent,u=s.data,c(Ee.onFetchGroupRecordsSuccess({groupId:e,data:u,refresh:!a})),o.next=14;break;case 11:o.prev=11,o.t0=o.catch(1),c(Ee.onFetchGroupRecordsError(o.t0.message.toString()));case 14:case"end":return o.stop()}}),o,null,[[1,11]])})));return function(e){return o.apply(this,arguments)}}()},La=function(e){return function(){var t=Object(Mt.a)(Na().mark((function t(r){return Na().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(Ee.onInvalidate({username:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ca=function(e){return e.records},Pa=function(e){return e.records.leaderboards},Ta=Object(V.a)((function(e){return e.records.playerRecords}),(function(e){return e})),Fa=Object(V.a)((function(e){return e.records.groupRecords}),(function(e){return Object(ye.mapValues)(e,(function(e){return e.map((function(e,t){return Object(G.a)(Object(G.a)({},e),{},{rank:t+1})}))}))})),Da=function(e){return Object(V.a)(Ca,(function(t){return t.isFetchingLeaderboards[e]}))},Aa=function(e){return Object(V.a)(Pa,(function(t){return Object(ye.mapValues)(t,(function(e){return e&&e.map((function(e,t){return Object(G.a)(Object(G.a)({},e),{},{rank:t+1})}))}))[e]}))},Ia=Object(V.a)(Ca,(function(e){return e.isFetchingGroupRecords})),Ga=Object(V.a)(Ca,(function(e){return e.isFetchingPlayerRecords}));function Ra(e){return function(t){return Ta(t)[e]}}function Ma(e){return function(t){return Fa(t)[e]}}var qa=Object(_.createContext)({});function Ya(e,t){var r=new pa("/players/".concat(e,"/records"));return Object(vt.isSkill)(t)||"ehp"===t?r.appendToPath("/skilling"):Object(vt.isBoss)(t)||"ehb"===t?r.appendToPath("/bossing"):r.appendToPath("/activities"),r.getPath()}var Ua=function(e){var t=e.period,r=Object(_.useContext)(qa).context.metric,n=Object(P.c)(f.getLeaderboards(t)),a=Object(P.c)(f.isFetching(t)),o=function(e){return{uniqueKey:function(e){return e.player.username},columns:[{key:"rank",width:"10",transform:function(e){return S.a.createElement("span",{className:"record-rank"},e)}},{key:"displayName",get:function(e){return e.player.displayName},className:function(){return"-primary"},transform:function(t,r){return S.a.createElement(Ze.b,{to:Ya(r.player.username,e)},S.a.createElement(gn,Object.assign({name:t},r.player)))}},{key:"updatedAt",transform:function(e){return S.a.createElement("abbr",{title:ft(e,"Do MMM YYYY HH:mm")},S.a.createElement("span",{className:"record-date"},ft(e,"DD MMM 'YY")))}},{key:"value",transform:function(e){return S.a.createElement(un,{value:e,isColored:!0})}}]}}(r);return S.a.createElement(S.a.Fragment,null,S.a.createElement("h3",{className:"period-label"},function(e){return"five_min"===e?"5 Min":xt(e)}(t)),a&&S.a.createElement("img",{className:"loading-icon",src:"/img/icons/loading.png",alt:""}),n?S.a.createElement(Nr,{uniqueKeySelector:o.uniqueKey,columns:o.columns,rows:n,listStyle:!0}):S.a.createElement(Nn,{size:20}))},Ha=[{label:"All player types",value:null}].concat(Object(T.a)(vt.PLAYER_TYPES.filter((function(e){return e!==vt.PlayerType.UNKNOWN})).map((function(e){return{label:vt.PlayerTypeProps[e].name,icon:bt(e),value:e}})))),Ka=[{label:"All player builds",value:null}].concat(Object(T.a)(vt.PLAYER_BUILDS.map((function(e){return{label:vt.PlayerBuildProps[e].name,value:e}})))),Va=vt.METRICS.map((function(e){return{label:vt.MetricProps[e].name,icon:jt(e,!0),value:e}})),Ba=[{label:"All countries",value:null}].concat(Object(T.a)(Object.entries(vt.CountryProps).map((function(e){var t=Object($e.a)(e,2),r=t[0];return{label:t[1].name,icon:"/img/flags/".concat(r,".svg"),value:r}}))));var za=function(){var e=Object(_.useContext)(qa),t=e.context,r=e.updateContext,n=t.metric,a=t.type,o=t.build,c=t.country,i=Va.findIndex((function(e){return e.value===n})),l=Ha.findIndex((function(e){return e.value===a})),s=Ka.findIndex((function(e){return e.value===o})),u=Ba.findIndex((function(e){return e.value===c}));return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"col-lg-4 col-md-6"},S.a.createElement(Qr,{options:Va,selectedIndex:i,onSelect:function(e){e&&e.value&&r({metric:e.value})},search:!0})),S.a.createElement("div",{className:"col-lg-2 col-md-4"},S.a.createElement(Qr,{options:Ha,selectedIndex:l,onSelect:function(e){r({type:e.value})}})),S.a.createElement("div",{className:"col-lg-3 col-md-5"},S.a.createElement(Qr,{options:Ka,selectedIndex:s,onSelect:function(e){r({build:e.value})}})),S.a.createElement("div",{className:"col-lg-3 col-md-5"},S.a.createElement(Qr,{options:Ba,selectedIndex:u,onSelect:function(e){r({country:e.value})},search:!0})))};r(197);function Wa(e){var t=e.metric,r=e.type,n=e.build,a=e.country,o=new pa("/records");return t&&"overall"!==t&&vt.METRICS.includes(t)&&o.appendToPath("/".concat(t)),r&&vt.PLAYER_TYPES.includes(r.toLowerCase())&&o.appendSearchParam("type",r.toLowerCase()),n&&vt.PLAYER_BUILDS.includes(n.toLowerCase())&&o.appendSearchParam("build",n.toLowerCase()),a&&vt.COUNTRY_CODES.includes(a)&&o.appendSearchParam("country",a),o.getPath()}function Xa(e,t){var r=e.metric,n=t.type,a=t.build,o=t.country,c=r&&vt.METRICS.includes(r.toLowerCase()),i=n&&vt.PLAYER_TYPES.includes(n.toLowerCase()),l=a&&vt.PLAYER_BUILDS.includes(a.toLowerCase()),s=o&&vt.COUNTRY_CODES.includes(o.toUpperCase());return{metric:c?r.toLowerCase():"overall",type:i?n.toLowerCase():null,build:l?a.toLowerCase():null,country:s?o.toUpperCase():null}}var Ja=function(){var e=Object(P.b)(),t=Wn(Wa,Xa),r=t.context,n=t.updateContext,a=r.metric,o=r.type,c=r.build,i=r.country;return Object(_.useEffect)((function(){vt.PERIODS.forEach((function(t){e(m.fetchLeaderboards(a,t,o,c,i))}))}),[a,o,c,i]),S.a.createElement(qa.Provider,{value:{context:r,updateContext:n}},S.a.createElement("div",{className:"records__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"".concat(vt.MetricProps[a].name," records"))),S.a.createElement("div",{className:"records__header row"},S.a.createElement("div",{className:"col"},S.a.createElement(pn,{title:"Records"}))),S.a.createElement("div",{className:"records__filters row"},S.a.createElement(za,null)),S.a.createElement("div",{className:"records__list row"},S.a.createElement("div",{className:"col-lg-4 col-md-6"},S.a.createElement(Ua,{period:vt.Period.DAY})),S.a.createElement("div",{className:"col-lg-4 col-md-6"},S.a.createElement(Ua,{period:vt.Period.WEEK})),S.a.createElement("div",{className:"col-lg-4 col-md-6"},S.a.createElement(Ua,{period:vt.Period.MONTH})),S.a.createElement("div",{className:"col-lg-4 col-md-6"},S.a.createElement(Ua,{period:vt.Period.FIVE_MIN})),S.a.createElement("div",{className:"col-lg-4 col-md-6"},S.a.createElement(Ua,{period:vt.Period.YEAR})))))};function Za(){Za=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var $a=function(e,t,r,n,a,o,c,i){return function(){var l=Object(Mt.a)(Za().mark((function l(s){var u,m,f,p,d,h;return Za().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return s(Ye.onCreateRequest()),l.prev=1,u={title:e,metric:t,startsAt:r,endsAt:n,participants:a||void 0,teams:i||void 0,groupVerificationCode:o||void 0,groupId:c||void 0},l.next=5,Vt.post(Kt.createCompetition,u);case 5:return m=l.sent,f=m.data,l.abrupt("return",s(Ye.onCreateSuccess({data:f})));case 10:return l.prev=10,l.t0=l.catch(1),p=l.t0.response.data,d=p.message,h=p.data,l.abrupt("return",s(Ye.onCreateError({error:d,data:h})));case 14:case"end":return l.stop()}}),l,null,[[1,10]])})));return function(e){return l.apply(this,arguments)}}()},Qa=function(e,t,r,n,a,o,c,i){return function(){var l=Object(Mt.a)(Za().mark((function l(s){var u,m,f,p,d,h,v;return Za().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return s(Ye.onEditRequest()),l.prev=1,u={title:t,metric:r,startsAt:n,endsAt:a,participants:o,teams:c,verificationCode:i},m=Kt.editCompetition.replace(":id",e),l.next=6,Vt.put(m,u);case 6:return f=l.sent,p=f.data,l.abrupt("return",s(Ye.onEditSuccess({data:p})));case 11:return l.prev=11,l.t0=l.catch(1),d=l.t0.response.data,h=d.message,v=d.data,l.abrupt("return",s(Ye.onEditError({error:h,data:v})));case 15:case"end":return l.stop()}}),l,null,[[1,11]])})));return function(e){return l.apply(this,arguments)}}()},eo=function(e,t){return function(){var r=Object(Mt.a)(Za().mark((function r(n){var a;return Za().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Ye.onDeleteRequest()),r.prev=1,a=Kt.deleteCompetition.replace(":id",e),r.next=5,Vt.delete(a,{data:{verificationCode:t}});case 5:return r.abrupt("return",n(Ye.onDeleteSuccess({competitionId:e})));case 8:return r.prev=8,r.t0=r.catch(1),r.abrupt("return",n(Ye.onDeleteError({error:r.t0.response.data.message})));case 11:case"end":return r.stop()}}),r,null,[[1,8]])})));return function(e){return r.apply(this,arguments)}}()},to=function(e,t,r){return function(){var n=Object(Mt.a)(Za().mark((function n(a){var o,c,i,l;return Za().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Ye.onFetchListRequest()),n.prev=1,o=Object(G.a)(Object(G.a)({},e),{},{limit:t,offset:r}),n.next=5,Vt.get(Kt.fetchCompetitions,{params:o});case 5:c=n.sent,i=c.data,l=!r,a(Ye.onFetchListSuccess({data:i,refresh:l})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),a(Ye.onFetchListError(n.t0.message.toString()));case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()},ro=function(e,t){return function(){var r=Object(Mt.a)(Za().mark((function r(n){var a,o,c;return Za().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Ye.onFetchDetailsRequest()),r.prev=1,a=Kt.fetchCompetitionDetails.replace(":id",e),r.next=5,Vt.get(a,{params:{metric:t}});case 5:return o=r.sent,c=o.data,r.abrupt("return",n(Ye.onFetchDetailsSuccess({data:c})));case 10:return r.prev=10,r.t0=r.catch(1),r.abrupt("return",n(Ye.onFetchDetailsError(r.t0.message.toString())));case 13:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e){return r.apply(this,arguments)}}()},no=function(e,t){return function(){var r=Object(Mt.a)(Za().mark((function r(n){var a,o,c;return Za().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Ye.onFetchTop5HistoryRequest()),r.prev=1,a=Kt.fetchCompetitionTopHistory.replace(":id",e),r.next=5,Vt.get(a,{params:{metric:t}});case 5:return o=r.sent,c=o.data,r.abrupt("return",n(Ye.onFetchTop5HistorySuccess({data:c,competitionId:e})));case 10:return r.prev=10,r.t0=r.catch(1),r.abrupt("return",n(Ye.onFetchTop5HistoryError(r.t0.message.toString())));case 13:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e){return r.apply(this,arguments)}}()},ao=function(e){return function(){var t=Object(Mt.a)(Za().mark((function t(r){var n,a,o;return Za().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Ye.onFetchGroupCompetitionsRequest()),t.prev=1,n=Kt.fetchGroupCompetitions.replace(":id",e),t.next=5,Vt.get(n);case 5:a=t.sent,o=a.data,r(Ye.onFetchGroupCompetitionsSuccess({data:o,groupId:e})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r(Ye.onFetchGroupCompetitionsError(t.t0.message.toString()));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},oo=function(e){return function(){var t=Object(Mt.a)(Za().mark((function t(r){var n,a,o;return Za().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Ye.onFetchPlayerCompetitionsRequest()),t.prev=1,n=Kt.fetchPlayerCompetitions.replace(":username",e),t.next=5,Vt.get(n);case 5:a=t.sent,o=a.data,r(Ye.onFetchPlayerCompetitionsSuccess({data:o,username:e})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r(Ye.onFetchPlayerCompetitionsError(t.t0.message.toString()));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},co=function(e,t){return function(){var r=Object(Mt.a)(Za().mark((function r(n){var a,o,c,i,l,s;return Za().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Ye.onUpdateAllRequest()),r.prev=1,a=Kt.updateAllParticipants.replace(":id",e),r.next=5,Vt.post(a,{verificationCode:t});case 5:return o=r.sent,c=o.data,r.abrupt("return",n(Ye.onUpdateAllSuccess({competitionId:e,data:c})));case 10:return r.prev=10,r.t0=r.catch(1),i=r.t0.response.data,l=i.message,s=i.data,r.abrupt("return",n(Ye.onUpdateAllError({error:l,data:s})));case 14:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e){return r.apply(this,arguments)}}()},io=function(e){return e.competitions},lo=function(e){return e.competitions.competitions},so=Object(V.a)(io,(function(e){return e.error})),uo=Object(V.a)(io,(function(e){return e.isFetchingList})),mo=Object(V.a)(io,(function(e){return e.isFetchingDetails})),fo=Object(V.a)(io,(function(e){return e.isCreating})),po=Object(V.a)(io,(function(e){return e.isEditing})),ho=Object(V.a)(lo,(function(e){return Object(ye.mapValues)(e,(function(e){return jo(e)}))})),vo=Object(V.a)((function(e){return e.competitions.playerCompetitions}),(function(e){return Object(ye.mapValues)(e,(function(e){return e.map((function(e){return jo(e)}))}))})),go=Object(V.a)((function(e){return e.competitions.groupCompetitions}),(function(e){return Object(ye.mapValues)(e,(function(e){return e.map((function(e){return jo(e)}))}))})),yo=Object(V.a)(lo,(function(e){return Object.values(e).map((function(e){return jo(e)})).sort((function(e,t){return t.score-e.score||t.createdAt-e.createdAt}))}));function bo(e){return function(t){return ho(t)[e]}}function Eo(e){return function(t){return function(e){return e.competitions.topHistory}(t)[e]}}function wo(e){return function(t){return vo(t)[e]}}function Oo(e){return function(t){return go(t)[e]}}function jo(e){if(!e)return null;var t=e.startsAt,r=e.endsAt,n=e.participations,a=e.metric,o=vt.SKILLS.filter((function(e){return"overall"!==e})).includes(a),c=n?n.map((function(e,t){return function(e,t,r){var n=Object(G.a)(Object(G.a)({},e),{},{rank:t+1});if(r){var a=Object(vt.getLevel)(e.progress.start),o=Object(vt.getLevel)(e.progress.end);n.levelsGained=o-a}return n}(e,t,o)})):[],i=n?function(e){if(!e||0===e.length)return[];var t=Object(ye.uniq)(e.map((function(e){return e.teamName}))),r=Object.fromEntries(t.map((function(e){return[e,{name:e,participants:[]}]})));return e.forEach((function(e){r[e.teamName].participants.push(e)})),Object.values(r).map((function(e){var t=e.participants.sort((function(e,t){return t.progress.gained-e.progress.gained})).map((function(e,t){return Object(G.a)(Object(G.a)({},e),{},{teamRank:t+1})})),r=e.participants.map((function(e){return e.progress.gained})).reduce((function(e,t){return e+t})),n=r/e.participants.length;return Object(G.a)(Object(G.a)({},e),{},{participants:t,totalGained:r,avgGained:n})})).sort((function(e,t){return t.totalGained-e.totalGained})).map((function(e,t){return Object(G.a)(Object(G.a)({},e),{},{rank:t+1})}))}(c):[],l=Object(G.a)(Object(G.a)({},e),{},{participations:c,teams:i}),s=new Date;return t>s?(l.status="upcoming",l.countdown="Starts in ".concat(ht(s,t,2))):r<s?(l.status="finished",l.countdown="Ended ".concat(ht(r,s,1)," ago")):t<s&&r>s&&(l.status="ongoing",l.countdown="Ends in ".concat(ht(s,r,2))),l}var xo=Object(_.createContext)({}),No={label:"Any metric",value:null},ko={label:"Any status",value:null},_o={label:"Any type",value:null};function So(){return[_o].concat(Object(T.a)(vt.COMPETITION_TYPES.map((function(e){return{label:xt(e),value:e}}))))}function Lo(){return[ko].concat(Object(T.a)(vt.COMPETITION_STATUSES.map((function(e){return{label:xt(e),value:e}}))))}function Co(){return[No].concat(Object(T.a)(vt.METRICS.map((function(e){return{label:vt.MetricProps[e].name,icon:jt(e,!0),value:e}}))))}var Po=function(e){var t=e.onSearchInputChanged,r=Object(_.useContext)(xo),n=r.context,a=r.updateContext,o=Object(_.useMemo)(Co,[]),c=Object(_.useMemo)(Lo,[]),i=Object(_.useMemo)(So,[]),l=o.findIndex((function(e){return e.value===n.metric})),s=c.findIndex((function(e){return e.value===n.status})),u=i.findIndex((function(e){return e.value===n.type}));return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-6"},S.a.createElement(Jr,{onChange:t,placeholder:"Search competition"})),S.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6"},S.a.createElement(Qr,{options:o,selectedIndex:l,onSelect:function(e){a({metric:e&&e.value||null})},search:!0})),S.a.createElement("div",{className:"col-lg-3 col-sm-6"},S.a.createElement(Qr,{options:c,selectedIndex:s,onSelect:function(e){a({status:e&&e.value||null})}})),S.a.createElement("div",{className:"col-lg-2 col-sm-6"},S.a.createElement(Qr,{options:i,selectedIndex:u,onSelect:function(e){a({type:e&&e.value||null})}})))},To={uniqueKey:function(e){return e.id},columns:[{key:"metric",width:30,transform:function(e){return S.a.createElement("img",{src:jt(e),alt:""})}},{key:"title",className:function(){return"-primary"},transform:function(e,t){return S.a.createElement(Ze.b,{to:"/competitions/".concat(t.id)},e)}},{key:"status",transform:function(e,t){return S.a.createElement("div",{className:"status-cell"},S.a.createElement(On,{status:Fo(e)}),S.a.createElement("span",null,t&&t.countdown))}},{key:"participantCount",transform:function(e){return"".concat(e," participants")},className:function(){return"-break-large"}},{key:"type",transform:function(e){return"team"===e&&S.a.createElement(at,{text:"Teams",hoverText:"Team competition: Players are divided into competing teams.",color:"#898989"})}}]};function Fo(e){switch(e){case"upcoming":return"NEUTRAL";case"ongoing":return"POSITIVE";case"finished":return"NEGATIVE";default:return null}}var Do=function(){var e=Object(P.c)(d.getCompetitions),t=Object(P.c)(d.isFetchingList);return S.a.createElement("div",{className:"col"},!t||e&&0!==e.length?S.a.createElement(Nr,{uniqueKeySelector:To.uniqueKey,columns:To.columns,rows:e,listStyle:!0}):S.a.createElement(Nn,{size:5}))};r(198);function Ao(e){var t=e.metric,r=e.status,n=e.type,a=new pa("/competitions");return t&&a.appendSearchParam("metric",t),r&&a.appendSearchParam("status",r),n&&a.appendSearchParam("type",n),a.getPath()}function Io(e,t){var r=t.type&&vt.COMPETITION_TYPES.includes(t.type),n=t.status&&vt.COMPETITION_STATUSES.includes(t.status),a=t.metric&&vt.METRICS.includes(t.metric);return{type:r?t.type:null,status:n?t.status:null,metric:a?t.metric:null}}var Go=function(){var e=Object(P.b)(),t=Object(_.useState)(""),r=Object($e.a)(t,2),n=r[0],a=r[1],o=Wn(Ao,Io),c=o.context,i=o.updateContext,l=c.metric,s=c.type,u=c.status,m=Kn({resultsPerPage:20,selector:d.getCompetitions,action:function(t,r,n){if(!n)return;e(p.fetchList(n,t,r))}}),f=m.isFullyLoaded,h=m.reloadData,v=Object(_.useCallback)(Object(ye.debounce)(h,500,{leading:!0,trailing:!0}),[]);return Object(_.useEffect)((function(){v({title:n,metric:l,type:s,status:u})}),[n,l,s,u,v]),S.a.createElement(xo.Provider,{value:{context:c,updateContext:i}},S.a.createElement("div",{className:"competitions__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"Competitions")),S.a.createElement("div",{className:"competitions__header row"},S.a.createElement("div",{className:"col"},S.a.createElement(pn,{title:"Competitions"})),S.a.createElement("div",{className:"col"},S.a.createElement(Dn,{text:"Create new",url:"/competitions/create"}))),S.a.createElement("div",{className:"competitions__options row"},S.a.createElement(Po,{onSearchInputChanged:function(e){return a(e.target.value)}})),S.a.createElement("div",{className:"competitions__list row"},S.a.createElement(Do,null)),S.a.createElement("div",{className:"row"},S.a.createElement("div",{className:"col"},!f&&S.a.createElement("b",{className:"loading-indicator"},"Loading...")))))};r(199);var Ro=function(e){var t=e.verificationCode,r=e.entity,n=e.onConfirm,a=Object(_.useState)(0),o=Object($e.a)(a,2),c=o[0],i=o[1];return Object(_.useEffect)((function(){c<10&&setTimeout((function(){return i(c+1)}),1e3)}),[c]),S.a.createElement("div",{className:"verification-modal"},S.a.createElement("div",{className:"verification-modal__modal"},S.a.createElement("span",{className:"code-label"},"Your ".concat(r,"'s verification code is:")),S.a.createElement("h1",{className:"code-value"},S.a.createElement(ut,null,t)),S.a.createElement("p",{className:"code-description"}," Please save this code somewhere, without it you won't              be able to edit or delete this ".concat(r," in the future.")),S.a.createElement(it,{text:c<10?"Please read the text above (".concat(10-c,")"):"Ok, I got it",onClick:n,disabled:c<10})))};r(200);var Mo=function(e){var t=e.title,r=e.message,n=e.onConfirm,a=Object(_.useState)(0),o=Object($e.a)(a,2),c=o[0],i=o[1];return Object(_.useEffect)((function(){c<5&&setTimeout((function(){return i(c+1)}),1e3)}),[c]),S.a.createElement("div",{className:"custom-confirmation-modal"},S.a.createElement("div",{className:"custom-confirmation-modal__modal"},S.a.createElement("h1",{className:"modal-title"},t),S.a.createElement("p",{className:"modal-description"},r),S.a.createElement(it,{text:c<5?"Please read the text above (".concat(5-c,")"):"Ok, I got it",onClick:n,disabled:c<5})))},qo=Object(_.createContext)({}),Yo=vt.METRICS.map((function(e){return{label:vt.MetricProps[e].name,icon:jt(e,!0),value:e}}));var Uo=function(){var e=Object(_.useContext)(qo),t=e.data,r=e.setData,n=t.title,a=t.metric,o=t.startDate,c=t.endDate,i=Yo.findIndex((function(e){return e.value===a})),l=Object(_.useCallback)((function(e){var t=Object($e.a)(e,2),n=t[0],a=t[1];r((function(e){return Object(G.a)(Object(G.a)({},e),{},{startDate:n,endDate:a})}))}),[]);return S.a.createElement("div",{className:"step1__container"},S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Title"),S.a.createElement(Jr,{placeholder:"Ex: Varrock Titan's firemaking comp",value:n,onChange:function(e){var t=e.target.value;r((function(e){return Object(G.a)(Object(G.a)({},e),{},{title:t})}))},maxCharacters:50})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Metric"),S.a.createElement(Qr,{options:Yo,selectedIndex:i,onSelect:function(e){var t=e&&e.value||null;r((function(e){return Object(G.a)(Object(G.a)({},e),{},{metric:t})}))},search:!0})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Time range"),S.a.createElement(Dt,{start:o,end:c,onRangeChanged:l})))};var Ho=function(){var e=Object(_.useContext)(qo),t=e.data,r=e.setData,n=t.group,a=t.groupCompetition,o=t.groupVerificationCode;return S.a.createElement("div",{className:"step2__container"},S.a.createElement("div",{className:"form-row"},S.a.createElement("b",{className:"info-title"},"Group competitions"),S.a.createElement("p",{className:"info-body"},"If you associate your group to this competition, all your group members will be automatically synced up with this competition\u2019s participants.",S.a.createElement("br",null),S.a.createElement("br",null),"You can also edit/delete the competition using the group\u2019s master verification code, which helps with management.")),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Is this a group competition?"),S.a.createElement("div",{className:"group-toggle"},S.a.createElement(jn,{on:a,onToggle:function(){r((function(e){return Object(G.a)(Object(G.a)({},e),{},{groupCompetition:!a})}))}}),S.a.createElement("span",{className:"group-toggle__label"},a?"Yes":"No"))),S.a.createElement("div",{className:"form-row"},a&&S.a.createElement(S.a.Fragment,null,S.a.createElement(Lr,{group:n,onGroupChanged:function(e){r((function(t){return Object(G.a)(Object(G.a)({},t),{},{group:e})}))}}),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Group Verification code",S.a.createElement("span",{className:"form-row__label-info -right"},"Lost your verification code?",S.a.createElement("a",{href:"https://wiseoldman.net/discord",target:"_blank",rel:"noopener noreferrer"},"Join our discord"))),S.a.createElement(Jr,{type:"password",value:o,placeholder:"Ex: 123-456-789",onChange:function(e){var t=e.target.value;r((function(e){return Object(G.a)(Object(G.a)({},e),{},{groupVerificationCode:t})}))},disabled:!n})))))},Ko=(r(201),[{label:"Separated by line",value:"\n"},{label:"Separated by comma",value:","},{label:"Separated by semicolon",value:";"}]);var Vo=function(e){var t=e.onConfirm,r=e.onClose,n=Object(_.useState)(""),a=Object($e.a)(n,2),o=a[0],c=a[1],i=Object(_.useState)(Ko[0].value),l=Object($e.a)(i,2),s=l[0],u=l[1],m=Object(_.useState)(!1),f=Object($e.a)(m,2),p=f[0],d=f[1],h=Ko.findIndex((function(e){return e.value===s})),v=Object(_.useCallback)((function(e){c(e.target.value)}),[]),g=Object(_.useCallback)((function(e){u(e.value)}),[]),y=Object(_.useCallback)((function(){d(!p)}),[p]),b=Object(_.useCallback)((function(){var e=o.split(s);t(e,p)}),[o,s,p]);return S.a.createElement("div",{className:"import-players"},S.a.createElement("div",{className:"import-players__modal"},S.a.createElement("h4",{className:"modal-title"},"Import username list"),S.a.createElement(Qr,{options:Ko,selectedIndex:h,onSelect:g}),S.a.createElement("textarea",{className:"modal-text",placeholder:"Insert your username list here",onChange:v}),S.a.createElement("div",{className:"modal-replace"},S.a.createElement("span",{className:"modal-replace__label"},"Replace existing usernames"),S.a.createElement(jn,{on:p,onToggle:y})),S.a.createElement("div",{className:"modal-actions"},S.a.createElement(Dn,{text:"Cancel",onClick:r}),S.a.createElement(it,{text:"Confirm",onClick:b}))))};r(202);function Bo(e){var t=e.team,r=e.onSubmit,n=e.onCancel,a=Object(_.useState)(t?t.name:""),o=Object($e.a)(a,2),c=o[0],i=o[1],l=Object(_.useState)(t?t.participants:[]),s=Object($e.a)(l,2),u=s[0],m=s[1],f=Object(_.useState)(!1),p=Object($e.a)(f,2),d=p[0],h=p[1];function v(e){var t=Object(ye.uniqBy)(e.filter((function(e){return e&&e.length>0})),(function(e){return yt(e)}));m((function(e){return Object(ye.uniqBy)([].concat(Object(T.a)(e),Object(T.a)(t)),(function(e){return yt(e)}))}))}return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"team-compose"},S.a.createElement("div",{className:"team-compose__modal"},S.a.createElement("button",{className:"close-btn",type:"button",onClick:n},S.a.createElement("img",{src:"/img/icons/clear.svg",alt:"X"})),S.a.createElement("b",{className:"modal-title"},t?"Editing team: ".concat(t.name):"Add a new team"),S.a.createElement("span",{className:"modal-label"},"Team Name"),S.a.createElement(Jr,{placeholder:"Ex: Warriors",value:c,onChange:function(e){i(e.target.value)},maxCharacters:30}),S.a.createElement("br",null),S.a.createElement("div",{className:"modal-group"},S.a.createElement("span",{className:"modal-label"},"Participants (".concat(u.length,")")),S.a.createElement(Dn,{text:"Import player list",onClick:function(){return h(!0)}})),S.a.createElement(hn,{participants:u,onParticipantAdded:function(e){e.length>0&&e.split(",").length>1?v(e.split(",")):m((function(t){return t.map(yt).includes(yt(e))?t:[].concat(Object(T.a)(t),[e])}))},onParticipantRemoved:function(e){m((function(t){return t.filter((function(t){return t!==e}))}))}}),S.a.createElement("br",null),S.a.createElement(it,{text:"Confirm",onClick:function(){r({name:c,participants:u})},disabled:0===c.length||0===u.length}))),d&&S.a.createElement(Vo,{onClose:function(){return h(!1)},onConfirm:function(e,t){t?m(Object(ye.uniqBy)(e.filter((function(e){return e&&e.length>0})),yt)):v(e),h(!1)}}))}Bo.defaultProps={team:void 0};var zo=Bo;function Wo(){var e=Object(P.b)(),t=Object(_.useState)(null),r=Object($e.a)(t,2),a=r[0],o=r[1],c=Object(_.useState)(!1),i=Object($e.a)(c,2),l=i[0],s=i[1],u=Object(_.useContext)(qo),m=u.data,f=u.setData,p=m.teams,d=!p||0===p.length;function h(e){o(e),s(!0)}function v(e){f((function(t){return Object(G.a)(Object(G.a)({},t),{},{teams:t.teams.filter((function(t){return t.name!==e.name}))})}))}return Object(_.useEffect)((function(){l||o(null)}),[l]),S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"form-row",style:{marginTop:30}},S.a.createElement("span",{className:"form-row__label"},"Teams",S.a.createElement(Dn,{text:"Add new team",onClick:function(){return s(!0)}})),d&&S.a.createElement("span",{className:"no-teams",style:{marginTop:20}},"No teams selected, please click the button above to add one."),S.a.createElement("div",{className:"team-selection__container"},p.map((function(e){return S.a.createElement(Tn,{key:e.name,team:e,onEditClicked:h,onDeleteClicked:v})})))),l&&S.a.createElement(zo,{team:a,onCancel:function(){return s(!1)},onSubmit:function(t){if(p.filter((function(e){return!a||e.name!==a.name})).map((function(e){return yt(e.name)})).includes(yt(t.name))){e(n.showNotification({type:"error",text:"Failed to add team: Repeated team name",duration:3e3}))}else f(a?function(e){return Object(G.a)(Object(G.a)({},e),{},{teams:p.map((function(e){return e.name===a.name?t:e}))})}:function(e){return Object(G.a)(Object(G.a)({},e),{},{teams:[].concat(Object(T.a)(e.teams),[t])})}),s(!1)}}))}function Xo(){var e=Object(_.useContext)(qo),t=e.data,r=e.setData,n=t.group,a=t.participants,o=Object(P.c)(d.getError),c=Object(_.useState)(!1),i=Object($e.a)(c,2),l=i[0],s=i[1];return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Participants",!n&&S.a.createElement(Dn,{text:"Import list",onClick:function(){return s(!0)}})),n?S.a.createElement("span",{className:"no-teams",style:{marginTop:20}},"All ".concat(n.name," members will be automatically added as participants.")):S.a.createElement(hn,{participants:a,invalidUsernames:o.data,onParticipantAdded:function(e){r((function(t){return t.participants.map(yt).includes(yt(e))?t:Object(G.a)(Object(G.a)({},t),{},{participants:[].concat(Object(T.a)(t.participants),[e])})}))},onParticipantRemoved:function(e){r((function(t){return Object(G.a)(Object(G.a)({},t),{},{participants:t.participants.filter((function(t){return t!==e}))})}))}})),l&&S.a.createElement(Vo,{onClose:function(){return s(!1)},onConfirm:function(e,t){r((function(r){if(t)return Object(G.a)(Object(G.a)({},r),{},{participants:Object(ye.uniq)(e.map(yt))});var n=e.filter((function(e){return!r.participants.map(yt).includes(yt(e))}));return Object(G.a)(Object(G.a)({},r),{},{participants:[].concat(Object(T.a)(r.participants),Object(T.a)(Object(ye.uniq)(n)))})})),s(!1)}}))}var Jo=function(){var e=Object(_.useContext)(qo),t=e.data,r=e.setData,n=t.type;return S.a.createElement("div",{className:"step3__container"},S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Competition type"),S.a.createElement("div",{className:"cards-container"},S.a.createElement(En,{title:"Classic competition",bodyText:"All participants compete against eachother.",iconUrl:"/img/icons/person.svg",selected:"classic"===n,onSelected:function(){r((function(e){return Object(G.a)(Object(G.a)({},e),{},{type:"classic"})}))}}),S.a.createElement(En,{title:"Team competition",bodyText:"Participants are divided into competing teams.",iconUrl:"/img/icons/group.svg",selected:"team"===n,onSelected:function(){r((function(e){return Object(G.a)(Object(G.a)({},e),{},{type:"team"})}))}}))),"classic"===n&&S.a.createElement(Xo,null),"team"===n&&S.a.createElement(Wo,null))};r(203);function Zo(){Zo=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function $o(e,t){var r=e.title,n=e.startDate,a=e.endDate,o=e.type,c=e.groupCompetition,i=e.group,l=e.groupVerificationCode,s=e.participants,u=e.teams;return 1===t?r.length>0&&n&&a:2===t?!c||i&&l.length>0:3!==t||(!("classic"!==o||!i)||(o&&"classic"===o?s.length>1:u.length>1))}var Qo=function(){var e=Object(Je.f)(),t=Object(P.b)(),r=zn().groupId,n=Object(_.useMemo)((function(){return oe()().startOf("day")}),[]),a=Object(_.useMemo)((function(){return n.clone().add(1,"days")}),[n]),c=Object(_.useMemo)((function(){return n.clone().add(8,"days")}),[n]),i=Object(P.c)(d.isCreating),l=Object(_.useState)(function(e,t){return{title:"",metric:"overall",startDate:e.toDate(),endDate:t.toDate(),type:null,group:null,groupCompetition:!1,groupVerificationCode:"",participants:[],teams:[]}}(a,c)),s=Object($e.a)(l,2),u=s[0],m=s[1],f=Object(_.useState)(null),h=Object($e.a)(f,2),v=h[0],g=h[1],y=Object(_.useState)(1),b=Object($e.a)(y,2),E=b[0],w=b[1],O=Object(_.useCallback)((function(){return j.apply(this,arguments)}),[]);function j(){return(j=Object(Mt.a)(Zo().mark((function e(){var n,a;return Zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t(o.fetchDetails(r));case 4:n=e.sent,(a=n.payload)&&a.data&&m((function(e){return Object(G.a)(Object(G.a)({},e),{},{groupCompetition:!0,group:a.data})}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(Mt.a)(Zo().mark((function e(){var r,n,a,o;return Zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.groupCompetition&&u.group,n="team"===u.type&&u.teams.length>0,e.next=4,t(p.create(u.title,u.metric,u.startDate,u.endDate,r?null:u.participants,r?u.groupVerificationCode:null,r?u.group.id:null,n?u.teams:null));case 4:a=e.sent,(o=a.payload)&&o.data&&g(o.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){e.push("/competitions/".concat(v.competition.id))}return Object(_.useEffect)((function(){O()}),[t,r,O]),S.a.createElement(qo.Provider,{value:{data:u,setData:m}},S.a.createElement("div",{className:"create-competition__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"Create new competition")),S.a.createElement("div",{className:"col"},S.a.createElement(pn,{title:"Create competition"}),S.a.createElement(Rt,{steps:3,currentIndex:E-1}),1===E&&S.a.createElement(Uo,null),2===E&&S.a.createElement(Ho,null),3===E&&S.a.createElement(Jo,null),S.a.createElement("div",{className:"form-row form-actions"},S.a.createElement(it,{text:"Previous",onClick:function(){w(E-1)},disabled:E<=1}),S.a.createElement(it,{text:"Next",onClick:function(){E<3?w(E+1):function(){x.apply(this,arguments)}()},loading:i,disabled:!$o(u,E)}))),v&&v.competition&&!v.competition.groupId&&S.a.createElement(Ro,{entity:"competition",verificationCode:v.verificationCode,onConfirm:N}),v&&v.competition&&v.competition.groupId&&S.a.createElement(Mo,{title:"Verification code",message:"To edit this competition in the future, please use your group verification code on submission.",onConfirm:N})))};r(204);var ec=function(e){var t=e.modalView,r=e.players,n=e.onConfirm,a=e.onClose;return Object(_.useEffect)((function(){return X.a.modalview(t)}),[t]),S.a.createElement("div",{className:"remove-players"},S.a.createElement("div",{className:"remove-players__modal"},S.a.createElement("button",{className:"close-btn",type:"button",onClick:a},S.a.createElement("img",{src:"/img/icons/clear.svg",alt:"X"})),S.a.createElement("b",{className:"modal-title"},"Are you sure you want to remove the following players?"),S.a.createElement("p",{className:"remove-players__list"},r.join(", ")),S.a.createElement(it,{text:"Remove players",onClick:n})))},tc=Object(_.createContext)({}),rc=vt.METRICS.map((function(e){return{label:vt.MetricProps[e].name,icon:jt(e,!0),value:e}}));var nc=function(){var e=Object(_.useContext)(tc),t=e.data,r=e.setData,n=t.title,a=t.metric,o=t.startDate,c=t.endDate,i=rc.findIndex((function(e){return e.value===a})),l=Object(_.useCallback)((function(e){var t=Object($e.a)(e,2),n=t[0],a=t[1];r((function(e){return Object(G.a)(Object(G.a)({},e),{},{startDate:n,endDate:a})}))}),[]);return S.a.createElement("div",{className:"step1__container"},S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Title"),S.a.createElement(Jr,{placeholder:"Ex: Varrock Titan's firemaking comp",value:n,onChange:function(e){var t=e.target.value;r((function(e){return Object(G.a)(Object(G.a)({},e),{},{title:t})}))},maxCharacters:50})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Metric"),S.a.createElement(Qr,{options:rc,selectedIndex:i,onSelect:function(e){var t=e&&e.value||null;r((function(e){return Object(G.a)(Object(G.a)({},e),{},{metric:t})}))},search:!0})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Time range"),S.a.createElement(Dt,{start:o,end:c,onRangeChanged:l})))};function ac(){var e=Object(P.b)(),t=Object(_.useState)(null),r=Object($e.a)(t,2),a=r[0],o=r[1],c=Object(_.useState)(!1),i=Object($e.a)(c,2),l=i[0],s=i[1],u=Object(_.useContext)(tc),m=u.data,f=u.setData,p=m.teams,d=!p||0===p.length;function h(e){o(e),s(!0)}function v(e){f((function(t){return Object(G.a)(Object(G.a)({},t),{},{teams:t.teams.filter((function(t){return t.name!==e.name}))})}))}return Object(_.useEffect)((function(){l||o(null)}),[l]),S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"form-row",style:{marginTop:30}},S.a.createElement("span",{className:"form-row__label"},"Teams",S.a.createElement(Dn,{text:"Add new team",onClick:function(){return s(!0)}})),d&&S.a.createElement("span",{className:"no-teams",style:{marginTop:20}},"No teams selected, please click the button above to add one."),S.a.createElement("div",{className:"team-selection__container"},p.map((function(e){return S.a.createElement(Tn,{key:e.name,team:e,onEditClicked:h,onDeleteClicked:v})})))),l&&S.a.createElement(zo,{team:a,onCancel:function(){return s(!1)},onSubmit:function(t){if(p.filter((function(e){return!a||e.name!==a.name})).map((function(e){return yt(e.name)})).includes(yt(t.name))){e(n.showNotification({type:"error",text:"Failed to add team: Repeated team name",duration:3e3}))}else f(a?function(e){return Object(G.a)(Object(G.a)({},e),{},{teams:p.map((function(e){return e.name===a.name?t:e}))})}:function(e){return Object(G.a)(Object(G.a)({},e),{},{teams:[].concat(Object(T.a)(e.teams),[t])})}),s(!1)}}))}function oc(){var e=Object(_.useContext)(tc),t=e.data,r=e.setData,n=t.participants,a=Object(P.c)(d.getError),o=Object(_.useState)(!1),c=Object($e.a)(o,2),i=c[0],l=c[1];return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Participants",S.a.createElement(Dn,{text:"Import list",onClick:function(){return l(!0)}})),S.a.createElement(hn,{participants:n,invalidUsernames:a.data,onParticipantAdded:function(e){r((function(t){return t.participants.map(yt).includes(yt(e))?t:Object(G.a)(Object(G.a)({},t),{},{participants:[].concat(Object(T.a)(t.participants),[e])})}))},onParticipantRemoved:function(e){r((function(t){return Object(G.a)(Object(G.a)({},t),{},{participants:t.participants.filter((function(t){return t!==e}))})}))}})),i&&S.a.createElement(Vo,{onClose:function(){return l(!1)},onConfirm:function(e,t){r((function(r){if(t)return Object(G.a)(Object(G.a)({},r),{},{participants:Object(ye.uniq)(e.map(yt))});var n=e.filter((function(e){return!r.participants.map(yt).includes(yt(e))}));return Object(G.a)(Object(G.a)({},r),{},{participants:[].concat(Object(T.a)(r.participants),Object(T.a)(Object(ye.uniq)(n)))})})),l(!1)}}))}var cc=function(){var e=Object(_.useContext)(tc),t=e.data,r=e.setData,n=t.type;return S.a.createElement("div",{className:"step2__container"},S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Competition type"),S.a.createElement("div",{className:"cards-container"},S.a.createElement(En,{title:"Classic competition",bodyText:"All participants compete against eachother.",iconUrl:"/img/icons/person.svg",selected:"classic"===n,disabled:"classic"!==n,onSelected:function(){r((function(e){return Object(G.a)(Object(G.a)({},e),{},{type:"classic"})}))}}),S.a.createElement(En,{title:"Team competition",bodyText:"Participants are divided into competing teams.",iconUrl:"/img/icons/group.svg",selected:"team"===n,disabled:"team"!==n,onSelected:function(){r((function(e){return Object(G.a)(Object(G.a)({},e),{},{type:"team"})}))}}))),"classic"===n&&S.a.createElement(oc,null),"team"===n&&S.a.createElement(ac,null))};var ic=function(){var e=Object(_.useContext)(tc),t=e.data,r=e.setData,n=t.groupCompetition,a=t.verificationCode;return S.a.createElement("div",{className:"step3__container"},S.a.createElement("div",{className:"form-row"},S.a.createElement("p",{className:"info-body"},n?"One last step! Please insert your group's verification code.":"One last step! Please insert the verification code you were given when this competition was created.")),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},n?"Group verification code":"Verification code",S.a.createElement("span",{className:"form-row__label-info -right"},"Lost your verification code?",S.a.createElement("a",{href:"https://wiseoldman.net/discord",target:"_blank",rel:"noopener noreferrer"},"Join our discord"))),S.a.createElement(Jr,{type:"password",value:a,placeholder:"Ex: 123-456-789",onChange:function(e){var t=e.target.value;r((function(e){return Object(G.a)(Object(G.a)({},e),{},{verificationCode:t})}))}})))};r(205);function lc(){lc=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function sc(e,t){var r=e.title,n=e.startDate,a=e.endDate,o=e.type,c=e.verificationCode,i=e.participants,l=e.teams;return 1===t?r.length>0&&n&&a:2===t?o&&"classic"===o?i.length>1:l.length>1:3!==t||c.length>0}var uc=function(){var e=Object(Je.f)(),t=Object(Je.h)(),r=Object(P.b)(),n=parseInt(t.id,10),a=Object(_.useMemo)((function(){return oe()().startOf("day")}),[]),o=Object(_.useMemo)((function(){return a.clone().add(1,"days")}),[a]),c=Object(_.useMemo)((function(){return a.clone().add(8,"days")}),[a]),i=Object(P.c)(d.getCompetition(n)),l=Object(P.c)(d.isEditing),s=Object(_.useState)(function(e,t){return{title:"",metric:"overall",startDate:e.toDate(),endDate:t.toDate(),type:null,groupCompetition:!1,verificationCode:"",participants:[],teams:[]}}(o,c)),u=Object($e.a)(s,2),m=u[0],f=u[1],h=Object(_.useState)([]),v=Object($e.a)(h,2),g=v[0],y=v[1],b=Object(_.useState)(1),E=Object($e.a)(b,2),w=E[0],O=E[1];function j(){return x.apply(this,arguments)}function x(){return(x=Object(Mt.a)(lc().mark((function t(){var n,a,o,c,l=arguments;return lc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=l.length>0&&void 0!==l[0]&&l[0],a=i.participations.map((function(e){return e.player.displayName})).filter((function(e){return!m.participants.find((function(t){return yt(e)===yt(t)}))})),!(!n&&"classic"===i.type&&a&&a.length>0)){t.next=5;break}return y(a),t.abrupt("return");case 5:return y([]),t.next=8,r(p.edit(i.id,m.title,m.metric,m.startDate,m.endDate,m.participants,m.teams,m.verificationCode));case 8:o=t.sent,(c=o.payload)&&!c.error&&e.push("/competitions/".concat(i.id));case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(_.useEffect)((function(){r(p.fetchDetails(n))}),[r,n]),Object(_.useEffect)((function(){if(i){var e=i.title,t=i.metric,r=i.type,n=i.startsAt,a=i.endsAt,o=i.groupId,c=i.participations,l=i.teams,s=function(e){return e.player.displayName},u=function(e){return Object(G.a)(Object(G.a)({},e),{},{participants:e.participants.map(s)})};f((function(i){return Object(G.a)(Object(G.a)({},i),{},{title:e,metric:t,startDate:n,endDate:a,groupCompetition:!!o,type:r,participants:"classic"===r?c.map(s):[],teams:"team"===r?l.map(u):[]})}))}}),[i]),i?S.a.createElement(tc.Provider,{value:{data:m,setData:f}},S.a.createElement("div",{className:"edit-competition__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"Edit competition")),S.a.createElement("div",{className:"col"},S.a.createElement(pn,{title:"Edit competition: ".concat(i.title)}),S.a.createElement(Rt,{steps:3,currentIndex:w-1}),1===w&&S.a.createElement(nc,null),2===w&&S.a.createElement(cc,null),3===w&&S.a.createElement(ic,null),S.a.createElement("div",{className:"form-row form-actions"},S.a.createElement(it,{text:"Previous",onClick:function(){O(w-1)},disabled:w<=1}),S.a.createElement(it,{text:"Next",onClick:function(){w<3?O(w+1):j()},loading:l,disabled:!sc(m,w)}))),g&&g.length>0&&S.a.createElement(ec,{modalView:"/competitions/".concat(i.id,"/removeParticipants"),players:g,onClose:function(){return y([])},onConfirm:function(){return j(!0)}}))):S.a.createElement(Ar,null)};r(206);function mc(){mc=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var fc=function(e){var t=e.competition,r=e.onCancel,n=Object(Je.f)(),a=Object(P.b)(),o=Object(_.useState)(""),c=Object($e.a)(o,2),i=c[0],l=c[1],s=function(){var e=Object(Mt.a)(mc().mark((function e(){var r,o;return mc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(p.remove(t.id,i));case 2:r=e.sent,(o=r.payload)&&o.competitionId&&n.push("/competitions");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=Object(_.useCallback)((function(e){l(e.target.value)}),[]),m=Object(_.useCallback)(s,[t,i]);return Object(_.useEffect)((function(){return X.a.modalview("/competitions/".concat(t.id,"/delete"))}),[t]),S.a.createElement("div",{className:"delete-competition"},S.a.createElement("div",{className:"delete-competition__modal"},S.a.createElement("button",{className:"close-btn",type:"button",onClick:r},S.a.createElement("img",{src:"/img/icons/clear.svg",alt:"X"})),S.a.createElement("b",{className:"modal-title"},"Are you sure you want to delete this competition?"),S.a.createElement("span",{className:"modal-warning"},"This action is permanent and cannot be reversed"),S.a.createElement("input",{className:"verification-input",value:i,type:"text",placeholder:"Verification code",onChange:u,autoComplete:"off"}),S.a.createElement("div",{className:"lost-code"},"Lost your".concat(t.groupId?" group":""," verification code?"),S.a.createElement("a",{href:"https://wiseoldman.net/discord",target:"_blank",rel:"noopener noreferrer"},"Join our discord for help")),S.a.createElement(it,{text:"Delete",onClick:m})))};r(207);var pc=function(e){var t=e.entityName,r=e.onCancel,n=e.onSubmit,a=Object(_.useState)(""),o=Object($e.a)(a,2),c=o[0],i=o[1],l=c.length<11;return S.a.createElement("div",{className:"update-all"},S.a.createElement("div",{className:"update-all__modal"},S.a.createElement("button",{className:"close-btn",type:"button",onClick:r},S.a.createElement("img",{src:"/img/icons/clear.svg",alt:"X"})),S.a.createElement("span",{className:"modal-note"},"This action requires this ".concat(t,"'s verification code.")),S.a.createElement("input",{className:"verification-input",value:c,type:"password",placeholder:"Verification code",onChange:function(e){i(e.target.value)},autoComplete:"off"}),S.a.createElement("div",{className:"lost-code"},"Lost your verification code?",S.a.createElement("a",{href:"https://wiseoldman.net/discord",target:"_blank",rel:"noopener noreferrer"},"Join our discord for help")),S.a.createElement(it,{text:"Update All",onClick:function(){n(c)},disabled:l}),S.a.createElement("span",{className:"modal-warning"},"We've recently updated the cooldowns for the 'Update All' feature. \xa0",S.a.createElement("a",{href:"https://wiseoldman.net/discord"},"Read all about it in our discord's #announcements channel."))))},dc=(r(208),vt.METRICS.map((function(e){return{label:vt.MetricProps[e].name,icon:jt(e,!0),value:e}})));var hc=function(e){var t=e.defaultMetric,r=e.onCancel,n=e.onSubmit,a=Object(_.useState)(t),o=Object($e.a)(a,2),c=o[0],i=o[1];return S.a.createElement("div",{className:"select-metric"},S.a.createElement("div",{className:"select-metric__modal"},S.a.createElement("button",{className:"close-btn",type:"button",onClick:r},S.a.createElement("img",{src:"/img/icons/clear.svg",alt:"X"})),S.a.createElement("b",{className:"modal-title"},"Preview Other Metric"),S.a.createElement("span",{className:"modal-warning"},"Select another metric to preview everyone's gains without the need to edit this competition, or create new concurrent competitions."),S.a.createElement(Qr,{options:dc,selectedIndex:vt.METRICS.indexOf(c),onSelect:function(e){return i(e.value)},search:!0}),S.a.createElement(it,{text:"Preview",onClick:function(){return n(c)},disabled:c===t})))};r(209);var vc=function(e){var t=e.exportConfig,r=e.onCancel,n=Object(_.useState)(!1),a=Object($e.a)(n,2),o=a[0],c=a[1],i=function(e){var t=e.competitionId,r=e.type,n=e.teamName,a=e.metric,o=new pa("".concat(Ut,"/competitions/").concat(t,"/csv"));o.appendSearchParam("table",r),n&&o.appendSearchParam("teamName",encodeURIComponent(n));a&&o.appendSearchParam("metric",a);return'=IMPORTDATA("'.concat(o.getPath(),'")')}(t);return S.a.createElement("div",{className:"export-table"},S.a.createElement("div",{className:"export-table__modal"},S.a.createElement("button",{className:"close-btn",type:"button",onClick:r},S.a.createElement("img",{src:"/img/icons/clear.svg",alt:"X"})),S.a.createElement("b",{className:"modal-title"},"Exporting Competition Table"),S.a.createElement("span",{className:"modal-warning"},"You can import this competition's data into a Google Sheets document by using the following function:"),S.a.createElement("div",{className:"code-copy-container"},S.a.createElement("pre",null,i),S.a.createElement(it,{text:o?"\u2714 Copied!":"Copy",className:o?"-copied":"",onClick:function(){navigator.clipboard.writeText(i),c(!0)}}))))};function gc(e){var t=e.username,r=e.isUpdating,n=e.onUpdate,a=et()({"update-btn":!0,"-loading":r}),o=Object(_.useCallback)((function(){return n(t)}),[t,n]);return S.a.createElement("button",{className:a,type:"button",onClick:o},S.a.createElement("img",{src:"/img/icons/sync.svg",alt:""}))}function yc(e,t,r){var n=e.displayName,a="skilling";(Object(vt.isBoss)(r)||"ehb"===r)&&(a="bossing"),Object(vt.isActivity)(r)&&(a="activities");var o=new pa("/players");return o.appendToPath("/".concat(n.replace(" ","_"))),o.appendToPath("/gained"),o.appendToPath("/".concat(a)),o.appendSearchParam("metric",r),o.appendSearchParam("period","custom"),o.appendSearchParam("startDate",t.startsAt.toISOString()),o.appendSearchParam("endDate",t.endsAt.toISOString()),o.getPath()}var bc=function(e){var t=e.competition,r=e.metric,n=e.onUpdateClicked,a=e.onExportParticipantsClicked,o=Object(P.c)(d.isFetchingDetails),c=Object(P.c)(l.getUpdatingUsernames);if(o)return S.a.createElement(Nn,{size:10});var i={uniqueKeySelector:function(e){return e.player.username},columns:[{key:"rank",width:70},{key:"displayName",label:"Name",className:function(){return"-primary"},get:function(e){return e.player.displayName},transform:function(e,n){return S.a.createElement(Ze.b,{to:yc(n.player,t,r)},S.a.createElement(gn,Object.assign({name:e},n.player)))}},{key:"start",get:function(e){return e.progress?e.progress.start:0},transform:function(e,n){var a=n.player.updatedAt,o=vt.MetricProps[r],c=o.minimumValue,i=o.name;return t.startsAt>=Date.now()?S.a.createElement("abbr",{title:"This competition hasn't started yet."},S.a.createElement("span",null,"--")):!a||a<t.startsAt?S.a.createElement("abbr",{title:"This player hasn't been updated since the competition started."},S.a.createElement("span",null,"--")):Object(vt.isBoss)(r)&&e<c?S.a.createElement("abbr",{title:"The Hiscores only start tracking ".concat(i," kills after ").concat(c," kc.")},S.a.createElement("span",null,"< ".concat(c))):-1===e?S.a.createElement("abbr",{title:"This player is currently unranked in ".concat(i,".")},S.a.createElement("span",null,"--")):S.a.createElement(un,{value:e})}},{key:"end",get:function(e){return e.progress?e.progress.end:0},transform:function(e,n){var a=n.player.updatedAt,o=vt.MetricProps[r],c=o.minimumValue,i=o.name;return t.startsAt>=Date.now()?S.a.createElement("abbr",{title:"This competition hasn't started yet."},S.a.createElement("span",null,"--")):!a||a<t.startsAt?S.a.createElement("abbr",{title:"This player hasn't been updated since the competition started."},S.a.createElement("span",null,"--")):Object(vt.isBoss)(r)&&e<c?S.a.createElement("abbr",{title:"The Hiscores only start tracking ".concat(i," kills after ").concat(c," kc.")},S.a.createElement("span",null,"< ".concat(c))):-1===e?S.a.createElement("abbr",{title:"This player is currently unranked in ".concat(i,".")},S.a.createElement("span",null,"--")):S.a.createElement(un,{value:e})}},{key:"gained",get:function(e){return e.progress?e.progress.gained:0},transform:function(e){var t=Object(vt.isSkill)(r)?1e4:5;return S.a.createElement(un,{value:e,lowThreshold:t,isColored:!0,isSigned:!0})}},{key:"updatedAt",label:"Last updated",get:function(e){return e.player.updatedAt},className:function(e){return t.startsAt<Date.now()&&(!e||e<t.startsAt)?"-negative":""},transform:function(e,t){return"".concat(ht(t.player.updatedAt,new Date,1,!0)," ago")}},{key:"update",label:"",isSortable:!1,transform:function(e,r){return"finished"!==t.status&&S.a.createElement(gc,{username:r.player.username,isUpdating:c.includes(r.player.username),onUpdate:n})}}]};return"team"===t.type&&i.columns.splice(2,0,{key:"teamName",label:"Team"}),vt.SKILLS.filter((function(e){return"overall"!==e})).includes(r)&&i.columns.splice(i.columns.length-2,0,{key:"levels",get:function(e){return e.levelsGained?e.levelsGained:0},className:function(){return"-break-medium"},transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0})}}),S.a.createElement(Nr,{rows:t.participations,columns:i.columns,uniqueKeySelector:i.uniqueKeySelector,onExportClicked:a,showToolbar:!0})},Ec=r(243),wc=r(242);r(210);function Oc(e){var t=e.participations,r=e.metric;if(!t||!t.length)return S.a.createElement("div",{className:"top-participant-widget"},S.a.createElement("b",{className:"top__name -placeholder"}),S.a.createElement("span",{className:"top__gained -placeholder"}));var n=t[0],a=n&&n.progress?n.progress.gained:0,o="".concat(0===a?"":"+").concat(Nt(a)," ").concat(function(e){return Object(vt.isSkill)(e)?"exp gained":Object(vt.isBoss)(e)?"kills":Object(vt.isActivity)(e)?"gained":e.toUpperCase()}(r));return S.a.createElement(Ze.b,{className:"top-participant-widget -clickable",to:"/players/".concat(n.player.username)},S.a.createElement("b",{className:"top__name"},n.player.displayName),S.a.createElement("span",{className:et()("top__gained",{"-green":a>0})},o))}Oc.defaultProps={participations:[]};var jc=Oc;var xc=S.a.memo((function(e){var t=e.competition,r=Object(_.useMemo)((function(){return function(e){var t=e.id,r=e.metric,n=e.status,a=e.participations,o=e.startsAt,c=e.endsAt,i=e.group,l=et()({"-positive":"ongoing"===n,"-neutral":"upcoming"===n,"-negative":"finished"===n});return[{key:"Id",value:t},{key:xt(vt.MetricProps[r].type),value:vt.MetricProps[r].name},{key:"Status",value:xt(n),className:l},{key:"Group",value:i?S.a.createElement(Ze.b,{to:"/groups/".concat(i.id)},i.name):"---"},{key:"Participants",value:a?a.length:"Unknown"},{key:"Duration",value:ht(o,c,3)},{key:"upcoming"===n?"Starts at (local time)":"Started at (local time)",value:ft(o,"DD MMM YYYY, HH:mm")},{key:"finished"===n?"Ended at (local time)":"Ends at (local time)",value:ft(c,"DD MMM YYYY, HH:mm")},{key:"upcoming"===n?"Starts at (UTC)":"Started at (UTC)",value:pt(o,"DD MMM YYYY, HH:mm")},{key:"finished"===n?"Ended at (UTC)":"Ends at (UTC)",value:pt(c,"DD MMM YYYY, HH:mm")}]}(t)}),[t]);return S.a.createElement(Cr,{data:r})}));r(211);function Nc(e){var t=e.metric,r=e.totalGained,n=vt.MetricProps[t].name,a=jt(t),o={backgroundImage:'url("/img/runescape/backgrounds/'.concat(t,'.png")'),backgroundSize:"cover"};return void 0===r?S.a.createElement("div",{className:"total-gained-widget",style:o},S.a.createElement("img",{className:"total-icon",src:a,alt:""}),S.a.createElement("div",{className:"total-info"},S.a.createElement("span",{className:"total-info__metric -placeholder"}),S.a.createElement("b",{className:"total-info__gained -placeholder"}))):S.a.createElement("div",{className:"total-gained-widget",style:o},S.a.createElement("img",{className:"total-icon",src:a,alt:""}),S.a.createElement("div",{className:"total-info"},S.a.createElement("span",{className:"total-info__metric"},n),S.a.createElement("b",{className:"total-info__gained"},Nt(r))))}Nc.defaultProps={totalGained:void 0};var kc=Nc;function _c(e){var t=e.competition,r=e.metric,n=e.updatingUsernames,a=e.team,o=e.onUpdateClicked,c=e.onExportClicked,i={uniqueKeySelector:function(e){return e.username},columns:[{key:"teamRank",label:"Rank",width:70},{key:"displayName",label:"Name",className:function(){return"-primary"},get:function(e){return e.player.displayName},transform:function(e,n){return S.a.createElement(Ze.b,{to:Lc(n.player,t,r)},S.a.createElement(gn,Object.assign({name:e},n.player)))}},{key:"start",get:function(e){return e.progress?e.progress.start:0},transform:function(e,n){var a=n.updatedAt,o=vt.MetricProps[r];return t.startsAt>=Date.now()?S.a.createElement("abbr",{title:"This competition hasn't started yet."},S.a.createElement("span",null,"--")):!a||a<t.startsAt?S.a.createElement("abbr",{title:"This player hasn't been updated since the competition started."},S.a.createElement("span",null,"--")):Object(vt.isBoss)(r)&&e<o.minimumValue?S.a.createElement("abbr",{title:"The Hiscores only start tracking ".concat(o.name," kills after ").concat(o.minimumValue," kc.")},S.a.createElement("span",null,"< ".concat(o.minimumValue))):-1===e?S.a.createElement("abbr",{title:"This player is currently unranked in ".concat(o.name,".")},S.a.createElement("span",null,"--")):S.a.createElement(un,{value:e})}},{key:"end",get:function(e){return e.progress?e.progress.end:0},transform:function(e,n){var a=n.updatedAt,o=vt.MetricProps[r];return t.startsAt>=Date.now()?S.a.createElement("abbr",{title:"This competition hasn't started yet."},S.a.createElement("span",null,"--")):!a||a<t.startsAt?S.a.createElement("abbr",{title:"This player hasn't been updated since the competition started."},S.a.createElement("span",null,"--")):Object(vt.isBoss)(r)&&e<o.minimumValue?S.a.createElement("abbr",{title:"The Hiscores only start tracking ".concat(o.name," kills after ").concat(o.minimumValue," kc.")},S.a.createElement("span",null,"< ".concat(o.minimumValue))):-1===e?S.a.createElement("abbr",{title:"This player is currently unranked in ".concat(o.name,".")},S.a.createElement("span",null,"--")):S.a.createElement(un,{value:e})}},{key:"gained",get:function(e){return e.progress?e.progress.gained:0},transform:function(e){var t=Object(vt.isSkill)(r)?1e4:5;return S.a.createElement(un,{value:e,lowThreshold:t,isColored:!0,isSigned:!0})}},{key:"updatedAt",label:"Last updated",get:function(e){return e.player.updatedAt},className:function(e){return t.startsAt<Date.now()&&(!e||e<t.startsAt)?"-negative":""},transform:function(e){return"".concat(ht(e,new Date,1,!0)," ago")}},{key:"update",label:"",isSortable:!1,width:50,transform:function(e,r){return"finished"!==t.status&&S.a.createElement(Sc,{username:r.player.username,isUpdating:n.includes(r.player.username),onUpdate:o})}}]};return vt.SKILLS.filter((function(e){return"overall"!==e})).includes(r)&&i.columns.splice(i.columns.length-2,0,{key:"levels",get:function(e){return e.levelsGained?e.levelsGained:0},transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0})}}),S.a.createElement(Nr,{rows:a.participants,columns:i.columns,uniqueKeySelector:i.uniqueKeySelector,showToolbar:!0,onExportClicked:c})}function Sc(e){var t=e.username,r=e.isUpdating,n=e.onUpdate,a=et()({"update-btn":!0,"-loading":r}),o=Object(_.useCallback)((function(){return n(t)}),[t,n]);return S.a.createElement("button",{className:a,type:"button",onClick:o},S.a.createElement("img",{src:"/img/icons/sync.svg",alt:""}))}function Lc(e,t,r){var n=e.displayName,a="skilling";(Object(vt.isBoss)(r)||"ehb"===r)&&(a="bossing"),Object(vt.isActivity)(r)&&(a="activities");var o=new pa("/players");return o.appendToPath("/".concat(n.replace(" ","_"))),o.appendToPath("/gained"),o.appendToPath("/".concat(a)),o.appendSearchParam("metric",r),o.appendSearchParam("period","custom"),o.appendSearchParam("startDate",t.startsAt.toISOString()),o.appendSearchParam("endDate",t.endsAt.toISOString()),o.getPath()}_c.defaultProps={updatingUsernames:[]};var Cc=_c;r(212);var Pc=function(e){var t=e.trueMetric,r=e.previewMetric;return S.a.createElement("div",{className:"metric-preview-warning"},S.a.createElement("span",null,"Previewing gains for"),S.a.createElement("b",null,vt.MetricProps[r].name),S.a.createElement("span",null,". This competition's true metric is"),S.a.createElement("b",null,"".concat(vt.MetricProps[t].name,".")))};var Tc=function(e){var t=e.competition,r=e.metric,n=e.onUpdateClicked,a=e.onExportTeamsClicked,o=e.onExportTeamClicked,c=Object(P.c)(d.isFetchingDetails),i=Object(P.c)(l.getUpdatingUsernames),s=Object(_.useState)(null),u=Object($e.a)(s,2),m=u[0],f=u[1];if(c)return S.a.createElement(Nn,{size:5});var p={uniqueKeySelector:function(e){return e.name},columns:[{key:"rank",width:70},{key:"name"},{key:"playersCount",label:"Players",get:function(e){return e.participants.length}},{key:"totalGained",label:"Total Gained",transform:function(e){var t=Object(vt.isSkill)(r)?3e4:10;return S.a.createElement(un,{value:e,lowThreshold:t,isColored:!0,isSigned:!0})}},{key:"avgGained",label:"Avg. Gained",transform:function(e){var t=Object(vt.isSkill)(r)?1e4:5;return S.a.createElement(un,{value:Math.floor(e),lowThreshold:t,isColored:!0,isSigned:!0})}},{key:"MVP",get:function(e){var t=e.participants;return t&&0!==t.length?0===t[0].progress.gained?"None":t[0].player.displayName:"None"}},{key:"toggleDetails",label:"",width:30,isSortable:!1,transform:function(e,t){return S.a.createElement("button",{type:"button",onClick:function(){return e=t.name,void f(m===e?null:e);var e},className:"table-toggle-btn",style:{transform:"rotate(".concat(m===t.name?-90:90,"deg)")}},S.a.createElement("img",{src:"/img/icons/arrow_right.svg",alt:">"}))}}]};return S.a.createElement(Nr,{rows:t.teams,columns:p.columns,uniqueKeySelector:p.uniqueKeySelector,highlightedRowKey:m,renderRowDetails:function(e){return S.a.createElement(Ec.a,{initial:!1},m===e.name&&S.a.createElement(wc.a.section,{key:"content",initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.3,ease:[.04,.62,.23,.98]}},S.a.createElement("div",{style:{marginTop:5,marginBottom:20}},S.a.createElement(Cc,{competition:t,metric:r,team:e,updatingUsernames:i,onUpdateClicked:n,onExportClicked:function(){return o(e.name)}}))))},listStyle:!0,listStyleHeaders:!0,showToolbar:!0,onExportClicked:a})};function Fc(e){var t=e.competition,r=e.metric,n=t.status,a=t.startsAt,o=t.endsAt,c="upcoming"===n?a:o,i="upcoming"===n?"Starting in":"Time Remaining",l=t.participations?t.participations.map((function(e){return e.progress.gained})).reduce((function(e,t){return e+t}),0):0;return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"col-md-4"},S.a.createElement("span",{className:"widget-label"},i),S.a.createElement(Pt,{targetDate:c})),S.a.createElement("div",{className:"col-md-4 col-sm-6"},S.a.createElement("span",{className:"widget-label"},"Top Player"),S.a.createElement(jc,{metric:r,participations:t.participations})),S.a.createElement("div",{className:"col-md-4 col-sm-6"},S.a.createElement("span",{className:"widget-label"},"Total Gained"),S.a.createElement(kc,{metric:r,totalGained:l})))}Fc.defaultProps={competition:void 0};var Dc=Fc,Ac=Object(_.createContext)({});function Ic(e){var t=e.competition,r=e.handleUpdateAll,n=e.handleEditRedirect,a=e.handleSelectMetric,o=Object(_.useContext)(Ac).updateContext,c=Object(_.useMemo)((function(){return function(e){if(!e)return[];var t=[{label:"Preview Other Metric",value:"PREVIEW_OTHER_METRIC"},{label:"Delete Competition",value:"DELETE_COMPETITION"}];"finished"!==e.status&&t.splice(1,0,{label:"Edit Competition",value:"EDIT_COMPETITION"});return t}(t)}),[t]),i=function(e){"DELETE_COMPETITION"===e.value?o({section:"delete"}):"EDIT_COMPETITION"===e.value?n():"PREVIEW_OTHER_METRIC"===e.value&&a()};return t?S.a.createElement(fn,{title:t.title,renderRight:function(){return S.a.createElement(S.a.Fragment,null,"finished"!==t.status&&S.a.createElement(it,{text:"Update all",onClick:r}),S.a.createElement(Gt,{options:c,onSelect:i},S.a.createElement("button",{className:"header__options-btn",type:"button"},S.a.createElement("img",{src:"/img/icons/options.svg",alt:""}))))}}):null}Ic.defaultProps={competition:void 0};var Gc=Ic;r(213);var Rc=function(e,t,r,n){n(p.fetchDetails(e,t)).then((function(r){if(!r.payload.data)throw new Error;n(p.fetchCompetitionTop5History(e,t))})).catch((function(){return r.push("/404")}))};function Mc(e){var t=e.id,r=e.section,n=e.metric,a=new pa("/competitions/".concat(t,"/").concat(r));return n&&vt.METRICS.includes(n)&&a.appendSearchParam("metric",n),a.getPath()}function qc(e,t){var r={id:parseInt(e.id,10),section:e.section};return e.section||(r.section="teams"),t.metric&&vt.METRICS.includes(t.metric)&&(r.metric=t.metric),r}var Yc=function(){var e=Object(P.b)(),t=Object(Je.f)(),r=Wn(Mc,qc),n=r.context,a=r.updateContext,o=n.id,c=n.section,l=n.metric,s=Object(_.useState)(!1),u=Object($e.a)(s,2),m=u[0],f=u[1],h=Object(_.useState)(null),v=Object($e.a)(h,2),g=v[0],y=v[1],b=Object(_.useState)(!1),E=Object($e.a)(b,2),w=E[0],O=E[1],j=Object(P.c)(d.getCompetition(o)),x=Object(P.c)(d.getCompetitionTopHistory(o)),N=j?j.type:"classic",k=function(e){var t=["Participants Table","Top 5 progress chart"];return"team"===e&&t.unshift("Team standings"),t}(N),L=function(e,t){if(!e||0===e.length)return[];var r=[];return e.forEach((function(e,n){var a=Object(T.a)(e.history).reverse().sort().map((function(e){return{x:e.date,y:Object(vt.isBoss)(t)?Math.max(e.value,vt.MetricProps[t].minimumValue-1):e.value}})),o=a.map((function(e){return{x:e.x,y:e.y-a[0].y}})),c=[].concat(Object(T.a)(Object(ye.uniqBy)(o,"y")),[o[o.length-1]]);r.push({borderColor:St[n],pointBorderWidth:1,label:e.player.displayName,data:c,fill:!1})})),r}(x,l),C=function(e,t){if("classic"===e)return"chart"===t?1:0;switch(t){case"participants":return 1;case"chart":return 2;default:return 0}}(N,c),F="delete"===c&&!!j,D=function(t){e(i.trackPlayer(t))},A=function(e,t){y({type:e,teamName:t,metric:l,competitionId:o})};return Object(_.useEffect)((function(){return Rc(o,l,t,e)}),[t,l,e,o]),Object(_.useEffect)((function(){j&&"classic"===j.type&&"teams"===c&&t.replace(Mc({id:o,section:"participants"}))}),[c,o,t,j]),j?S.a.createElement(Ac.Provider,{value:{context:n,updateContext:a}},S.a.createElement(Rn.a,null,S.a.createElement("title",null,j.title)),S.a.createElement("div",{className:"competition__container container"},S.a.createElement("div",{className:"competition__header row"},S.a.createElement("div",{className:"col"},S.a.createElement(Gc,{competition:j,handleEditRedirect:function(){t.push("/competitions/".concat(o,"/edit"))},handleUpdateAll:function(){return f(!0)},handleSelectMetric:function(){return O(!0)}}))),l&&S.a.createElement(Pc,{trueMetric:j.metric,previewMetric:l}),S.a.createElement("div",{className:"competition__widgets row"},S.a.createElement(Dc,{competition:j,metric:l||j.metric})),S.a.createElement("div",{className:"competition__content row"},S.a.createElement("div",{className:"col-md-3"},S.a.createElement(xc,{competition:j})),S.a.createElement("div",{className:"col-md-9"},S.a.createElement(Pn,{tabs:k,selectedIndex:C,onTabSelected:function(e){a("classic"===N?{section:0===e?"participants":"chart"}:0===e?{section:"teams"}:1===e?{section:"participants"}:{section:"chart"})}}),"teams"===c&&S.a.createElement(Tc,{competition:j,metric:l||j.metric,onUpdateClicked:D,onExportTeamsClicked:function(){return A("teams")},onExportTeamClicked:function(e){return A("team",e)}}),"participants"===c&&S.a.createElement(bc,{competition:j,metric:l||j.metric,onUpdateClicked:D,onExportParticipantsClicked:function(){return A("participants")}}),"chart"===c&&S.a.createElement(Dr,{datasets:L,yAxisPrefix:"+",labelPrefix:"+"}))),F&&S.a.createElement(fc,{competition:j,onCancel:function(){return a({section:"teams"})}}),m&&S.a.createElement(pc,{entityName:"competition",onCancel:function(){return f(!1)},onSubmit:function(t){e(p.updateAll(o,t)).then((function(e){e.payload.error||f(!1)}))}}),w&&S.a.createElement(hc,{defaultMetric:l||j.metric,onCancel:function(){return O(!1)},onSubmit:function(e){a({metric:e===j.metric?null:e}),O(!1)}}),g&&S.a.createElement(vc,{exportConfig:g,onCancel:function(){return y(null)}}))):S.a.createElement(Ar,null)};function Uc(){Uc=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var Hc=function(e,t,r,n){return function(){var a=Object(Mt.a)(Uc().mark((function a(o){var c,i,l;return Uc().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o(ve.onFetchRequest()),a.prev=1,c=Kt.fetchPlayerSnapshots.replace(":username",e),a.next=5,Vt.get(c,{params:{period:t,startDate:r,endDate:n}});case 5:i=a.sent,l=i.data,o(ve.onFetchSuccess({username:e,period:t,data:l})),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),o(ve.onFetchError(a.t0.message.toString()));case 13:case"end":return a.stop()}}),a,null,[[1,10]])})));return function(e){return a.apply(this,arguments)}}()},Kc=function(e,t){return function(){var r=Object(Mt.a)(Uc().mark((function r(n){return Uc().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n(ve.onInvalidate({username:e,period:t}));case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},Vc=Object(V.a)((function(e){return e.snapshots.snapshots}),(function(e){return e}));function Bc(e){return function(t){return Vc(t)[e]}}var zc=Object(V.a)((function(e){return e.snapshots}),(function(e){return e.isFetching}));function Wc(){Wc=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var Xc=function(e){return function(){var t=Object(Mt.a)(Wc().mark((function t(r){var n,a,o;return Wc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Pe.onFetchPlayerAchievementsRequest()),t.prev=1,n=Kt.fetchPlayerAchievements.replace(":username",e),t.next=5,Vt.get(n);case 5:a=t.sent,o=a.data,r(Pe.onFetchPlayerAchievementsSuccess({username:e,data:o})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r(Pe.onFetchPlayerAchievementsError(t.t0.message.toString()));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},Jc=function(e,t,r){return function(){var n=Object(Mt.a)(Wc().mark((function n(a){var o,c,i,l;return Wc().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Pe.onFetchGroupAchievementsRequest()),n.prev=1,o={limit:t,offset:r},c=Kt.fetchGroupAchievements.replace(":id",e),n.next=6,Vt.get(c,{params:o});case 6:i=n.sent,l=i.data,a(Pe.onFetchGroupAchievementsSuccess({groupId:e,data:l,refresh:!r})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),a(Pe.onFetchGroupAchievementsError(n.t0.message.toString()));case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()},Zc=function(e){return function(){var t=Object(Mt.a)(Wc().mark((function t(r){return Wc().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r(Pe.onInvalidate({username:e}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},$c=function(e){return e.achievements},Qc=Object(V.a)((function(e){return e.achievements.playerAchievements}),(function(e){return Object(ye.mapValues)(e,(function(e){return e.map(ci)}))})),ei=Object(V.a)((function(e){return e.achievements.groupAchievements}),(function(e){return Object(ye.mapValues)(e,(function(e){return e.map(ci)}))})),ti=Object(V.a)($c,(function(e){return e.isFetchingGroupAchievements})),ri=Object(V.a)($c,(function(e){return e.isFetchingPlayerAchievements}));function ni(e){return function(t){return ei(t)[e]}}function ai(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(r){var n=Qc(r)[e];return!n||0===n.length||t?n:n.filter((function(e){return!!e.createdAt}))}}function oi(e){return function(t){var r=Qc(t)[e];if(!r)return[];var n=[];return r.forEach((function(e){var t=n.find((function(t){return t.measure===e.measure&&t.metric===e.metric}));t||(t={metric:e.metric,measure:e.measure,achievements:[]},n.push(t)),t.achievements.push(e)})),n.sort((function(e,t){return vt.METRICS.indexOf(e.metric)-vt.METRICS.indexOf(t.metric)}))}}function ci(e){var t=e.createdAt&&e.createdAt.getFullYear()<2e3;return Object(G.a)(Object(G.a)({},e),{},{unknownDate:!!t})}var ii=Object(_.createContext)({});var li=S.a.memo((function(e){var t=e.player,r=e.showVirtualLevels,n=e.isLoading,a=e.metricType;if(n)return S.a.createElement(Nn,{size:20});var o=t.latestSnapshot;return o?"skilling"===a?function(e,t){var r=vt.SKILLS.filter((function(e){return"overall"!==e})).map((function(r){return Object(vt.getLevel)(e.data.skills[r].experience,t)})).reduce((function(e,t){return e+t})),n=vt.SKILLS.map((function(n){var a=e.data.skills[n],o=a.experience,c=a.rank,i=a.ehp;return{metric:n,level:"overall"===n?r:Object(vt.getLevel)(o,t),experience:o,rank:c,ehp:kt(i,2)}}));n.push({metric:"ehp",level:"",experience:"",ehp:kt(e.data.computed.ehp.value,2),rank:e.data.computed.ehp.rank});var a=[{key:"metric",label:"Skill",className:function(){return"-primary"},transform:function(e){return S.a.createElement("div",{className:"metric-tag"},S.a.createElement("img",{src:jt(e,!0),alt:""}),S.a.createElement("span",null,vt.MetricProps[e].name))}},{key:"experience",transform:function(e){return-1===e?S.a.createElement(In,{value:"---",popupValue:"Unranked"}):S.a.createElement(un,{value:e})}},{key:"level"},{key:"rank",transform:function(e){return-1===e?S.a.createElement(In,{value:"---",popupValue:"Unranked"}):S.a.createElement(un,{value:e})}},{key:"ehp",label:"EHP"}];return S.a.createElement(Nr,{rows:n,columns:a,uniqueKeySelector:function(e){return e.metric}})}(o,r):"activities"===a?function(e){var t=vt.ACTIVITIES.map((function(t){var r=e.data.activities[t];return{metric:t,score:r.score,rank:r.rank}})),r=[{key:"metric",label:"Activity",className:function(){return"-primary"},transform:function(e){return S.a.createElement("div",{className:"metric-tag"},S.a.createElement("img",{src:jt(e,!0),alt:""}),S.a.createElement("span",null,vt.MetricProps[e].name))}},{key:"score",transform:function(e){return-1===e?S.a.createElement(In,{value:"---",popupValue:"Unranked"}):S.a.createElement(un,{value:e})}},{key:"rank",transform:function(e){return-1===e?S.a.createElement(In,{value:"---",popupValue:"Unranked"}):S.a.createElement(un,{value:e})}}];return S.a.createElement(Nr,{rows:t,columns:r,uniqueKeySelector:function(e){return e.metric}})}(o):function(e){var t=vt.BOSSES.map((function(t){var r=e.data.bosses[t];return{metric:t,kills:r.kills,rank:r.rank,ehb:kt(r.ehb,2)}}));t.push({metric:"ehb",kills:"",rank:e.data.computed.ehb.rank,ehb:kt(e.data.computed.ehb.value,2)});var r=[{key:"metric",label:"Boss",className:function(){return"-primary"},transform:function(e){return S.a.createElement("div",{className:"metric-tag"},S.a.createElement("img",{src:jt(e,!0),alt:""}),S.a.createElement("span",null,vt.MetricProps[e].name))}},{key:"kills",transform:function(e,t){var r=vt.MetricProps[t.metric],n=r.name,a=r.minimumValue;return-1===e?S.a.createElement(In,{value:"< ".concat(a),popupValue:"The Hiscores only start tracking ".concat(n," kills after ").concat(a," kc")}):S.a.createElement(un,{value:e})}},{key:"rank",transform:function(e){return-1===e?S.a.createElement(In,{value:"---",popupValue:"Unranked"}):S.a.createElement(un,{value:e})}},{key:"EHB",get:function(e){return e.ehb}}];return S.a.createElement(Nr,{rows:t,columns:r,uniqueKeySelector:function(e){return e.metric}})}(o):null}));r(214);function si(e){var t=e.deltas,r=e.period,n=Object(_.useState)(0),a=Object($e.a)(n,2),o=a[0],c=a[1];if(Object(_.useEffect)((function(){var e=setInterval((function(){t&&r&&t[r]&&c(1e3*function(e){switch(e){case"five_min":return 300;case"day":return 86400;case"week":return 604800;case"month":return 2678400;default:return 31556926}}(r)-(Date.now()-t[r].startsAt))}),500);return function(){return clearInterval(e)}}),[t,r]),!t||!t[r])return null;var i=t[r],l=new Date,s=i.startsAt,u=i.endsAt,m=o<=0&&s,f=new Date(Date.now()+o),p=ht(s,l,2,!0),d=ht(u,l,2,!0),h=s?ht(l,f,2,!0):"Requires update.";return S.a.createElement("div",{className:"deltas-info"},S.a.createElement("div",{className:"deltas-info__panel"},S.a.createElement("abbr",{title:ft(s)},S.a.createElement("span",{className:"info-label"},"Earliest"),S.a.createElement("span",{className:"info-value"},s?"".concat(p," ago"):"None"))),S.a.createElement("div",{className:"deltas-info__panel"},S.a.createElement("abbr",{title:ft(u)},S.a.createElement("span",{className:"info-label"},"Last Updated"),S.a.createElement("span",{className:"info-value"},u?"".concat(d," ago"):"None"))),S.a.createElement("div",{className:"deltas-info__panel"},S.a.createElement("span",{className:"info-label"},"Exp. drop in"),S.a.createElement("span",{className:"info-value"},m?"Requires page refresh.":h)))}si.defaultProps={deltas:void 0};var ui=si;var mi=S.a.memo((function(e){var t=e.deltas,r=e.period,n=e.metricType,a=e.highlightedMetric,o=e.onMetricSelected,c=function(e,t){if("skilling"===t)return function(e){var t=vt.SKILLS.filter((function(e){return"overall"!==e})).map((function(t){return Object(vt.getLevel)(e.skills[t].experience.end)-Object(vt.getLevel)(e.skills[t].experience.start)})).reduce((function(e,t){return e+t})),r=vt.SKILLS.map((function(r){var n,a=e.skills[r],o=a.experience,c=a.rank,i=a.ehp;return{metric:r,level:"overall"===r?t:(n=o,Object(vt.getLevel)(n.end)-Object(vt.getLevel)(n.start)),experience:o.gained,rank:-c.gained,ehp:kt(i.gained,2)}}));return r.push({metric:"ehp",level:"",experience:"",rank:-e.computed.ehp.rank.gained,ehp:e.computed.ehp.value.gained}),[r,[{key:"metric",label:"Skill",className:function(){return"-primary"},transform:function(e){return S.a.createElement("div",{className:"metric-tag"},S.a.createElement("img",{src:jt(e,!0),alt:""}),S.a.createElement("span",null,vt.MetricProps[e].name))}},{key:"experience",label:"Exp.",transform:function(e,t){var r="ehp"===t.metric?10:5e4;return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0,lowThreshold:r})}},{key:"rank",transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0,lowThreshold:10})}},{key:"level",label:"Levels",transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0})}},{key:"ehp",label:"EHP",transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0,lowThreshold:3})}}],function(e){return e.metric}]}(e);if("activities"===t)return function(e){return[vt.ACTIVITIES.map((function(t){var r=e.activities[t],n=r.score,a=r.rank;return{metric:t,score:n.gained,rank:-a.gained}})),[{key:"metric",label:"Activity",className:function(){return"-primary"},transform:function(e){return S.a.createElement("div",{className:"metric-tag"},S.a.createElement("img",{src:jt(e,!0),alt:""}),S.a.createElement("span",null,vt.MetricProps[e].name))}},{key:"score",transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0,lowThreshold:20})}},{key:"rank",transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0,lowThreshold:10})}}],function(e){return e.metric}]}(e);return function(e){var t=vt.BOSSES.map((function(t){var r=e.bosses[t],n=r.kills,a=r.rank,o=r.ehb;return{metric:t,kills:n.gained,rank:-a.gained,ehb:kt(o.gained,2)}}));return t.push({metric:"ehb",level:"",kills:"",rank:-e.computed.ehb.rank.gained,ehb:e.computed.ehb.value.gained}),[t,[{key:"metric",label:"Boss",className:function(){return"-primary"},transform:function(e){return S.a.createElement("div",{className:"metric-tag"},S.a.createElement("img",{src:jt(e,!0),alt:""}),S.a.createElement("span",null,vt.MetricProps[e].name))}},{key:"kills",transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0,lowThreshold:20})}},{key:"rank",transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0,lowThreshold:10})}},{key:"ehb",label:"EHB",transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0,lowThreshold:10})}}],function(e){return e.metric}]}(e)}(t[r].data,n),i=Object($e.a)(c,3),l=i[0],s=i[1],u=i[2],m=Object(_.useCallback)((function(e){o(e)}),[l,n]);return t&&r&&n?S.a.createElement(Nr,{rows:l,columns:s,uniqueKeySelector:u,onRowClicked:m,highlightedRowKey:a}):null})),fi=(r(215),{uniqueKey:function(e){return"".concat(e.period,"/").concat(e.metric)},columns:[{key:"period",className:function(){return"-primary"},transform:function(e){return vt.PeriodProps[e].name}},{key:"value",transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0})}},{key:"updatedAt",width:110,transform:function(e){return ft(e,"DD MMM, YYYY")}}]});var pi=function(e){var t=e.metricRecords,r=e.metric;if(!t)return null;var n=t.sort((function(e,t){return vt.PERIODS.indexOf(e.period)-vt.PERIODS.indexOf(t.period)}));return S.a.createElement("div",{className:"player-record"},S.a.createElement("div",{className:"player-record__header"},S.a.createElement("img",{src:jt(r),alt:""}),S.a.createElement("b",{className:"player-record__title"},vt.MetricProps[r].name)),S.a.createElement("div",{className:"player-record__body"},S.a.createElement(Nr,{rows:n,uniqueKeySelector:fi.uniqueKey,columns:fi.columns,listStyle:!0})))};r(216);function di(e){var t=e.achievement,r=e.equalSizes,n=t.relativeProgress,a=t.currentValue,o=t.threshold,c=et()("achievement-progress",{"-full":r||n>0&&n<1}),i=Math.floor(100*n),l=Nt(a,!0),s=Nt(o,!0);return S.a.createElement("abbr",{className:c,title:"".concat(l," / ").concat(s,"\n(").concat(i,"% to next tier)")},S.a.createElement("div",{className:"achievement-progress__fill",style:{width:"".concat(i,"%")}}))}function hi(e){var t=e.achievement;if(!t)return S.a.createElement("div",{className:"achievement-orb -zero"},"0");var r=t.createdAt,n=t.absoluteProgress,a=t.name,o=t.threshold,c=t.unknownDate,i=function(e){if(e<1e3)return e;if([273742,737627,1986068,5346332,13034431].map((function(e){return e*vt.REAL_SKILLS.length})).includes(e))return Object(vt.getLevel)(e/vt.REAL_SKILLS.length+100).toString();if(e<=1e4)return"".concat(e/1e3,"k");if(13034431===e)return"99";return Nt(e,!0)}(o),l=et()("achievement-orb",{"-completed":1===n}),s=1===n?"".concat(a," - ").concat(c?"Unknown date ":ft(r)):"".concat(a," - Unachieved");return S.a.createElement("abbr",{className:l,title:s},i)}function vi(e){var t=e.some((function(t,r){return r>0&&0===t.relativeProgress&&1===e[r-1].relativeProgress}));return 1===e.length||t||e.filter((function(e){return 1===e.relativeProgress})).length===e.length||e.filter((function(e){return 0===e.relativeProgress})).length===e.length}di.defaultProps={achievement:void 0,equalSizes:!1},hi.defaultProps={achievement:void 0};var gi=function(e){var t=e.group,r=e.metricType,n=t.metric,a=t.achievements;return S.a.createElement("div",{className:"achievement-group"},S.a.createElement("div",{className:"group-icon"},S.a.createElement("img",{src:jt(n),alt:""})),S.a.createElement("b",{className:"group-title -".concat(r)},function(e){if("overall"===e.metric)return"levels"===e.measure?"Base Stats":"Overall Exp.";return e.achievements.length>1?vt.MetricProps[e.metric].name:e.achievements[0].name}(t)),S.a.createElement("div",{className:"group-progress"},S.a.createElement(hi,{achievement:null}),a.map((function(e){return S.a.createElement(_.Fragment,{key:e.name},S.a.createElement(di,{achievement:e,equalSizes:vi(a)}),S.a.createElement(hi,{achievement:e}))}))))},yi=[{label:"Skilling",value:"skilling"},{label:"Bossing",value:"bossing"},{label:"Activities",value:"activities"}];function bi(e,t){return"skilling"===t?Object(vt.isSkill)(e.metric)||"combat"===e.metric:"activities"===t?Object(vt.isActivity)(e.metric):Object(vt.isBoss)(e.metric)||"bossing"===e.metric}var Ei=function(){var e=Object(P.b)(),t=Object(_.useContext)(ii),r=t.context,n=t.updateContext,a=r.username,o=r.metricType,c=yi.findIndex((function(e){return e.value===o})),i=Object(P.c)(y.isFetchingPlayerAchievements),l=Object(P.c)(y.getPlayerAchievementsGrouped(a)),s=Object(P.c)(y.getPlayerAchievements(a,!0)),u=Object(P.c)(y.getPlayerAchievements(a)),m=Object(_.useCallback)((function(){s||e(g.fetchPlayerAchievements(a))}),[e,a,s]);if(Object(_.useEffect)(m,[m]),i)return S.a.createElement(Ar,null);if(!l||!u||!s)return null;var f=l.filter((function(e){return bi(e,o)})),p=s.filter((function(e){return bi(e,o)&&e.absoluteProgress<1})).sort((function(e,t){return t.absoluteProgress-e.absoluteProgress})).slice(0,20).map((function(e){return{icon:jt(e.metric),title:e.name,subtitle:"".concat(Math.round(1e4*e.absoluteProgress)/100,"% completed")}})),d=u.filter((function(e){return bi(e,o)})).sort((function(e,t){return t.createdAt-e.createdAt})).slice(0,20).map((function(e){return{icon:jt(e.metric),title:e.name,subtitle:e.unknownDate?"Unknown date":ft(e.createdAt,"DD MMM, YYYY")}}));return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"row achievements-controls"},S.a.createElement("div",{className:"col-lg-3 col-sm-12"},S.a.createElement(Qr,{options:yi,selectedIndex:c,onSelect:function(e){"skilling"===e.value?n({metricType:e.value,metric:vt.SKILLS[0]}):"bossing"===e.value?n({metricType:e.value,metric:vt.BOSSES[0]}):"activities"===e.value&&n({metricType:e.value,metric:vt.ACTIVITIES[0]})}}))),S.a.createElement("div",{className:"player-nearest-achievements__container col-lg-3 col-md-12"},d&&d.length>0&&S.a.createElement(S.a.Fragment,null,S.a.createElement("span",{className:"panel-label"},"Latest achievements"),S.a.createElement(st,{items:d})),p&&p.length>0&&S.a.createElement(S.a.Fragment,null,S.a.createElement("span",{className:"panel-label"},"Nearest ".concat(o," achievements")),S.a.createElement(st,{items:p}))),S.a.createElement("div",{className:"player-achievements__container col-lg-9 col-md-12"},f.map((function(e){return S.a.createElement(gi,{key:"".concat(e.metric,"|").concat(e.measure,"|").concat(e.achievements.length),group:e,metricType:o})}))))},wi={uniqueKey:function(e){return e.id},columns:[{key:"metric",width:30,get:function(e){return e.competition.metric},transform:function(e){return S.a.createElement("img",{src:jt(e),alt:""})}},{key:"title",get:function(e){return e.competition.title},className:function(){return"-primary"},transform:function(e,t){return S.a.createElement(Ze.b,{to:"/competitions/".concat(t.competition.id)},e)}},{key:"status",transform:function(e,t){var r=new Date,n=t.competition,a=n.startsAt,o=n.endsAt,c="",i="";return a>r?(c="upcoming",i="Starts in ".concat(ht(r,a,2))):o<r?(c="finished",i="Ended ".concat(ht(o,r,1)," ago")):a<r&&o>r&&(c="ongoing",i="Ends in ".concat(ht(r,o,2))),S.a.createElement("div",{className:"status-cell"},S.a.createElement(On,{status:Oi(c)}),S.a.createElement("span",null,i))}},{key:"participantCount",get:function(e){return e.competition.participantCount},className:function(){return"-break-medium"},transform:function(e){return"".concat(e," participants")}},{key:"duration",get:function(e){return ht(e.competition.startsAt,e.competition.endsAt,3)},className:function(){return"-break-large"},transform:function(e){return"Duration: ".concat(e)}},{key:"type",get:function(e){return e.competition.type},transform:function(e){return"team"===e&&S.a.createElement(at,{text:"Teams",hoverText:"Team competition: Players are divided into competing teams.",color:"#898989"})}}]};function Oi(e){switch(e){case"upcoming":return"NEUTRAL";case"ongoing":return"POSITIVE";case"finished":return"NEGATIVE";default:return null}}var ji=function(){var e=Object(P.b)(),t=Object(_.useContext)(ii).context.username,r=Object(P.c)(d.isFetchingList),n=Object(P.c)(d.getPlayerCompetitions(t)),a=Object(_.useCallback)((function(){n||e(p.fetchPlayerCompetitions(t))}),[e,t,n]);return Object(_.useEffect)(a,[a]),S.a.createElement("div",{className:"col"},r?S.a.createElement(Nn,{size:3}):S.a.createElement(Nr,{uniqueKeySelector:wi.uniqueKey,rows:n,columns:wi.columns,listStyle:!0}))};r(217);function xi(e){var t=e.defaultStartDate,r=e.defaultEndDate,n=e.onConfirm,a=e.onCancel,o=Object(_.useState)(t||new Date(Date.now()-6048e5)),c=Object($e.a)(o,2),i=c[0],l=c[1],s=Object(_.useState)(r||new Date),u=Object($e.a)(s,2),m=u[0],f=u[1];return S.a.createElement("div",{className:"custom-period-selection"},S.a.createElement("div",{className:"custom-period-selection__modal"},S.a.createElement("button",{className:"modal-close-btn",type:"button",onClick:a},S.a.createElement("img",{src:"/img/icons/clear.svg",alt:"X"})),S.a.createElement("h4",{className:"modal-title"},"Select a custom time range"),S.a.createElement("b",{className:"modal-label"},"Time range"),S.a.createElement(Dt,{start:i,end:m,onRangeChanged:function(e){var t=Object($e.a)(e,2),r=t[0],n=t[1];l(r),f(n)}}),S.a.createElement(it,{text:"Confirm",onClick:function(){n({startDate:i,endDate:m})},disabled:!i||!m})))}xi.defaultProps={defaultStartDate:void 0,defaultEndDate:void 0};var Ni=xi,ki=vt.Period.WEEK,_i=[].concat(Object(T.a)(vt.PERIODS.map((function(e){return{label:vt.PeriodProps[e].name,value:e}}))),[{label:"Custom Period",value:"custom"}]),Si=[{label:"Skilling",value:"skilling"},{label:"Bossing",value:"bossing"},{label:"Activities",value:"activities"}];function Li(e){var t=e.startDate,r=e.endDate,n=e.onChangePeriodClicked;return S.a.createElement("div",{className:"deltas-warning -info"},S.a.createElement("img",{src:"/img/icons/warn_blue.svg",alt:""}),S.a.createElement("span",null,"Showing player gains from ".concat(ft(t)," to ").concat(ft(r),"."),S.a.createElement("br",null),S.a.createElement("button",{type:"button",onClick:n},"Click here to change")))}function Ci(){return S.a.createElement("div",{className:"deltas-warning"},S.a.createElement("img",{src:"/img/icons/warn_orange.svg",alt:""}),S.a.createElement("span",null,"If your skill ranks wrongfuly show 0 gained, don't worry, this was caused by a bug and it will go away on its own within a few days/weeks."))}var Pi=function(){var e,t=Object(P.b)(),r=Object(_.useContext)(ii),n=r.context,a=r.updateContext,o=n.username,c=n.period,i=n.metricType,l=n.startDate,m=n.endDate,f=Object(_.useState)(!0),p=Object($e.a)(f,2),d=p[0],g=p[1],y=function(e,t){return e||("bossing"===t?vt.BOSSES[0]:"activities"===t?vt.ACTIVITIES[0]:vt.SKILLS[0])}(n.metric,i),b=vt.MetricProps[y].measure,E=_i.findIndex((function(e){return e.value===c})),w=Si.findIndex((function(e){return e.value===i})),O=Object(P.c)(u.isFetchingPlayerDeltas),j=Object(P.c)(v.isFetchingPlayerSnapshots),x=Object(P.c)(u.getPlayerDeltas(o)),N=Object(P.c)(v.getPlayerSnapshots(o)),k=N&&N[c],L="custom"===c&&l&&m,C=x&&((e=x[c])&&Object(ye.some)(e,(function(e){return e&&e.rank&&e.rank.start!==e.rank.end&&0===e.rank.gained}))),T="custom"===c&&(!l||!m),F=Lt(k,y,"rank",d),D=Lt(k,y,b,d),A=x&&c&&x[c],I=Object(_.useCallback)((function(){N&&N[c]||("custom"!==c?t(h.fetchSnapshots(o,c)):l&&m&&t(h.fetchSnapshots(o,null,l,m)))}),[t,o,c,l,m,N]),G=Object(_.useCallback)((function(){x&&x[c]||("custom"!==c?t(s.fetchPlayerDeltas(o)):l&&m&&t(s.fetchPlayerDeltas(o,l,m)))}),[t,o,c,l,m,x]);return Object(_.useEffect)(I,[I]),Object(_.useEffect)(G,[G]),S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"col-lg-6 col-md-12"},S.a.createElement(Dr,{datasets:D.datasets,distribution:D.distribution,onDistributionChanged:function(){return g((function(e){return!e}))},isLoading:j}),S.a.createElement(Dr,{datasets:F.datasets,distribution:D.distribution,onDistributionChanged:function(){return g((function(e){return!e}))},isLoading:j,invertYAxis:!0})),S.a.createElement("div",{className:"col-lg-6 col-md-12"},S.a.createElement("div",{className:"row gained-controls"},S.a.createElement("div",{className:"col-lg-6 col-md-6 col-sm-12"},S.a.createElement(Qr,{options:Si,selectedIndex:w,onSelect:function(e){"skilling"===e.value?a({metricType:e.value,metric:vt.SKILLS[0]}):"bossing"===e.value?a({metricType:e.value,metric:vt.BOSSES[0]}):"activities"===e.value&&a({metricType:e.value,metric:vt.ACTIVITIES[0]})}})),S.a.createElement("div",{className:"col-lg-6 col-md-6 col-sm-12"},S.a.createElement(Qr,{options:_i,selectedIndex:E,onSelect:function(e){return a({period:e.value,startDate:null,endDate:null})}}))),C&&S.a.createElement(Ci,null),L&&S.a.createElement(Li,{startDate:l,endDate:m,onChangePeriodClicked:function(){return a({startDate:null,endDate:null})}}),"custom"!==c&&S.a.createElement(ui,{deltas:x,period:c}),O?S.a.createElement(Nn,{size:20}):A&&S.a.createElement(mi,{deltas:x,period:c,metricType:i,highlightedMetric:y,onMetricSelected:function(e){return a({metric:e})},isLoading:O}),T&&S.a.createElement(Ni,{onConfirm:function(e){t(h.invalidateSnapshots(o,c)),t(s.invalidateDeltas(o,c)),a({startDate:e.startDate,endDate:e.endDate})},onCancel:function(){return a({period:ki})}})))},Ti={uniqueKey:function(e){return e.id},columns:[{key:"name",className:function(){return"-primary"},transform:function(e,t){return S.a.createElement(Ze.b,{to:"/groups/".concat(t.group.id)},t.group.name)},width:250},{key:"role",transform:function(e){return S.a.createElement(yn,{role:e})}},{key:"memberCount",get:function(e){return e.group.memberCount},transform:function(e){return"".concat(e," members")},width:130}]};var Fi=function(){var e=Object(P.b)(),t=Object(_.useContext)(ii).context.username,r=Object(P.c)(c.isFetchingList),n=Object(P.c)(c.getPlayerGroups(t)),a=Object(_.useCallback)((function(){n||e(o.fetchPlayerGroups(t))}),[e,t,n]);return Object(_.useEffect)(a,[a]),S.a.createElement("div",{className:"col"},r?S.a.createElement(Nn,{size:3}):S.a.createElement(Nr,{uniqueKeySelector:Ti.uniqueKey,rows:n,columns:Ti.columns,listStyle:!0}))},Di=[{label:"Open official hiscores",value:"OPEN_HISCORES"},{label:"Change name",value:"CHANGE_NAME"},{label:"Reassign player type",value:"ASSERT_TYPE"}];function Ai(){return S.a.createElement("div",{className:"warning",style:{borderColor:"#d10f0f"}},S.a.createElement("img",{src:"/img/runescape/icons_small/archived.png",alt:""}),S.a.createElement("span",null,S.a.createElement("b",null,"This player is archived."),S.a.createElement("br",null),S.a.createElement("br",null),"Their previous username has been taken by another player. If you know their new username, you can\xa0",S.a.createElement("a",{href:"https://wiseoldman.net/discord",target:"_blank",rel:"noopener noreferrer"},"contact us on Discord"),"\xa0\xa0to transfer their old data to their current username."))}function Ii(e){var t=e.updatedAt;return S.a.createElement("div",{className:"warning"},S.a.createElement("img",{src:"/img/runescape/icons_small/unranked.png",alt:""}),S.a.createElement("span",null,S.a.createElement("b",null,"This player is banned."),S.a.createElement("br",null),S.a.createElement("br",null),"This player could not be found on the hiscores as of"," ",ft(t,"DD MMM YYYY, HH:mm"),". It was then confirmed to be banned via RuneMetrics.",S.a.createElement("br",null),"You can update to re-check this status, it may take a few minutes to complete."))}function Gi(e){var t=e.displayName,r=e.updatedAt,n="/names/submit/".concat(t);return S.a.createElement("div",{className:"warning"},S.a.createElement("img",{src:"/img/runescape/icons_small/unranked.png",alt:""}),S.a.createElement("span",null,S.a.createElement("b",null,"This player is unranked."),S.a.createElement("br",null),S.a.createElement("br",null),"This player could not be found on the hiscores as of ".concat(ft(r,"DD MMM YYYY, HH:mm"),". This can mean they either changed their in-game\n        name, or dropped out of the hiscores (by having very low skills)."),"\xa0\xa0",S.a.createElement("a",{href:Ot(e)},"Visit their hiscores page here"),S.a.createElement("br",null),S.a.createElement("br",null),S.a.createElement(Ze.b,{to:n},"Click here to submit a name change"),"\xa0 or join our \xa0",S.a.createElement("a",{href:"https://wiseoldman.net/discord",target:"_blank",rel:"noopener noreferrer"},"Discord server"),"\xa0 for help."))}function Ri(e){var t=e.displayName,r="/names/submit/".concat(t);return S.a.createElement("div",{className:"warning",style:{borderColor:"#e6792c"}},S.a.createElement("img",{src:"/img/runescape/icons_small/flagged.png",alt:""}),S.a.createElement("span",null,S.a.createElement("b",null,"This player is flagged."),S.a.createElement("br",null),S.a.createElement("br",null),"This is likely caused by an unregistered name change or they have become unranked in one or more skills due to lack of progress. Please check again in a few hours, if this message persists, then feel free to contact us on Discord for manual review.",S.a.createElement("br",null),S.a.createElement("br",null),S.a.createElement(Ze.b,{to:r},"Click here to submit a name change"),"\xa0 or join our \xa0",S.a.createElement("a",{href:"https://wiseoldman.net/discord",target:"_blank",rel:"noopener noreferrer"},"Discord server"),"\xa0 for help."))}var Mi=function(e){var t=e.player,r=e.isTracking,n=e.handleUpdate,a=e.handleRedirect,o=e.handleAssertName,c=e.handleAssertType,i=function(e){"OPEN_HISCORES"===e.value?a(Ot(t)):"CHANGE_NAME"===e.value?a("/names/submit/".concat(t.displayName)):"ASSERT_NAME"===e.value?o():"ASSERT_TYPE"===e.value&&c()};return S.a.createElement(S.a.Fragment,null,"flagged"===t.status&&S.a.createElement(Ri,t),"unranked"===t.status&&S.a.createElement(Gi,t),"archived"===t.status&&S.a.createElement(Ai,t),"banned"===t.status&&S.a.createElement(Ii,t),S.a.createElement(fn,{title:t.displayName,icon:bt(t.type),iconTooltip:Et(t.type,t.status),renderLeft:function(){var e=function(e){switch(e){case"lvl3":return{text:"Level 3",hoverText:""};case"f2p":return{text:"F2P",hoverText:""};case"f2p_lvl3":return{text:"F2P & Level 3",hoverText:""};case"def1":return{text:"1 Def Pure",hoverText:""};case"hp10":return{text:"10 HP Pure",hoverText:""};case"zerker":return{text:"Zerker",hoverText:""};default:return null}}(t.build);return S.a.createElement(S.a.Fragment,null,e&&S.a.createElement(at,{text:e.text,hoverText:e.hoverText}),t.country&&S.a.createElement("abbr",{className:"flag",title:"Country: ".concat(t.country,". Set your own flag at wiseoldman.net/flags")},S.a.createElement("img",{src:"/img/flags/".concat(t.country,".svg"),alt:t.country})))},renderRight:function(){return S.a.createElement(S.a.Fragment,null,S.a.createElement(it,{text:"Update",onClick:n,loading:r}),S.a.createElement(Gt,{options:Di,onSelect:i},S.a.createElement("button",{className:"header__options-btn",type:"button"},S.a.createElement("img",{src:"/img/icons/options.svg",alt:""}))))}}))};var qi=function(e){var t=function(e){if(!e||!e.combatLevel||!e.latestSnapshot)return[];var t=e.latestSnapshot.data.skills.overall.rank,r=e.latestSnapshot.data.computed.ehp.rank,n=e.latestSnapshot.data.computed.ehb.rank;return[{icon:jt("combat"),title:"Combat Lvl.",text:e.combatLevel},{icon:jt("overall"),title:-1===e.exp?"Unranked":"".concat(Nt(e.exp,!0)," Exp."),text:-1===t?"---":"Rank ".concat(Nt(t))},{icon:jt("ehp"),title:"".concat(Nt(e.ehp)," EHP"),text:"Rank ".concat(Nt(r))},{icon:jt("ehb"),title:"".concat(Nt(e.ehb)," EHB"),text:"Rank ".concat(Nt(n))},{icon:jt("ttm"),title:"Time to Max",text:"".concat(Nt(e.ttm)," hours")},{icon:jt("tt200m"),title:"Time to 200m all",text:"".concat(Nt(e.tt200m)," hours")}]}(e.player);return S.a.createElement("div",{className:"player-highlights__container"},t.map((function(e){return S.a.createElement("div",{key:e.title,className:"player-highlight"},S.a.createElement("div",{key:e.title,className:"player-highlight__wrapper"},S.a.createElement("img",{className:"player-highlight__icon",src:e.icon,alt:""}),S.a.createElement("div",{className:"player-highlight__content"},S.a.createElement("div",{className:"player-highlight__title"},e.title),S.a.createElement("div",{className:"player-highlight__text"},e.text))))})))};function Yi(){Yi=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var Ui=function(e,t,r){return function(){var n=Object(Mt.a)(Yi().mark((function n(a){var o,c,i,l;return Yi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Se.onFetchRequest()),n.prev=1,o=Object(G.a)(Object(G.a)({},e),{},{limit:t,offset:r}),n.next=5,Vt.get(Kt.fetchNameChanges,{params:o});case 5:c=n.sent,i=c.data,l=!r,a(Se.onFetchSuccess({data:i,refresh:l})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),a(Se.onFetchError(n.t0.message.toString()));case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()},Hi=function(e){return function(){var t=Object(Mt.a)(Yi().mark((function t(r){var n,a,o;return Yi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(Se.onFetchPlayerNameChangesRequest()),t.prev=1,n=Kt.fetchPlayerNames.replace(":username",e),t.next=5,Vt.get(n);case 5:a=t.sent,o=a.data,r(Se.onFetchPlayerNameChangesSuccess({username:e,data:o})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),r(Se.onFetchPlayerNameChangesError(t.t0.message.toString()));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()},Ki=function(e,t,r){return function(){var n=Object(Mt.a)(Yi().mark((function n(a){var o,c,i,l;return Yi().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(Se.onFetchGroupNameChangesRequest()),n.prev=1,o={limit:t,offset:r},c=Kt.fetchGroupNameChanges.replace(":id",e),n.next=6,Vt.get(c,{params:o});case 6:i=n.sent,l=i.data,a(Se.onFetchGroupNameChangesSuccess({groupId:e,data:l,refresh:!r})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),a(Se.onFetchGroupNameChangesError(n.t0.message.toString()));case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()},Vi=function(e,t){return function(){var r=Object(Mt.a)(Yi().mark((function r(n){var a,o,c;return Yi().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(Se.onSubmitRequest()),r.prev=1,a={oldName:e,newName:t},r.next=5,Vt.post(Kt.submitNameChange,a);case 5:return o=r.sent,c=o.data,r.abrupt("return",n(Se.onSubmitSuccess({data:c})));case 10:return r.prev=10,r.t0=r.catch(1),r.abrupt("return",n(Se.onSubmitError(r.t0.response.data.message)));case 13:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e){return r.apply(this,arguments)}}()},Bi=function(e){return e.names},zi=Object(V.a)(Bi,(function(e){return e.error})),Wi=Object(V.a)(Bi,(function(e){return e.isFetching})),Xi=Object(V.a)(Bi,(function(e){return e.isSubmitting})),Ji=Object(V.a)(Bi,(function(e){return e.isFetchingGroupNameChanges})),Zi=Object(V.a)(Bi,(function(e){return e.isFetchingPlayerNameChanges})),$i=Object(V.a)((function(e){return e.names.nameChanges}),(function(e){return Object.values(e).sort((function(e,t){return t.createdAt-e.createdAt}))})),Qi=Object(V.a)((function(e){return e.names.playerNameChanges}),(function(e){return e})),el=Object(V.a)((function(e){return e.names.groupNameChanges}),(function(e){return e}));function tl(e){return function(t){return el(t)[e]}}function rl(e){return function(t){return Qi(t)[e]}}var nl={uniqueKey:function(e){return e.id},columns:[{key:"newName",className:function(){return"-primary"}},{key:"createdAt",className:function(){return"-break-large"},transform:function(e){return e?"Submitted at ".concat(ft(e,"DD MMM YYYY")):"Initial Name"}},{key:"resolvedAt",transform:function(e){return e?"Approved at ".concat(ft(e,"DD MMM YYYY")):"---"}}]};var al=function(){var e=Object(P.b)(),t=Object(_.useContext)(ii).context.username,r=Object(P.c)(E.isFetchingPlayerNameChanges),n=Object(P.c)(E.getPlayerNames(t)),a=function(e){return e&&0!==e.length?[].concat(Object(T.a)(e),[{newName:e[e.length-1].oldName}]):[]}(n),o=Object(_.useCallback)((function(){n||e(b.fetchPlayerNameChanges(t))}),[e,t,n]);return Object(_.useEffect)(o,[o]),S.a.createElement("div",{className:"col"},r?S.a.createElement(Nn,{size:3}):S.a.createElement(Nr,{uniqueKeySelector:nl.uniqueKey,rows:a,columns:nl.columns,listStyle:!0}))},ol=[{label:"Show Regular Levels",value:"regular"},{label:"Show Virtual Levels",value:"virtual"}],cl=[{label:"Skilling",value:"skilling"},{label:"Bossing",value:"bossing"},{label:"Activities",value:"activities"}];function il(e){var t=e.player,r=function(e){for(var t=0,r=1;r!==e+1;r++)t+=gt(r);return t}(99),n=function(e){return t.latestSnapshot.data.skills[e].level},a=vt.SKILLS.filter((function(e){return"overall"!==e})).map((function(e){return{skill:e,expLeft:Math.max(0,(a=e,r-t.latestSnapshot.data.skills[a].experience)),level:n(e)};var a})).filter((function(e){return e.expLeft>0})).sort((function(e,t){return e.expLeft-t.expLeft})).slice(0,5);if(0===a.length)return null;var o=a.map((function(e){return{icon:jt(e.skill),title:"".concat(e.level," ").concat(xt(e.skill)),subtitle:"".concat(Nt(e.expLeft)," exp left")}}));return S.a.createElement(S.a.Fragment,null,S.a.createElement("span",{className:"panel-label"},"Nearest 99s"),S.a.createElement(st,{items:o}))}function ll(e){var t=e.player,r=e.achievements;if(!r||0===r.length)return null;var n=r.sort((function(e,t){return t.createdAt-e.createdAt})).slice(0,3).map((function(e){return{icon:ml(e.metric),title:e.name,subtitle:e.unknownDate?"Unknown date":ft(e.createdAt,"DD MMM, YYYY")}}));return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"panel-header"},S.a.createElement("span",{className:"panel-label"},"Recent achievements"),S.a.createElement(Ze.b,{to:"/players/".concat(t.displayName,"/achievements"),className:"panel-label-link"},"Show more")),S.a.createElement(st,{items:n}))}function sl(e){var t=e.player,r=e.competitions;if(0===r.length)return null;var n=Date.now(),a=r.filter((function(e){return e.competition.startsAt<n&&e.competition.endsAt>n})).slice(0,3).map((function(e){return{id:e.competition.id,title:e.competition.title,icon:jt(e.competition.metric),subtitle:"Ends in ".concat(ht(new Date,e.competition.endsAt,2,!0))}})),o=r.filter((function(e){return e.competition.startsAt>n})).slice(0,3).map((function(e){return{id:e.competition.id,title:e.competition.title,icon:jt(e.competition.metric),subtitle:"Starts in ".concat(ht(new Date,e.competition.startsAt,2,!0))}}));return S.a.createElement(S.a.Fragment,null,a&&a.length>0&&S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"panel-header"},S.a.createElement("span",{className:"panel-label"},"Ongoing competitions"),S.a.createElement(Ze.b,{to:"/players/".concat(t.displayName,"/competitions"),className:"panel-label-link"},"Show more")),S.a.createElement(st,{items:a,urlSelector:function(e){return"/competitions/".concat(e.id)}})),o&&o.length>0&&S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"panel-header"},S.a.createElement("span",{className:"panel-label"},"Upcoming competitions"),S.a.createElement(Ze.b,{to:"/players/".concat(t.displayName,"/competitions"),className:"panel-label-link"},"Show more")),S.a.createElement(st,{items:o,urlSelector:function(e){return"/competitions/".concat(e.id)}})))}function ul(e){var t=e.player,r=t.id,n=t.type,a=t.build,o=t.registeredAt,c=t.updatedAt,i=t.lastChangedAt,l=i?ft(i,"DD MMM YYYY, HH:mm"):"Unknown",s=[{key:"Id",value:r},{key:"Type",value:vt.PlayerTypeProps[n].name},{key:"Build",value:vt.PlayerBuildProps[a].name},{key:"Last updated at",value:ft(c,"DD MMM YYYY, HH:mm")},{key:"Last changed at",value:l},{key:"Registered at",value:ft(o,"DD MMM YYYY, HH:mm")}];return S.a.createElement(Cr,{data:s})}function ml(e){return vt.METRICS.includes(e)?jt(e):jt("combat")}var fl=function(){var e=Object(P.b)(),t=Object(_.useContext)(ii),r=t.context,n=t.updateContext,a=r.username,o=r.virtual,c=r.metricType,i=o?1:0,s=cl.findIndex((function(e){return e.value===c})),u=Object(P.c)(l.getPlayer(a)),m=Object(P.c)(d.getPlayerCompetitions(a)),f=Object(P.c)(y.getPlayerAchievements(a)),h=Object(_.useCallback)((function(){f||e(g.fetchPlayerAchievements(a))}),[e,a,f]),v=Object(_.useCallback)((function(){m||e(p.fetchPlayerCompetitions(a))}),[e,a,m]);return Object(_.useEffect)(h,[h]),Object(_.useEffect)(v,[v]),u?S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"col-lg-3 col-md-7"},S.a.createElement("span",{className:"panel-label"},"Player details"),S.a.createElement(ul,{player:u})),S.a.createElement("div",{className:"col-lg-3 col-md-5"},m&&S.a.createElement(sl,{player:u,competitions:m}),f&&S.a.createElement(ll,{player:u,achievements:f}),u.latestSnapshot&&S.a.createElement(il,{player:u})),S.a.createElement("div",{className:"col-lg-6 col-md-12"},S.a.createElement("span",{className:"panel-label"},"Current stats"),S.a.createElement("div",{className:"row overview-controls"},S.a.createElement("div",{className:"col-lg-6 col-md-6 col-sm-12"},S.a.createElement(Qr,{options:cl,selectedIndex:s,onSelect:function(e){"skilling"===e.value?n({metricType:e.value,metric:vt.SKILLS[0]}):"bossing"===e.value?n({metricType:e.value,metric:vt.BOSSES[0]}):"activities"===e.value&&n({metricType:e.value,metric:vt.ACTIVITIES[0]})}})),S.a.createElement("div",{className:"col-lg-6 col-md-6 col-sm-12"},S.a.createElement(Qr,{options:ol,selectedIndex:i,onSelect:function(e){n({virtual:"virtual"===e.value})},disabled:"skilling"!==c}))),S.a.createElement(li,{player:u,showVirtualLevels:o,metricType:c}))):null},pl=[{label:"Skilling",value:"skilling"},{label:"Bossing",value:"bossing"},{label:"Activities",value:"activities"}];var dl=function(){var e=Object(P.b)(),t=Object(_.useContext)(ii),r=t.context,n=t.updateContext,a=r.username,o=r.metricType,c=pl.findIndex((function(e){return e.value===o})),i=Object(P.c)(f.isFetchingPlayerRecords),l=Object(P.c)(f.getPlayerRecords(a)),s=function(e,t){if(!e)return[];if("skilling"===t)return e.filter((function(e){return Object(vt.isSkill)(e.metric)||"ehp"===e.metric}));if("bossing"===t)return e.filter((function(e){return Object(vt.isBoss)(e.metric)||"ehb"===e.metric}));return e.filter((function(e){return Object(vt.isActivity)(e.metric)}))}(l,o),u=Object(_.useCallback)((function(){l||e(m.fetchPlayerRecords(a))}),[e,a,l]);return Object(_.useEffect)(u,[u]),i?S.a.createElement(Ar,null):S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"row records-controls"},S.a.createElement("div",{className:"col-lg-4 col-sm-12"},S.a.createElement(Qr,{options:pl,selectedIndex:c,onSelect:function(e){"skilling"===e.value?n({metricType:e.value,metric:vt.SKILLS[0]}):"bossing"===e.value?n({metricType:e.value,metric:vt.BOSSES[0]}):"activities"===e.value&&n({metricType:e.value,metric:vt.ACTIVITIES[0]})}}))),vt.METRICS.sort((function(e){return Object(vt.isComputedMetric)(e)?-5:0})).map((function(e){var t=s.filter((function(t){return t.metric===e}));return t&&t.length>0&&S.a.createElement("div",{key:"record-".concat(e),className:"col-md-6 col-lg-4"},S.a.createElement(pi,{metric:e,metricRecords:t}))})))};r(218);function hl(){hl=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var vl=["Overview","Gained","Competitions","Groups","Records","Achievements","Names"];function gl(e){var t=e.username,r=e.section,n=e.metricType,a=e.metric,o=e.period,c=e.virtual,i=e.startDate,l=e.endDate,s=new pa("/players/".concat(t));s.appendToPath("/".concat(r||"overview")),n&&"competitions"!==r&&"groups"!==r&&"names"!==r&&s.appendToPath("/".concat(n)),a&&r&&"gained"===r&&s.appendSearchParam("metric",a),!c||r&&"overview"!==r||s.appendSearchParam("virtual",!0),o&&"week"!==o&&r&&"gained"===r&&s.appendSearchParam("period",o);var u=s.getSearchParam("period");return u&&"custom"===u.value&&i&&l&&mt(i)&&mt(l)&&(s.appendSearchParam("startDate",i.toISOString()),s.appendSearchParam("endDate",l.toISOString())),s.getPath()}function yl(e,t){var r=vl.map((function(e){return e.toLowerCase()})),n=t.metric;"runecraft"===n&&(n="runecrafting");var a=e.section&&r.includes(e.section.toLowerCase()),o=e.metricType&&["skilling","bossing","activities"].includes(e.metricType.toLowerCase()),c=n&&vt.METRICS.includes(n.toLowerCase()),i=t.period&&vt.PERIODS.includes(t.period.toLowerCase()),l=t.startDate&&!i&&mt(t.startDate),s=t.endDate&&!i&&mt(t.endDate),u=function(e){return e?e.replace(/[-_\s]/g," ").trim().toLowerCase():null}(e.username),m=a?e.section:"overview",f=t.virtual||!1,p=c?n:null,d=i||"custom"===t.period?t.period:"week",h=l?new Date(t.startDate):null,v=s?new Date(t.endDate):null;return{username:u,section:m,metricType:o?e.metricType:function(e){return!e||Object(vt.isSkill)(e)||"ehp"===e?"skilling":Object(vt.isBoss)(e)||"ehb"===e?"bossing":"activities"}(p),virtual:f,metric:p,period:d,startDate:h,endDate:v}}var bl=function(){var e=Object(P.b)(),t=Object(Je.f)(),r=Wn(gl,yl),n=r.context,a=r.updateContext,o=n.username,c=n.section,u=Object(P.c)(l.getPlayer(o)),f=Object(P.c)(l.isTracking),p=vl.findIndex((function(e){return e.toLowerCase()===c})),d=function(){var t=Object(Mt.a)(hl().mark((function t(){var r;return hl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(i.trackPlayer(o));case 2:if(r=t.sent,r.payload.data){t.next=6;break}return t.abrupt("return");case 6:e(i.fetchPlayer(o)),e(s.invalidateDeltas(o)),e(h.invalidateSnapshots(o)),e(g.invalidateAchievements(o)),e(m.invalidateRecords(o));case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=Object(_.useCallback)((function(){u&&void 0!==u.latestSnapshot||e(i.fetchPlayer(o)).then((function(e){e.payload.data||t.push("/players/search/".concat(o))}))}),[e,t,o,u]);return Object(_.useEffect)(v,[v]),u&&void 0!==u.latestSnapshot?S.a.createElement(ii.Provider,{value:{context:n,updateContext:a}},S.a.createElement("div",{className:"player__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,u.displayName)),S.a.createElement("div",{className:"player__header row"},S.a.createElement("div",{className:"col"},S.a.createElement(Mi,{player:u,isTracking:f,handleRedirect:function(e){e.includes("http")?window.open(e,"_blank"):t.push(e)},handleUpdate:d,handleAssertName:function(){e(i.assertName(u.username,u.displayName))},handleAssertType:function(){e(i.assertType(u.username))}}))),S.a.createElement("div",{className:"player__cards row"},S.a.createElement("div",{className:"col-md-12"},S.a.createElement(qi,{player:u}))),S.a.createElement("div",{className:"row"},S.a.createElement("div",{className:"col-md-12"},S.a.createElement(Pn,{tabs:vl,selectedIndex:p,align:"space-between",onTabSelected:function(e){a({section:vl[e].toLowerCase()})}}))),S.a.createElement("div",{className:"player__content row"},"overview"===c&&S.a.createElement(fl,null),"gained"===c&&S.a.createElement(Pi,null),"competitions"===c&&S.a.createElement(ji,null),"groups"===c&&S.a.createElement(Fi,null),"records"===c&&S.a.createElement(dl,null),"achievements"===c&&S.a.createElement(Ei,null),"names"===c&&S.a.createElement(al,null)))):S.a.createElement(Ar,null)};r(219);function El(){El=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var wl={uniqueKey:function(e){return e.id},columns:[{key:"displayName",className:function(){return"-primary"},transform:function(e,t){return S.a.createElement(Ze.b,{to:"/players/".concat(t.username)},S.a.createElement(gn,Object.assign({name:e},t)))}},{key:"updatedAt",transform:function(e){return"Last updated ".concat(ht(e,new Date,2,!0)," ago")}}]};var Ol=function(){var e=Object(Je.f)(),t=Object(P.b)(),r=Object(Je.h)().username,n=Object(_.useState)(!1),a=Object($e.a)(n,2),o=a[0],c=a[1],s=Object(P.c)(l.getSearchResults),u=function(){var n=Object(Mt.a)(El().mark((function n(){var a,o;return El().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,c(!0),n.next=4,t(i.trackPlayer(r));case 4:a=n.sent,(o=a.payload).data&&e.push("/players/".concat(o.data.displayName));case 7:return n.prev=7,c(!1),n.finish(7);case 10:case"end":return n.stop()}}),n,null,[[0,,7,10]])})));return function(){return n.apply(this,arguments)}}();return Object(_.useEffect)((function(){t(i.searchPlayers(r))}),[r]),Object(_.useEffect)((function(){var t=s.find((function(e){return e.username===r.toLowerCase()}));t&&e.push("/players/".concat(t.displayName))}),[s]),S.a.createElement("div",{className:"player-search__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"Player search: ".concat(r))),S.a.createElement("div",{className:"player-search__header row"},S.a.createElement("div",{className:"col"},S.a.createElement("h1",{className:"header__title"},"Couldn't find \"".concat(r,'"')),S.a.createElement("p",{className:"header__text"},"This player is not being tracked yet, would you like to start tracking it?"),S.a.createElement(it,{text:"Track ".concat(r),onClick:u,loading:o}))),s&&s.length>0&&S.a.createElement("div",{className:"player-search__list row"},S.a.createElement("div",{className:"col"},S.a.createElement("b",null,'Search results for "'.concat(r,'":')),S.a.createElement(Nr,{uniqueKeySelector:wl.uniqueKey,columns:wl.columns,rows:s,listStyle:!0}))))},jl={uniqueKey:function(e){return e.id},columns:[{key:"name",className:function(){return"-primary"},transform:function(e,t){return t.verified?S.a.createElement(Ze.b,{to:"/groups/".concat(t.id)},S.a.createElement(Gn,null),e):S.a.createElement(Ze.b,{to:"/groups/".concat(t.id)},e)}},{key:"memberCount",transform:function(e){return"".concat(e," members")},width:130}]};var xl=function(){var e=Object(P.c)(c.getGroups),t=Object(P.c)(c.isFetchingList);return S.a.createElement("div",{className:"col"},!t||e&&0!==e.length?S.a.createElement(Nr,{uniqueKeySelector:jl.uniqueKey,columns:jl.columns,rows:e,listStyle:!0}):S.a.createElement(Nn,{size:20}))};r(220);var Nl=function(){var e=Object(P.b)(),t=Object(_.useState)(""),r=Object($e.a)(t,2),n=r[0],a=r[1],i=Kn({resultsPerPage:20,selector:c.getGroups,action:function(t,r,n){if(!n)return;e(o.fetchList(n,t,r))}}),l=i.isFullyLoaded,s=i.reloadData,u=Object(_.useCallback)(Object(ye.debounce)(s,500,{leading:!0,trailing:!0}),[]);return Object(_.useEffect)((function(){return u({name:n})}),[n,u]),S.a.createElement("div",{className:"groups__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"Groups")),S.a.createElement("div",{className:"groups__header row"},S.a.createElement("div",{className:"col"},S.a.createElement(pn,{title:"Groups"})),S.a.createElement("div",{className:"col"},S.a.createElement(Dn,{text:"Create new",url:"/groups/create"}))),S.a.createElement("div",{className:"groups__options row"},S.a.createElement("div",{className:"col-12"},S.a.createElement(Jr,{onChange:function(e){return a(e.target.value)},placeholder:"Search group"}))),S.a.createElement("div",{className:"groups__list row"},S.a.createElement(xl,null)),S.a.createElement("div",{className:"row"},S.a.createElement("div",{className:"col"},!l&&S.a.createElement("b",{className:"loading-indicator"},"Loading..."))))},kl=r(83),_l=r.n(kl);r(221);function Sl(){Sl=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var Ll=function(e){var t=e.group,r=e.onCancel,n=Object(Je.f)(),a=Object(P.b)(),c=Object(_.useState)(""),i=Object($e.a)(c,2),l=i[0],s=i[1],u=function(){var e=Object(Mt.a)(Sl().mark((function e(){var r,c;return Sl().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(o.remove(t.id,l));case 2:r=e.sent,(c=r.payload)&&c.groupId&&n.push("/groups");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=Object(_.useCallback)((function(e){s(e.target.value)}),[]),f=Object(_.useCallback)(u,[t,l]);return Object(_.useEffect)((function(){return X.a.modalview("/groups/".concat(t.id,"/delete"))}),[t]),S.a.createElement("div",{className:"delete-group"},S.a.createElement("div",{className:"delete-group__modal"},S.a.createElement("button",{className:"close-btn",type:"button",onClick:r},S.a.createElement("img",{src:"/img/icons/clear.svg",alt:"X"})),S.a.createElement("b",{className:"modal-title"},"Are you sure you want to delete this group?"),S.a.createElement("span",{className:"modal-warning"},"This action is permanent and cannot be reversed. All linked competitions will also be deleted."),S.a.createElement("input",{className:"verification-input",value:l,type:"password",placeholder:"Verification code",onChange:m,autoComplete:"off"}),S.a.createElement("div",{className:"lost-code"},"Lost your verification code?",S.a.createElement("a",{href:"https://wiseoldman.net/discord",target:"_blank",rel:"noopener noreferrer"},"Join our discord for help")),S.a.createElement(it,{text:"Delete",onClick:f})))},Cl=Object(_.createContext)({}),Pl={uniqueKey:function(e){return"".concat(e.player.id,"-").concat(e.name)},columns:[{key:"displayName",get:function(e){return e.player.displayName},className:function(){return"-primary"},transform:function(e,t){return S.a.createElement(Ze.b,{to:"/players/".concat(t.player.username,"/achievements")},S.a.createElement(gn,Object.assign({name:e},t.player)))}},{key:"metric",className:function(){return"-no-padding"},transform:function(e){return S.a.createElement("img",{src:jt(e,!0),alt:""})}},{key:"name",className:function(){return"-no-padding"}},{key:"createdAt",className:function(){return"-break-medium"},transform:function(e){return ft(e,"DD MMM, YYYY")}}]};var Tl=function(){var e=Object(P.b)(),t=Object(_.useContext)(Cl).context.id,r=Kn({resultsPerPage:20,action:function(r,n,a){if(!a)return;e(g.fetchGroupAchievements(t,r,n))},selector:y.getGroupAchievements(t)}),n=r.isFullyLoaded,a=r.pageIndex,o=r.reloadData,c=Object(P.c)(y.getGroupAchievements(t)),i=Object(P.c)(y.isFetchingGroupAchievements)&&0===a,l=Object(_.useCallback)(Object(ye.debounce)(o,500,{leading:!0}),[t]);return Object(_.useEffect)((function(){return l({})}),[l,t]),S.a.createElement(S.a.Fragment,null,S.a.createElement("span",{className:"widget-label"},"Most recent achievements"),i?S.a.createElement(Nn,{size:20}):S.a.createElement(Nr,{uniqueKeySelector:Pl.uniqueKey,rows:c,columns:Pl.columns,listStyle:!0}),!n&&S.a.createElement("b",{className:"loading-indicator"},"Loading..."))},Fl=["ongoing","upcoming","finished"],Dl={uniqueKey:function(e){return e.id},columns:[{key:"metric",width:30,transform:function(e){return S.a.createElement("img",{src:jt(e),alt:""})}},{key:"title",className:function(){return"-primary"},transform:function(e,t){return S.a.createElement(Ze.b,{to:"/competitions/".concat(t.id)},e)}},{key:"status",transform:function(e,t){return S.a.createElement("div",{className:"status-cell"},S.a.createElement(On,{status:Al(e)}),S.a.createElement("span",null,t&&t.countdown))}},{key:"participantCount",className:function(){return"-break-medium"},transform:function(e){return"".concat(e," participants")}},{key:"type",transform:function(e){return"team"===e&&S.a.createElement(at,{text:"Teams",hoverText:"Team competition: Players are divided into competing teams.",color:"#898989"})}}]};function Al(e){switch(e){case"upcoming":return"NEUTRAL";case"ongoing":return"POSITIVE";case"finished":return"NEGATIVE";default:return null}}var Il=function(){var e=Object(_.useContext)(Cl).context.id,t=function(e){return e?e.sort((function(e,t){return Fl.indexOf(e.status)-Fl.indexOf(t.status)||(r=e.status,function(e,t){switch(r){case"ongoing":return e.endsAt.getTime()-t.endsAt.getTime()||e.startsAt.getTime()-t.startsAt.getTime();case"finished":return t.endsAt.getTime()-e.endsAt.getTime()||t.startsAt.getTime()-e.startsAt.getTime();default:return e.startsAt.getTime()-t.startsAt.getTime()||e.endsAt.getTime()-t.endsAt.getTime()}})(e,t);var r})):[]}(Object(P.c)(d.getGroupCompetitions(e)));return S.a.createElement(Nr,{uniqueKeySelector:Dl.uniqueKey,rows:t,columns:Dl.columns,clickable:!0,listStyle:!0})},Gl=vt.METRICS.map((function(e){return{label:vt.MetricProps[e].name,icon:jt(e,!0),value:e}})),Rl=[].concat(Object(T.a)(vt.PERIODS.map((function(e){return{label:vt.PeriodProps[e].name,value:e}}))),[{label:"Custom Period",value:"custom"}]);function Ml(){return S.a.createElement("div",{className:"deltas-warning"},S.a.createElement("img",{src:"/img/icons/warn_orange.svg",alt:""}),S.a.createElement("span",null,"Please hold. Group gains are now calculated in real time and might take a while to load, especially for bigger groups."))}function ql(e){var t=e.startDate,r=e.endDate,n=e.onChangePeriodClicked;return S.a.createElement("div",{className:"deltas-warning -info"},S.a.createElement("img",{src:"/img/icons/warn_blue.svg",alt:""}),S.a.createElement("span",null,"Showing group gains from ".concat(ft(t)," to ").concat(ft(r),"."),S.a.createElement("br",null),S.a.createElement("button",{type:"button",onClick:n},"Click here to change")))}var Yl=function(){var e=Object(P.b)(),t=Object(_.useContext)(Cl),r=t.context,n=t.updateContext,a=r.id,o=r.metric,c=r.period,i=r.startDate,l=r.endDate,m=Kn({resultsPerPage:50,action:function(t,r,n){if(!n)return;c&&"custom"!==c?e(s.fetchGroupPeriodDeltas(a,o,c,t,r)):i&&l&&e(s.fetchGroupTimeRangeDeltas(a,o,i,l,t,r))},selector:u.getGroupDeltas(a)}),f=m.data,p=m.pageIndex,d=m.isFullyLoaded,h=m.reloadData,v=Object(P.c)(u.isFetchingGroupDeltas)&&0===p,g="custom"===c&&i&&l,y="custom"===c&&(!i||!l),b=Gl.findIndex((function(e){return e.value===o})),E=Rl.findIndex((function(e){return e.value===c})),w=function(e,t){return{uniqueKey:function(r){return"".concat(r.player.id,"-").concat(e,"-").concat(t)},columns:[{key:"rank"},{key:"displayName",label:"Name",className:function(){return"-primary"},get:function(e){return e.player.displayName},transform:function(e,t){var r=t.player;return S.a.createElement(Ze.b,{to:"/players/".concat(r.username)},S.a.createElement(gn,Object.assign({name:r.displayName},r)))}},{key:"start",get:function(e){return e.data.start},transform:function(e){return S.a.createElement(un,{value:e})}},{key:"end",get:function(e){return e.data.end},transform:function(e){return S.a.createElement(un,{value:e})}},{key:"gained",get:function(e){return e.data.gained},transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0})}},{key:"updatedAt",label:"Last updated",get:function(e){return e.player.updatedAt},transform:function(e){return"".concat(ht(e,new Date,2,!0)," ago")}}]}}(o,c),O=w.uniqueKey,j=w.columns,x=Object(_.useCallback)(Object(ye.debounce)(h,500,{leading:!0}),[a,o,c,i,l]);return Object(_.useEffect)((function(){return x({})}),[x,a,o,c]),S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"options-bar"},S.a.createElement(Qr,{options:Gl,selectedIndex:b,onSelect:function(e){n({metric:e.value})},search:!0}),S.a.createElement(Qr,{options:Rl,selectedIndex:E,onSelect:function(e){n({period:e.value})}})),S.a.createElement(Ml,null),g&&S.a.createElement(ql,{startDate:i,endDate:l,onChangePeriodClicked:function(){return n({startDate:null,endDate:null})}}),v?S.a.createElement(Nn,{size:20}):S.a.createElement(Nr,{uniqueKeySelector:O,rows:f,columns:j}),!d&&S.a.createElement("b",{className:"loading-indicator"},"Loading..."),y&&S.a.createElement(Ni,{onConfirm:function(e){n({startDate:e.startDate,endDate:e.endDate})},onCancel:function(){return n({period:"week"})}}))},Ul={text:"Verified",hoverText:"Verified group: This group's leader is verified on our Discord server."},Hl=[{label:"Create competition",value:"CREATE_GROUP_COMPETITION"},{label:"Edit group",value:"EDIT_GROUP"},{label:"Export members list",value:"EXPORT_MEMBERS"},{label:"Delete group",value:"DELETE_GROUP"}];function Kl(e){var t=e.group,r=e.handleUpdateAll,n=e.handleRedirect,a=e.handleExport,o=Object(_.useContext)(Cl),c=o.context,i=o.updateContext,l=function(e){"DELETE_GROUP"===e.value?i({section:"delete"}):"EDIT_GROUP"===e.value?n("/groups/".concat(c.id,"/edit")):"CREATE_GROUP_COMPETITION"===e.value?n("/competitions/create?groupId=".concat(c.id)):"EXPORT_MEMBERS"===e.value&&a()};return t?S.a.createElement(fn,{title:t.name,badges:t.verified?[Ul]:[],renderLeft:function(){return t.verified?S.a.createElement(at,{text:Ul.text,hoverText:Ul.hoverText}):null},renderRight:function(){return S.a.createElement(S.a.Fragment,null,S.a.createElement(it,{text:"Update all",onClick:r}),S.a.createElement(Gt,{options:Hl,onSelect:l},S.a.createElement("button",{className:"header__options-btn",type:"button"},S.a.createElement("img",{src:"/img/icons/options.svg",alt:""}))))}}):null}Kl.defaultProps={group:void 0};var Vl=Kl;function Bl(){Bl=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var zl=function(e,t,r,n){return function(){var a=Object(Mt.a)(Bl().mark((function a(o){var c,i,l,s;return Bl().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o(se.onFetchRequest()),a.prev=1,c=Kt.fetchGroupHiscores.replace(":id",e),i={metric:t,limit:r,offset:n},a.next=6,Vt.get(c,{params:i});case 6:l=a.sent,s=l.data,o(se.onFetchSuccess({groupId:e,hiscores:s,refresh:!n})),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),o(se.onFetchError(a.t0.message.toString()));case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}()},Wl=Object(V.a)((function(e){return e.hiscores}),(function(e){return e.isFetching}));function Xl(e){return function(t){return Jl(t)[e]}}var Jl=Object(V.a)((function(e){return e.hiscores.groupHiscores}),(function(e){return Object(ye.mapValues)(e,(function(e){return e.map((function(e,t){return Object(G.a)(Object(G.a)({},e),{},{groupRank:t+1})}))}))})),Zl=vt.METRICS.map((function(e){return{label:vt.MetricProps[e].name,icon:jt(e,!0),value:e}}));var $l=function(){var e=Object(P.b)(),t=Object(_.useContext)(Cl),r=t.context,n=t.updateContext,a=r.id,o=r.metric,c=Kn({resultsPerPage:50,action:function(t,r,n){if(!n)return;e(w.fetchGroupHiscores(a,o,t,r))},selector:O.getGroupHiscores(a)}),i=c.data,l=c.pageIndex,s=c.isFullyLoaded,u=c.reloadData,m=Object(P.c)(O.isFetching)&&0===l,f=Zl.findIndex((function(e){return e.value===o})),p=function(e){var t={uniqueKey:function(e){return"".concat(e.player.id,"-").concat(e.rank)},columns:[{key:"groupRank",label:"Rank"},{key:"displayName",label:"Name",className:function(){return"-primary"},get:function(e){return e.player.displayName},transform:function(e,t){return S.a.createElement(Ze.b,{to:"/players/".concat(t.player.username)},S.a.createElement(gn,Object.assign({name:t.player.displayName},t.player)))}},{key:vt.MetricProps[e].measure,get:function(t){return t.data[vt.MetricProps[e].measure]},transform:function(e){return S.a.createElement(un,{value:e})}},{key:"updatedAt",label:"Last updated",get:function(e){return e.player.updatedAt},transform:function(e){return"".concat(ht(e,new Date,2,!0)," ago")}}]};Object(vt.isSkill)(e)&&t.columns.splice(3,0,{key:"level",get:function(e){return e.data.level},transform:function(e,t){return S.a.createElement(un,{value:t.data.level})}});return t}(o),d=p.uniqueKey,h=p.columns,v=Object(_.useCallback)(Object(ye.debounce)(u,500,{leading:!0}),[a,o]);return Object(_.useEffect)((function(){return v({})}),[v,a,o]),S.a.createElement(S.a.Fragment,null,S.a.createElement(Qr,{options:Zl,selectedIndex:f,onSelect:function(e){n({metric:e.value})},search:!0}),m?S.a.createElement(Nn,{size:20}):S.a.createElement(Nr,{uniqueKeySelector:d,rows:i,columns:h}),!s&&S.a.createElement("b",{className:"loading-indicator"},"Loading..."))},Ql={uniqueKeySelector:function(e){return e.player.username},columns:[{key:"displayName",label:"Name",className:function(){return"-primary"},get:function(e){return e.player.displayName},transform:function(e,t){return S.a.createElement(Ze.b,{to:"/players/".concat(t.player.username)},S.a.createElement(gn,Object.assign({name:t.player.displayName},t.player)))}},{key:"role",transform:function(e){return S.a.createElement(yn,{role:e})}},{key:"exp",label:"Exp.",get:function(e){return e.player.exp},transform:function(e){return-1===e?S.a.createElement(In,{value:"---",popupValue:"Unranked"}):S.a.createElement(un,{value:e})}},{key:"ehp",label:"EHP",get:function(e){return e.player.ehp},transform:function(e){return S.a.createElement(un,{value:Math.round(e)})}},{key:"ehb",label:"EHB",get:function(e){return e.player.ehb},transform:function(e){return S.a.createElement(un,{value:Math.round(e)})}},{key:"updatedAt",label:"Last updated",get:function(e){return e.player.updatedAt},transform:function(e){return"".concat(ht(e,new Date,2,!0)," ago")}}]};var es=function(){var e=Object(_.useContext)(Cl).context.id,t=Object(P.c)(c.getGroup(e));return t&&t.memberships?S.a.createElement(Nr,{rows:t.memberships,columns:Ql.columns,uniqueKeySelector:Ql.uniqueKeySelector}):S.a.createElement(Nn,{size:10})},ts={uniqueKey:function(e){return e.id},columns:[{key:"oldName",label:"Old name",className:function(){return"-primary"}},{key:"arrow",label:"",isSortable:!1,className:function(){return"-break-medium"},transform:function(){return"\u2192"}},{key:"newName",label:"New name",className:function(){return"-primary"}},{key:"displayName",label:"Current name",get:function(e){return e.player.displayName},className:function(){return"-primary -break-medium"},transform:function(e,t){return S.a.createElement(Ze.b,{to:"/players/".concat(t.player.username,"/names")},S.a.createElement(gn,Object.assign({name:e},t.player)))}},{key:"resolvedAt",label:"Approval date",transform:function(e){return"".concat(ht(e,new Date,2,!0)," ago")}}]};var rs=function(){var e=Object(P.b)(),t=Object(_.useContext)(Cl).context.id,r=Kn({resultsPerPage:20,action:function(r,n,a){if(!a)return;e(b.fetchGroupNameChanges(t,r,n))},selector:E.getGroupNameChanges(t)}),n=r.isFullyLoaded,a=r.pageIndex,o=r.reloadData,c=Object(P.c)(E.getGroupNameChanges(t)),i=Object(P.c)(E.isFetchingGroupNameChanges)&&0===a,l=Object(_.useCallback)(Object(ye.debounce)(o,500,{leading:!0}),[t]);return Object(_.useEffect)((function(){return l({})}),[l,t]),S.a.createElement(S.a.Fragment,null,i?S.a.createElement(Nn,{size:20}):S.a.createElement(Nr,{uniqueKeySelector:ts.uniqueKey,rows:c,columns:ts.columns,listStyle:!0,listStyleHeaders:!0}),!n&&S.a.createElement("b",{className:"loading-indicator"},"Loading..."))},ns=vt.METRICS.map((function(e){return{label:vt.MetricProps[e].name,icon:jt(e,!0),value:e}})),as=Object(T.a)(vt.PERIODS.map((function(e){return{label:vt.PeriodProps[e].name,value:e}})));var os=function(){var e=Object(P.b)(),t=Object(_.useContext)(Cl),r=t.context,n=t.updateContext,a=r.id,o=r.metric,c=r.period,i=Kn({resultsPerPage:50,action:function(t,r,n){if(!n)return;e(m.fetchGroupRecords(a,o,c,t,r))},selector:f.getGroupRecords(a)}),l=i.data,s=i.pageIndex,u=i.isFullyLoaded,p=i.reloadData,d=Object(P.c)(f.isFetchingGroupRecords)&&0===s,h=ns.findIndex((function(e){return e.value===o})),v=as.findIndex((function(e){return e.value===c})),g=function(e,t){return{uniqueKey:function(r){return"".concat(r.player.id,"-").concat(e,"-").concat(t)},columns:[{key:"rank"},{key:"displayName",label:"Name",className:function(){return"-primary"},get:function(e){return e.player.displayName},transform:function(e,t){return S.a.createElement(Ze.b,{to:"/players/".concat(t.player.username)},S.a.createElement(gn,Object.assign({name:t.player.displayName},t.player)))}},{key:"value",transform:function(e){return S.a.createElement(un,{value:e,isColored:!0,isSigned:!0})}},{key:"updatedAt",label:"Date",get:function(e){return e.updatedAt},transform:function(e){return ft(e,"DD MMM, YYYY")}}]}}(o,c),y=g.uniqueKey,b=g.columns,E=Object(_.useCallback)(Object(ye.debounce)(p,500,{leading:!0}),[a,o,c]);return Object(_.useEffect)((function(){return E({})}),[E,a,o,c]),S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"options-bar"},S.a.createElement(Qr,{options:ns,selectedIndex:h,onSelect:function(e){n({metric:e.value})},search:!0}),S.a.createElement(Qr,{options:as,selectedIndex:v,onSelect:function(e){n({period:e.value})}})),d?S.a.createElement(Nn,{size:20}):S.a.createElement(Nr,{uniqueKeySelector:y,rows:l,columns:b}),!u&&S.a.createElement("b",{className:"loading-indicator"},"Loading..."))},cs=["Average member stats","Metric leaders"];function is(e){return void 0!==e.experience?e.experience:void 0!==e.kills?e.kills:e.score}var ls=function(){var e=Object(P.b)(),t=Object(_.useContext)(Cl).context.id,r=Object(P.c)(c.getGroup(t)),n=Object(P.c)(c.isFetchingStatistics),a=Object(_.useState)(0),i=Object($e.a)(a,2),l=i[0],s=i[1],u=r.statistics,m=n||!r||!u,f=Object(_.useCallback)((function(){!r||r.statistics||n||e(o.fetchStatistics(t))}),[e,t,r,n]);return Object(_.useEffect)(f,[f,n]),S.a.createElement("div",{className:"group-statistics"},S.a.createElement("div",{className:"statistics-block__container"},S.a.createElement("div",{className:"statistics-block"},S.a.createElement("span",{className:"statistic-label"},"Maxed overall players"),S.a.createElement("b",{className:"statistic-value"},m?"Loading...":u.maxedTotalCount)),S.a.createElement("div",{className:"statistics-block"},S.a.createElement("span",{className:"statistic-label"},"126 Combat players"),S.a.createElement("b",{className:"statistic-value"},m?"Loading...":u.maxedCombatCount)),S.a.createElement("div",{className:"statistics-block"},S.a.createElement("span",{className:"statistic-label"},"Number of 200ms"),S.a.createElement("b",{className:"statistic-value"},m?"Loading...":u.maxed200msCount))),S.a.createElement("div",{className:"statistics-table"},S.a.createElement(Pn,{tabs:cs,selectedIndex:l,onTabSelected:s}),m?S.a.createElement(Nn,{size:20}):function(e,t){var r,n=1===t;r=n?e.metricLeaders:e.averageStats.data;var a=vt.SKILLS.filter((function(e){return"overall"!==e})).map((function(e){return Object(vt.getLevel)(r.skills[e].experience)})).reduce((function(e,t){return e+t})),o=[].concat(Object(T.a)(vt.SKILLS.map((function(e){var t=r.skills[e],n=t.experience,o=t.rank,c=t.player;return{metric:e,level:"overall"===e?a:Object(vt.getLevel)(n),experience:n,rank:o,ehp:0,username:c?c.displayName:null}}))),Object(T.a)(vt.BOSSES.map((function(e){var t=r.bosses[e],n=t.kills,a=t.rank,o=t.player;return{metric:e,kills:n,rank:a,ehp:0,username:o?o.displayName:null}}))),Object(T.a)(vt.ACTIVITIES.map((function(e){var t=r.activities[e],n=t.score,a=t.rank,o=t.player;return{metric:e,score:n,rank:a,ehp:0,username:o?o.displayName:null}})))),c=[{key:"metric",className:function(){return"-primary"},transform:function(e){return S.a.createElement("div",{className:"metric-tag"},S.a.createElement("img",{src:jt(e,!0),alt:""}),S.a.createElement("span",null,vt.MetricProps[e].name))}},{key:"level",get:function(e){return e.level||-1},transform:function(e){return-1===e?"---":e}},{key:"value",get:is,transform:function(e){return-1===e?"---":S.a.createElement(un,{value:e})}}];n&&(c.splice(1,0,{key:"username",transform:function(e){return e?S.a.createElement(Ze.b,{to:"/players/".concat(e)},e):"---"}}),c.push({key:"rank",transform:function(e){return-1===e?"---":S.a.createElement(un,{value:e})}}));return S.a.createElement(Nr,{rows:o,columns:c,uniqueKeySelector:function(e){return e.metric}})}(u,l)))};r(222);function ss(e){var t=e.competitions;if(!t)return S.a.createElement("div",{className:"competition-widget"},S.a.createElement("div",{className:"competition-icon -placeholder"}),S.a.createElement("div",{className:"competition-info"},S.a.createElement("span",{className:"competition-info__title -placeholder"}),S.a.createElement("b",{className:"competition-info__time -placeholder"})));var r=t.filter((function(e){return"ongoing"===e.status})),n=t.filter((function(e){return"upcoming"===e.status}));if(r.length>0){var a=r.sort((function(e,t){return e.startsAt.getTime()-t.startsAt.getTime()}))[0];return S.a.createElement(Ze.b,{className:"competition-widget -clickable",to:"/competitions/".concat(a.id)},S.a.createElement("img",{className:"competition-icon",src:jt(a.metric),alt:""}),S.a.createElement("div",{className:"competition-info"},S.a.createElement("b",{className:"competition-info__title"},a.title),S.a.createElement("span",{className:"competition-info__time"},"Ongoing")))}if(n.length>0){var o=n.sort((function(e,t){return e.startsAt.getTime()-t.startsAt.getTime()}))[0];return S.a.createElement(Ze.b,{className:"competition-widget -clickable",to:"/competitions/".concat(o.id)},S.a.createElement("img",{className:"competition-icon",src:jt(o.metric),alt:""}),S.a.createElement("div",{className:"competition-info"},S.a.createElement("b",{className:"competition-info__title"},o.title),S.a.createElement("span",{className:"competition-info__time"},"Upcoming")))}return S.a.createElement("div",{className:"competition-widget"},S.a.createElement("b",{className:"no-competitions"},"No upcoming competitions"))}ss.defaultProps={competitions:void 0};var us=ss;r(223);var ms=function(e){var t=e.group,r=e.isLoading;if(!t||r)return S.a.createElement("div",{className:"top-player-widget"},S.a.createElement("b",{className:"top__name -placeholder"}),S.a.createElement("span",{className:"top__gained -placeholder"}));var n=t.monthlyTopPlayer;if(!n)return S.a.createElement("div",{className:"top-player-widget"},S.a.createElement("b",{className:"top__name"},"---"),S.a.createElement("span",{className:"top__gained"},"0 exp gained"));var a=n.player,o=n.data;return S.a.createElement(Ze.b,{className:"top-player-widget -clickable",to:"/players/".concat(a.username)},S.a.createElement("b",{className:"top__name"},a.displayName),S.a.createElement("span",{className:"top__gained"},"".concat(Nt(o.gained||0)," exp gained")))};r(224);var fs=function(e){var t=e.group,r=e.isLoading;if(!t||r)return S.a.createElement("div",{className:"total-exp-widget"},S.a.createElement("img",{className:"total-icon",src:jt("overall"),alt:""}),S.a.createElement("div",{className:"total-info"},S.a.createElement("b",{className:"total-info__metric -placeholder"}),S.a.createElement("span",{className:"total-info__gained -placeholder"})));var n=t.totalExperience;return S.a.createElement("div",{className:"total-exp-widget"},S.a.createElement("img",{className:"total-icon",src:jt("overall"),alt:""}),S.a.createElement("div",{className:"total-info"},S.a.createElement("b",{className:"total-info__metric"},"Overall Exp."),S.a.createElement("span",{className:"total-info__gained"},Nt(n))))};r(225);var ps=function(e){var t=e.group,r=e.isLoading;if(!t||r)return S.a.createElement("div",{className:"total-ehp-widget"},S.a.createElement("img",{className:"total-icon",src:jt("ehp"),alt:""}),S.a.createElement("div",{className:"total-info"},S.a.createElement("b",{className:"total-info__metric -placeholder"}),S.a.createElement("span",{className:"total-info__gained -placeholder"})));var n=t.totalEHP;return S.a.createElement("div",{className:"total-ehp-widget"},S.a.createElement("img",{className:"total-icon",src:jt("ehp"),alt:""}),S.a.createElement("div",{className:"total-info"},S.a.createElement("b",{className:"total-info__metric"},"Hours Played"),S.a.createElement("span",{className:"total-info__gained"},Nt(n))))};r(226);var ds=S.a.memo((function(e){var t=e.group,r=Object(_.useMemo)((function(){return function(e){var t=e.id,r=e.members,n=e.memberCount,a=e.clanChat,o=e.homeworld,c=e.description,i=e.createdAt,l=e.updatedAt;return[{key:"Id",value:t},{key:"Description",value:c||"Unknown"},{key:"Clan chat",value:a||"Unknown"},{key:"Homeworld",value:o||"Unknown"},{key:"Members",value:r&&r.length>0?r.length:n||"Unknown"},{key:"Created at",value:ft(i,"DD MMM YYYY, HH:mm")},{key:"Last updated at",value:ft(l,"DD MMM YYYY, HH:mm")}]}(t)}),[t]);return S.a.createElement(Cr,{data:r})}));var hs=function(){var e=Object(_.useContext)(Cl).context.id,t=Object(P.c)(c.isFetchingMonthlyTop),r=Object(P.c)(c.getGroup(e)),n=Object(P.c)(d.getGroupCompetitions(e));return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"col-lg-3 col-md-6"},S.a.createElement("span",{className:"widget-label"},"Featured Competition"),S.a.createElement(us,{competitions:n})),S.a.createElement("div",{className:"col-lg-3 col-md-6"},S.a.createElement("span",{className:"widget-label"},"Monthly Top Player"),S.a.createElement(ms,{group:r,isLoading:t})),S.a.createElement("div",{className:"col-lg-3 col-md-6"},S.a.createElement("span",{className:"widget-label"},"Total Experience"),S.a.createElement(fs,{group:r,isLoading:!r.memberships})),S.a.createElement("div",{className:"col-lg-3 col-md-6"},S.a.createElement("span",{className:"widget-label"},"Total EHP"),S.a.createElement(ps,{group:r,isLoading:!r.memberships})))},vs=(r(227),["Members","Competitions","Hiscores","Gained","Records","Achievements","Name Changes","Statistics"]);function gs(e){var t=e.id,r=e.section,n=e.metric,a=e.period,o=e.startDate,c=e.endDate,i=new pa("/groups/".concat(t));r&&"members"!==r&&i.appendToPath("/".concat(r.replace(" ","-"))),n&&r&&["hiscores","gained","records"].includes(r.toLowerCase())&&i.appendSearchParam("metric",n),a&&"week"!==a&&r&&["gained","records"].includes(r.toLowerCase())&&i.appendSearchParam("period",a);var l=i.getSearchParam("period");return l&&"custom"===l.value&&o&&c&&mt(o)&&mt(c)&&(i.appendSearchParam("startDate",o.toISOString()),i.appendSearchParam("endDate",c.toISOString())),i.getPath()}function ys(e,t){var r=e.id,n=e.section,a=["delete"].concat(Object(T.a)(vs.map((function(e){return e.toLowerCase()})))),o=t.metric&&vt.METRICS.includes(t.metric.toLowerCase()),c=t.period&&vt.PERIODS.includes(t.period.toLowerCase()),i=t.startDate&&!c&&mt(t.startDate),l=t.endDate&&!c&&mt(t.endDate),s=o?t.metric:"overall",u=i?new Date(t.startDate):null,m=l?new Date(t.endDate):null,f=c||"custom"===t.period&&"gained"===n?t.period:"week",p=n?n.replace("-"," "):void 0;return{id:parseInt(r,10),section:n&&a.includes(p)?p:"members",metric:s,period:f,startDate:u,endDate:m}}var bs=function(){var e=Object(P.b)(),t=Object(Je.f)(),r=Wn(gs,ys),n=r.context,a=r.updateContext,i=n.id,l=n.section,s=Object(_.useState)(!1),u=Object($e.a)(s,2),m=u[0],f=u[1],d=function(e){return e&&"delete"!==e?vs.map((function(e){return e.toLowerCase()})).indexOf(e):0}(l),h=Object(P.c)(c.getGroup(i)),v="delete"===l&&!!h,g=Object(_.useCallback)((function(){h&&h.memberships||e(o.fetchDetails(i)).then((function(r){r.payload.data||t.push("/404"),e(o.fetchMonthlyTop(i)),e(p.fetchGroupCompetitions(i))}))}),[e,t,i,h]);return Object(_.useEffect)(g,[g]),h?S.a.createElement(Cl.Provider,{value:{context:n,updateContext:a}},S.a.createElement("div",{className:"group__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,h.name)),S.a.createElement("div",{className:"group__header row"},S.a.createElement("div",{className:"col"},S.a.createElement(Vl,{group:h,handleUpdateAll:function(){return f(!0)},handleRedirect:function(e){t.push(e)},handleExport:function(){var e="".concat(h.name," Members.csv"),t=h.memberships.map((function(e){return{name:e.player.displayName}}));_l()(t,{filename:e})}}))),S.a.createElement("div",{className:"group__widgets row"},S.a.createElement(hs,null)),S.a.createElement("div",{className:"group__content row"},S.a.createElement("div",{className:"col-12"},S.a.createElement(Pn,{tabs:vs,selectedIndex:d,onTabSelected:function(e){a({section:vs[e].toLowerCase()})}})),S.a.createElement("div",{className:"col-md-4"},S.a.createElement(ds,{group:h})),S.a.createElement("div",{className:"col-md-8"},("members"===l||"delete"===l)&&S.a.createElement(es,null),"hiscores"===l&&S.a.createElement($l,null),"gained"===l&&S.a.createElement(Yl,null),"records"===l&&S.a.createElement(os,null),"achievements"===l&&S.a.createElement(Tl,null),"name changes"===l&&S.a.createElement(rs,null),"statistics"===l&&S.a.createElement(ls,null),"competitions"===l&&S.a.createElement(Il,null))),v&&S.a.createElement(Ll,{group:h,onCancel:function(){return a({section:"members"})}}),m&&S.a.createElement(pc,{entityName:"group",onCancel:function(){return f(!1)},onSubmit:function(t){e(o.updateAll(i,t)).then((function(e){e.payload.error||f(!1)}))}}))):S.a.createElement(Ar,null)};r(228);function Es(){Es=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var ws=/https:\/\/(?:www\.)?(crystalmathlabs|templeosrs)\.com\/(?:tracker\/virtualhiscores\.php\?page=statistics&group=|groups\/(?:stats|overview|members|records)\.php\?id=)(\d+)/;var Os=function(e){var t=e.onConfirm,r=e.onClose,n=Object(P.b)(),a=Object(_.useState)(!1),c=Object($e.a)(a,2),i=c[0],l=c[1],s=Object(_.useState)([]),u=Object($e.a)(s,2),m=u[0],f=u[1],p=Object(_.useState)([]),d=Object($e.a)(p,2),h=d[0],v=d[1],g=Object(_.useState)(""),y=Object($e.a)(g,2),b=y[0],E=y[1],w=Object(_.useState)(null),O=Object($e.a)(w,2),j=O[0],x=O[1],N=Object(ye.debounce)(Object(Mt.a)(Es().mark((function e(){var t,r,a;return Es().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j){e.next=2;break}return e.abrupt("return");case 2:if("CML"!==j.site){e.next=8;break}return e.next=5,n(o.fetchCMLMembers(j.groupId));case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,n(o.fetchTempleMembers(j.groupId));case 10:e.t0=e.sent;case 11:if(t=e.t0,(r=t.payload)&&r.data){e.next=15;break}return e.abrupt("return");case 15:a=r.data,f(a.members||[]),v(a.leaders||[]),E(a.name||"");case 19:case"end":return e.stop()}}),e)}))),500);return Object(_.useEffect)(N,[j]),S.a.createElement("div",{className:"migrate-players"},S.a.createElement("div",{className:"migrate-players__modal"},S.a.createElement("h4",{className:"modal-title"},"Migrate from site"),S.a.createElement(Jr,{placeholder:"Link to CML or TempleOSRS group",onChange:function(e){var t=function(e){var t=e.match(ws)||[];if(!t.length)return null;var r=parseInt(t[2],10),n=function(e){switch(e){case"crystalmathlabs":return"CML";case"templeosrs":return"TempleOSRS";default:return""}}(t[1]);return{link:e,site:n,groupId:r}}(e.target.value);t&&x(t)}}),(m.length>0||h.length>0)&&S.a.createElement("div",null,S.a.createElement("div",{className:"import-info"},S.a.createElement("span",{className:"group-name"},b||"".concat(j.site," Group ").concat(j.groupId)),S.a.createElement("span",{className:"member-stats"},"".concat(m.length," Members | ").concat(h.length," Leaders"))),S.a.createElement("textarea",{className:"modal-text",placeholder:"# Imported members",value:[].concat(Object(T.a)(h),Object(T.a)(m)).join("\n"),readOnly:!0}),S.a.createElement("div",{className:"modal-replace"},S.a.createElement("span",{className:"modal-replace__label"},"Replace existing usernames"),S.a.createElement(jn,{on:i,onToggle:function(){l(!i)}}))),S.a.createElement("div",{className:"modal-actions"},S.a.createElement(Dn,{text:"Cancel",onClick:r}),S.a.createElement(it,{text:"Confirm",onClick:function(){t(m,h,i)}}))))};r(229);var js=function(e){var t=e.entity,r=e.onConfirm,n=e.onClose;return S.a.createElement("div",{className:"empty-confirmation-modal"},S.a.createElement("div",{className:"empty-confirmation-modal__modal"},S.a.createElement("h1",{className:"modal-title"},"No ".concat(t.group,"s!")),S.a.createElement("p",{className:"modal-description"},"You are creating a ".concat(t.type," with no ").concat(t.group,"s. Are you sure you want to continue?")),S.a.createElement("div",{className:"modal-actions"},S.a.createElement(Dn,{text:"No",onClick:n}),S.a.createElement(it,{text:"Yes",onClick:function(){r(),n()}}))))};r(230);function xs(){xs=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var Ns=function(){var e=Object(Je.f)(),t=Object(P.b)(),r=Object(P.c)(c.isCreating),n=Object(P.c)(c.getError),a=Object(_.useState)(""),i=Object($e.a)(a,2),l=i[0],s=i[1],u=Object(_.useState)(""),m=Object($e.a)(u,2),f=m[0],p=m[1],d=Object(_.useState)(""),h=Object($e.a)(d,2),v=h[0],g=h[1],y=Object(_.useState)(""),b=Object($e.a)(y,2),E=b[0],w=b[1],O=Object(_.useState)([]),j=Object($e.a)(O,2),x=j[0],N=j[1],k=Object(_.useState)(!1),L=Object($e.a)(k,2),C=L[0],F=L[1],D=Object(_.useState)(!1),A=Object($e.a)(D,2),I=A[0],G=A[1],R=Object(_.useState)(!1),M=Object($e.a)(R,2),q=M[0],Y=M[1],U=Object(_.useState)(""),H=Object($e.a)(U,2),K=H[0],V=H[1],B=Object(_.useState)(-1),z=Object($e.a)(B,2),W=z[0],X=z[1],J=function(){var e=Object(Mt.a)(xs().mark((function e(){var r,n;return xs().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(o.create(l,f,v,E,x));case 2:r=e.sent,(n=r.payload)&&n.data&&!n.error&&(V(n.data.verificationCode),X(n.data.group.id));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=Object(_.useCallback)((function(){return F(!1)}),[]),$=Object(_.useCallback)((function(){return F(!0)}),[]),Q=Object(_.useCallback)((function(){return G(!1)}),[]),ee=Object(_.useCallback)((function(){return G(!0)}),[]),te=Object(_.useCallback)((function(){return Y(!1)}),[]),re=Object(_.useCallback)((function(){return Y(!0)}),[]),ne=Object(_.useCallback)((function(e){s(e.target.value)}),[]),ae=Object(_.useCallback)((function(e){p(e.target.value)}),[]),oe=Object(_.useCallback)((function(e){g(e.target.value)}),[]),ce=Object(_.useCallback)((function(e){w(e.target.value)}),[]),ie=Object(_.useCallback)((function(e){e&&0!==e.length&&N((function(t){if(0!==t.filter((function(t){return t.username.toLowerCase()===e.toLowerCase()})).length)return t;var r={username:e,displayName:e,role:"member"};return[].concat(Object(T.a)(t),[r])}))}),[x]),le=Object(_.useCallback)((function(e){N((function(t){return Object(T.a)(t.filter((function(t){return t.username!==e})))}))}),[x]),se=Object(_.useCallback)((function(e,t){N((function(r){var n=Object(T.a)(r),a=n.find((function(t){return t.username===e}));return a?(a.role=t,n):r}))}),[x]),ue=Object(_.useCallback)((function(){e.push("/groups/".concat(W))}),[W]),me=Object(_.useCallback)(J,[l,v,x]),fe=Object(_.useCallback)((function(e,t){N((function(r){if(t)return Object(T.a)(Object(ye.uniq)(e).map((function(e){return{username:e,displayName:e,role:"member"}})));var n=r.map((function(e){return e.username.toLowerCase()})),a=e.filter((function(e){return!n.includes(e.toLowerCase())}));return[].concat(Object(T.a)(r),Object(T.a)(Object(ye.uniq)(a).map((function(e){return{username:e,displayName:e,role:"member"}}))))})),F(!1)}),[]),pe=Object(_.useCallback)((function(e,t,r){N((function(n){var a=Object(ye.uniq)([].concat(Object(T.a)(t),Object(T.a)(e)));if(r)return a.map((function(e){return{username:e,displayName:e,role:t.includes(e)?"leader":"member"}}));var o=n.map((function(e){return e.username.toLowerCase()})),c=a.filter((function(e){return!o.includes(e.toLowerCase())}));return[].concat(Object(T.a)(n),Object(T.a)(Object(ye.uniq)(c).map((function(e){return{username:e,displayName:e,role:t.includes(e)?"leader":"member"}}))))})),G(!1)}),[]),de=0===x.length;return S.a.createElement("div",{className:"create-group__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"Create new group")),S.a.createElement("div",{className:"col"},S.a.createElement(pn,{title:"Create new group"}),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Group name"),S.a.createElement(Jr,{value:l,placeholder:"Ex: Varrock Titans",onChange:ne,maxCharacters:30})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Description"),S.a.createElement(Jr,{value:f,placeholder:"Ex: This is the summary about the group",onChange:ae,maxCharacters:100})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Clan Chat"),S.a.createElement(Jr,{value:v,placeholder:"Ex: titanZ",onChange:oe,maxCharacters:12})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Homeworld"),S.a.createElement(Jr,{value:E,placeholder:"Ex: 492",onChange:ce,maxCharacters:4})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},S.a.createElement("div",null,"Members",S.a.createElement("span",{className:"form-row__label-info"},"(".concat(x.length," selected)"))),S.a.createElement("div",null,S.a.createElement(Dn,{text:"Import list",onClick:$}),S.a.createElement("span",{className:"separator"},"|"),S.a.createElement(Dn,{text:"Migrate",onClick:ee}))),S.a.createElement(rn,{members:x,roles:Object.entries(vt.GroupRoleProps).map((function(e){var t=Object($e.a)(e,2),r=t[0];return{label:t[1].name,value:r,icon:wt(r)}})),invalidUsernames:n.data,onMemberAdded:ie,onMemberRemoved:le,onMemberRoleSwitched:se})),S.a.createElement("div",{className:"form-row form-actions"},S.a.createElement(it,{text:"Confirm",onClick:de?re:me,loading:r}))),C&&S.a.createElement(Vo,{onClose:Z,onConfirm:fe}),I&&S.a.createElement(Os,{onClose:Q,onConfirm:pe}),K&&S.a.createElement(Ro,{entity:"group",verificationCode:K,onConfirm:ue}),q&&S.a.createElement(js,{entity:{type:"group",group:"member"},onClose:te,onConfirm:me}))};r(231);function ks(){ks=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var _s=function(){var e=Object(Je.h)().id,t=Object(Je.f)(),r=Object(P.b)(),n=Object(_.useState)(""),a=Object($e.a)(n,2),i=a[0],l=a[1],s=Object(_.useState)(""),u=Object($e.a)(s,2),m=u[0],f=u[1],p=Object(_.useState)(""),d=Object($e.a)(p,2),h=d[0],v=d[1],g=Object(_.useState)(""),y=Object($e.a)(g,2),b=y[0],E=y[1],w=Object(_.useState)([]),O=Object($e.a)(w,2),j=O[0],x=O[1],N=Object(_.useState)([]),k=Object($e.a)(N,2),L=k[0],C=k[1],F=Object(_.useState)(!1),D=Object($e.a)(F,2),A=D[0],I=D[1],G=Object(_.useState)(!1),R=Object($e.a)(G,2),M=R[0],q=R[1],Y=Object(_.useState)(""),U=Object($e.a)(Y,2),H=U[0],K=U[1],V=Object(P.c)(c.getGroup(parseInt(e,10))),B=Object(P.c)(c.getError),z=Object(P.c)(c.isEditing),W=function(){var n=Object(Mt.a)(ks().mark((function n(){var a,c;return ks().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r(o.edit(e,i,m,h,b,j,H));case 2:a=n.sent,(c=a.payload)&&!c.error&&t.push("/groups/".concat(V.id));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),X=Object(_.useCallback)((function(){return I(!1)}),[]),J=Object(_.useCallback)((function(){return I(!0)}),[]),Z=Object(_.useCallback)((function(){return q(!1)}),[]),$=Object(_.useCallback)((function(){return q(!0)}),[]),Q=Object(_.useCallback)((function(e){l(e.target.value)}),[]),ee=Object(_.useCallback)((function(e){f(e.target.value)}),[]),te=Object(_.useCallback)((function(e){v(e.target.value)}),[]),re=Object(_.useCallback)((function(e){E(e.target.value)}),[]),ne=Object(_.useCallback)((function(e){e&&0!==e.length&&x((function(t){if(0!==t.filter((function(t){return t.username.toLowerCase()===e.toLowerCase()})).length)return t;var r={username:e,displayName:e,role:"member"};return[].concat(Object(T.a)(t),[r])}))}),[j]),ae=Object(_.useCallback)((function(e){x((function(t){return Object(T.a)(t.filter((function(t){return t.username!==e})))}))}),[j]),oe=Object(_.useCallback)((function(e,t){x((function(r){var n=Object(T.a)(r),a=n.find((function(t){return t.username===e}));return a?(a.role=t,n):r}))}),[j]),ce=Object(_.useCallback)((function(e){K(e.target.value)}),[]),ie=Object(_.useCallback)((function(e,t){x((function(r){if(t)return Object(T.a)(Object(ye.uniq)(e).map((function(e){return{username:e,displayName:e,role:"member"}})));var n=r.map((function(e){return e.username.toLowerCase()})),a=e.filter((function(e){return!n.includes(e.toLowerCase())}));return[].concat(Object(T.a)(r),Object(T.a)(Object(ye.uniq)(a).map((function(e){return{username:e,displayName:e,role:"member"}}))))})),I(!1)}),[]),le=Object(_.useCallback)((function(){q(!1),se()}),[i,h,m,b,j,H]),se=Object(_.useCallback)(W,[i,h,m,b,j,H]);return Object(_.useEffect)((function(){r(o.fetchDetails(e))}),[r,e]),Object(_.useEffect)((function(){V&&(l(V.name),f(V.description||""),v(V.clanChat||""),E(V.homeworld||""),V.memberships&&x(V.memberships.map((function(e){var t=e.role,r=e.player;return{username:r.username,displayName:r.displayName,role:t}}))))}),[V]),Object(_.useEffect)((function(){if(V&&V.memberships){var e=V.memberships.filter((function(e){return!j.find((function(t){return yt(e.player.username)===yt(t.username)}))})).map((function(e){return e.player.displayName}));C(e)}}),[V,j]),V?S.a.createElement("div",{className:"edit-group__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"Edit: ".concat(V.name))),S.a.createElement("div",{className:"col"},S.a.createElement(pn,{title:"Edit group"}),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Group name"),S.a.createElement(Jr,{value:i,placeholder:"Ex: Varrock Titans",onChange:Q,maxCharacters:30})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Description"),S.a.createElement(Jr,{value:m,placeholder:"Ex: This is the summary about the group",onChange:ee,maxCharacters:100})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Clan chat"),S.a.createElement(Jr,{placeholder:"Ex: titanZ",value:h,onChange:te,maxCharacters:12})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Homeworld"),S.a.createElement(Jr,{placeholder:"Ex: 492",value:b,onChange:re,maxCharacters:4})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Members",S.a.createElement("span",{className:"form-row__label-info"},"(".concat(j.length," selected)")),S.a.createElement(Dn,{text:"Import list",onClick:J})),S.a.createElement(rn,{members:j,roles:Object.entries(vt.GroupRoleProps).map((function(e){var t=Object($e.a)(e,2),r=t[0];return{label:t[1].name,value:r,icon:wt(r)}})),invalidUsernames:B.data,onMemberAdded:ne,onMemberRemoved:ae,onMemberRoleSwitched:oe})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Verification code",S.a.createElement("span",{className:"form-row__label-info -right"},"Lost your verification code?",S.a.createElement("a",{href:"https://wiseoldman.net/discord",target:"_blank",rel:"noopener noreferrer"},"Join our discord"))),S.a.createElement(Jr,{type:"password",placeholder:"Ex: 123-456-789",onChange:ce})),S.a.createElement("div",{className:"form-row form-actions"},S.a.createElement(it,{text:"Confirm",onClick:L.length>0?$:se,loading:z}))),A&&S.a.createElement(Vo,{onClose:X,onConfirm:ie}),M&&S.a.createElement(ec,{modalView:"/groups/".concat(V.id,"/removeMembers"),players:L,onClose:Z,onConfirm:le})):null},Ss=Object(_.createContext)({}),Ls=[{label:"Any status",value:null},{label:"Pending",value:vt.NameChangeStatus.PENDING},{label:"Denied",value:vt.NameChangeStatus.DENIED},{label:"Approved",value:vt.NameChangeStatus.APPROVED}];var Cs=function(e){var t=e.onSearchInputChanged,r=Object(_.useContext)(Ss),n=r.context,a=r.updateContext,o=Ls.findIndex((function(e){return e.value===n.status}));return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"col-lg-8 col-md-6 col-sm-6"},S.a.createElement(Jr,{onChange:t,placeholder:"Search username"})),S.a.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6"},S.a.createElement(Qr,{options:Ls,selectedIndex:o,onSelect:function(e){e&&void 0!==e.value&&a({status:void 0===e.value?null:e.value})},search:!0})))},Ps=(r(232),{uniqueKey:function(e){return e.id},columns:[{key:"id"},{key:"oldName",className:function(){return"-primary"}},{key:"arrow",transform:function(){return"\u2192"}},{key:"newName",className:function(){return"-primary"}},{key:"createdAt",className:function(){return"-break-medium"},transform:function(e){return"Submitted ".concat(ht(e,new Date,2,!0)," ago")}},{key:"status",transform:xt,className:function(e){switch(e){case"denied":return"-negative";case"approved":return"-positive";default:return""}}}]});function Ts(e){var t=e.status,r=new pa("/names");return void 0!==t&&r.appendSearchParam("status",t),r.getPath()}function Fs(e,t){return{status:Object.values(vt.NameChangeStatus).includes(t.status)?t.status:null}}var Ds=function(){var e=Object(P.b)(),t=Object(_.useState)(""),r=Object($e.a)(t,2),n=r[0],a=r[1],o=Wn(Ts,Fs),c=o.context,i=o.updateContext,l=c.status,s=Kn({resultsPerPage:50,selector:E.getNameChanges,action:function(t,r,n){if(!n)return;e(b.fetchNameChanges(n,t,r))}}),u=s.isFullyLoaded,m=s.reloadData,f=Object(P.c)(E.getNameChanges),p=Object(P.c)(E.isFetching),d=Object(_.useCallback)(Object(ye.debounce)(m,500,{leading:!0,trailing:!0}),[]);return Object(_.useEffect)((function(){d({username:n,status:l})}),[n,l,d]),S.a.createElement(Ss.Provider,{value:{context:c,updateContext:i}},S.a.createElement("div",{className:"names__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"Name changes")),S.a.createElement("div",{className:"names__header row"},S.a.createElement("div",{className:"col"},S.a.createElement(pn,{title:"Name changes"})),S.a.createElement("div",{className:"col"},S.a.createElement(Dn,{text:"Submit new",url:"/names/submit"}))),S.a.createElement("div",{className:"names__options row"},S.a.createElement(Cs,{onSearchInputChanged:function(e){return a(e.target.value)}})),S.a.createElement("div",{className:"names__list row"},S.a.createElement("div",{className:"col"},!p||f&&0!==f.length?S.a.createElement(Nr,{uniqueKeySelector:Ps.uniqueKey,columns:Ps.columns,rows:f,listStyle:!0}):S.a.createElement(Nn,{size:5}))),S.a.createElement("div",{className:"row"},S.a.createElement("div",{className:"col"},!u&&S.a.createElement("b",{className:"loading-indicator"},"Loading...")))))};r(233);function As(){As=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var Is=function(){var e=Object(Je.h)().oldName,t=Object(Je.f)(),r=Object(P.b)(),n=Object(P.c)(E.isSubmitting),a=Object(_.useState)(e||""),o=Object($e.a)(a,2),c=o[0],i=o[1],l=Object(_.useState)(""),s=Object($e.a)(l,2),u=s[0],m=s[1],f=function(){var e=Object(Mt.a)(As().mark((function e(){var n,a;return As().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(b.submitNameChange(c,u));case 2:n=e.sent,(a=n.payload)&&a.data&&t.push("/names");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return S.a.createElement("div",{className:"submit-name-change__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"Submit name change")),S.a.createElement("div",{className:"col"},S.a.createElement(pn,{title:"Submit name change"}),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"Old name"),S.a.createElement(Jr,{placeholder:"Ex: Zezima",onChange:function(e){i(e.target.value)},value:c})),S.a.createElement("div",{className:"form-row"},S.a.createElement("span",{className:"form-row__label"},"New name"),S.a.createElement(Jr,{placeholder:"Ex: Lynx Titan",onChange:function(e){m(e.target.value)},value:u})),S.a.createElement("div",{className:"form-row form-actions"},S.a.createElement(it,{text:"Confirm",onClick:f,loading:n}))))};function Gs(){Gs=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var Rs=function(e,t,r){return function(){var n=Object(Mt.a)(Gs().mark((function n(a){var o,c,i,l;return Gs().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(De.onFetchRequest()),n.prev=1,o=Object(G.a)(Object(G.a)({},e),{},{limit:t,offset:r}),n.next=5,Vt.get(Kt.fetchLeaderboards,{params:o});case 5:c=n.sent,i=c.data,l=!r,a(De.onFetchSuccess({data:i,refresh:l})),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),a(De.onFetchError(n.t0.message.toString()));case 14:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()},Ms=function(e){return e.leaderboards},qs=Object(V.a)(Ms,(function(e){return e.error})),Ys=Object(V.a)(Ms,(function(e){return e.isFetching})),Us=Object(V.a)((function(e){return e.leaderboards.leaderboards}),(function(e){return e.map((function(e,t){return Object(G.a)(Object(G.a)({},e),{},{rank:t+1})}))})),Hs=Object(_.createContext)({});var Ks=function(){var e=Object(_.useContext)(Hs).context.metric,t=Object(_.useMemo)((function(){return function(e){return{uniqueKey:function(e){return e.id},columns:[{key:"rank",label:"Rank"},{key:"displayName",label:"Name",className:function(){return"-primary"},transform:function(e,t){return S.a.createElement(Ze.b,{to:"/players/".concat(t.username)},S.a.createElement(gn,Object.assign({name:t.displayName},t)))}},{key:e,transform:function(e){return"".concat(Nt(e)," hours")}},{key:"updatedAt",label:"Last updated",transform:function(e,t){return"Updated ".concat(ht(t.updatedAt,new Date,2,!0)," ago")}}]}}(e)}),[e]),r=Object(P.c)(x.getLeaderboards);return!Object(P.c)(x.isFetching)||r&&0!==r.length?S.a.createElement(Nr,{uniqueKeySelector:t.uniqueKey,columns:t.columns,rows:r,listStyle:!0}):S.a.createElement(Nn,{size:20})},Vs=vt.PLAYER_TYPES.filter((function(e){return e!==vt.PlayerType.UNKNOWN})).map((function(e){return{label:vt.PlayerTypeProps[e].name,icon:bt(e),value:e}})),Bs=Object(T.a)(vt.PLAYER_BUILDS.map((function(e){return{label:vt.PlayerBuildProps[e].name,value:e}}))),zs=[].concat(Object(T.a)(vt.COMPUTED_METRICS),["ehp+ehb"]).map((function(e){return{label:"ehp+ehb"===e?"EHP + EHB":vt.MetricProps[e].name,icon:jt(e,!0),value:e}})),Ws=[{label:"All countries",value:null}].concat(Object(T.a)(Object.entries(vt.CountryProps).map((function(e){var t=Object($e.a)(e,2),r=t[0];return{label:t[1].name,icon:"/img/flags/".concat(r,".svg"),value:r}}))));var Xs=function(){var e=Object(_.useContext)(Hs),t=e.context,r=e.updateContext,n=t.metric,a=t.type,o=t.build,c=t.country,i=zs.findIndex((function(e){return e.value===n})),l=Vs.findIndex((function(e){return e.value===a})),s=Bs.findIndex((function(e){return e.value===o})),u=Ws.findIndex((function(e){return e.value===c}));return S.a.createElement(S.a.Fragment,null,S.a.createElement("div",{className:"col-lg-2 col-md-3"},S.a.createElement(Qr,{options:zs,selectedIndex:i,onSelect:function(e){e&&e.value&&r({metric:e.value})},search:!0})),S.a.createElement("div",{className:"col-lg-3 col-md-5"},S.a.createElement(Qr,{options:Vs,selectedIndex:l,onSelect:function(e){r({type:e.value})}})),S.a.createElement("div",{className:"col-lg-3 col-md-5"},S.a.createElement(Qr,{options:Bs,selectedIndex:s,onSelect:function(e){r({build:e.value})}})),S.a.createElement("div",{className:"col-lg-4 col-md-5"},S.a.createElement(Qr,{options:Ws,selectedIndex:u,onSelect:function(e){r({country:e.value})},search:!0})))},Js=(r(234),["ehp","ehb","ehp+ehb"]);function Zs(e){var t=e.metric,r=e.type,n=e.build,a=e.country,o=new pa("/leaderboards");return t&&"ehp"!==t&&Js.includes(t)&&o.appendToPath("/".concat(t)),r&&"regular"!==r&&vt.PLAYER_TYPES.includes(r.toLowerCase())&&o.appendSearchParam("type",r.toLowerCase()),n&&vt.PLAYER_BUILDS.includes(n.toLowerCase())&&o.appendSearchParam("build",n.toLowerCase()),a&&vt.COUNTRY_CODES.includes(a)&&o.appendSearchParam("country",a),o.getPath()}function $s(e,t){var r=e.metric,n=t.type,a=t.build,o=t.country,c=r&&Js.includes(r.toLowerCase()),i=n&&vt.PLAYER_TYPES.includes(n.toLowerCase()),l=a&&vt.PLAYER_BUILDS.includes(a.toLowerCase()),s=o&&vt.COUNTRY_CODES.includes(o.toUpperCase());return{metric:c?r.toLowerCase():"ehp",type:i?n.toLowerCase():"regular",build:l?a.toLowerCase():"main",country:s?o.toUpperCase():null}}var Qs=function(){var e=Object(P.b)(),t=Wn(Zs,$s),r=t.context,n=t.updateContext,a=r.metric,o=r.type,c=r.build,i=r.country,l=Kn({resultsPerPage:20,selector:x.getLeaderboards,action:function(t,r,n){if(!n)return;var a={metric:n.metric,country:n.country,playerType:n.type,playerBuild:n.build};e(j.fetchLeaderboards(a,t,r))}}),s=l.data,u=l.isFullyLoaded,m=l.reloadData,f=Object(_.useCallback)(m,[]);return Object(_.useEffect)((function(){f({metric:a,type:o,build:c,country:i})}),[a,o,c,i,f]),s?S.a.createElement(Hs.Provider,{value:{context:r,updateContext:n}},S.a.createElement("div",{className:"leaderboards__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"Leaderboards")),S.a.createElement("div",{className:"leaderboards__header row"},S.a.createElement("div",{className:"col"},S.a.createElement(pn,{title:"Leaderboards"}))),S.a.createElement("div",{className:"leaderboards__options row"},S.a.createElement(Xs,null)),S.a.createElement("div",{className:"leaderboards__list row"},S.a.createElement("div",{className:"col"},S.a.createElement(Ks,null))),S.a.createElement("div",{className:"row"},S.a.createElement("div",{className:"col"},!u&&S.a.createElement("b",{className:"loading-indicator"},"Loading..."))))):S.a.createElement(Ar,null)};function eu(){eu=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(k){i=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),c=new j(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return N()}for(r.method=a,r.arg=o;;){var c=r.delegate;if(c){var i=E(c,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,c),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var u={};function m(){}function f(){}function p(){}var d={};i(d,a,(function(){return this}));var h=Object.getPrototypeOf,v=h&&h(h(x([])));v&&v!==t&&r.call(v,a)&&(d=v);var g=p.prototype=m.prototype=Object.create(d);function y(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var n;this._invoke=function(a,o){function c(){return new t((function(n,c){!function n(a,o,c,i){var l=s(e[a],e,o);if("throw"!==l.type){var u=l.arg,m=u.value;return m&&"object"==typeof m&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(m).then((function(e){u.value=e,c(u)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}(a,o,n,c)}))}return n=n?n.then(c,c):c()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,u;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function x(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:N}}function N(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",p),i(p,"constructor",f),f.displayName=i(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),i(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var c=new b(l(t,r,n,a),o);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},y(g),i(g,c,"Generator"),i(g,a,(function(){return this})),i(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return c.type="throw",c.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],c=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var i=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(i&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;O(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}var tu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ehp",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";return function(){var r=Object(Mt.a)(eu().mark((function r(n){var a,o,c;return eu().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(fe.onFetchRequest()),r.prev=1,a={metric:e,type:t},r.next=5,Vt.get(Kt.fetchRates,{params:a});case 5:o=r.sent,c=o.data,n(fe.onFetchSuccess({metric:e,rates:c})),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),n(fe.onFetchError(r.t0.message.toString()));case 13:case"end":return r.stop()}}),r,null,[[1,10]])})));return function(e){return r.apply(this,arguments)}}()},ru=function(e){return e.rates},nu=Object(V.a)(ru,(function(e){return e.error})),au=Object(V.a)(ru,(function(e){return e.isFetching})),ou=Object(V.a)(ru,(function(e){return e.ehpRates})),cu=Object(V.a)(ru,(function(e){return e.ehbRates})),iu=(r(235),{uniqueKeySelector:function(e){return e.startExp},columns:[{key:"startExp",label:"Exp.",isSortable:!1,transform:function(e){return Nt(e)}},{key:"rate",isSortable:!1,transform:function(e,t){return 0===e?"---":t.realRate?S.a.createElement("div",{className:"scaled-rate"},"".concat(Nt(e)," per hour"),S.a.createElement("span",null,"(actually ".concat(Nt(t.realRate)," per hour)"))):"".concat(Nt(e)," per hour")}},{key:"description",isSortable:!1}]}),lu={uniqueKeySelector:function(e){return"".concat(e.bonusSkill,"-").concat(e.startExp)},columns:[{key:"startExp",label:"Start Exp.",isSortable:!1,transform:function(e){return Nt(e)}},{key:"endExp",label:"End Exp.",isSortable:!1,transform:function(e){return Nt(e,2e8===e)}},{key:"bonusSkill",label:"Skill",isSortable:!1,transform:function(e){return S.a.createElement(S.a.Fragment,null,S.a.createElement("img",{src:jt(e,!0),style:{marginRight:7},alt:""}),S.a.createElement("span",null,vt.MetricProps[e].name))}},{key:"ratio",label:"Bonus Ratio",isSortable:!1},{key:"bonusExp",label:"Bonus Exp.",isSortable:!1,transform:function(e,t){return t.maxBonus?"".concat(Nt(t.maxBonus)," (max)"):Nt(Math.min(2e8,Math.floor((t.endExp-t.startExp)*t.ratio)))}}]};var su=function(){var e=Object(P.b)(),t=Object(Je.f)(),r=Object(Je.h)().type||"main",n=Object(P.c)(k.getEHPRates),a=Object(_.useMemo)((function(){return[{label:"Main",value:"main"},{label:"Ironman",value:"ironman"},{label:"Ultimate",value:"ultimate"},{label:"Level 3",value:"lvl3"},{label:"F2P",value:"f2p"},{label:"F2P Ironman",value:"f2p_ironman"},{label:"F2P & Lvl3",value:"f2p_lvl3"},{label:"F2P & Lvl3 Ironman",value:"f2p_lvl3_ironman"}]}),[]),o=a.findIndex((function(e){return e.value===r}));return Object(_.useEffect)((function(){e(N.fetchRates("ehp",r))}),[r]),n?S.a.createElement("div",{className:"ehp-rates__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"EHP rates")),S.a.createElement("div",{className:"ehp-rates__header row"},S.a.createElement("div",{className:"col-lg-8 col-sm-12"},S.a.createElement(pn,{title:"EHP Rates"})),S.a.createElement("div",{className:"col-lg-4"},S.a.createElement(Qr,{options:a,selectedIndex:o,onSelect:function(e){var r=e.value;t.push("/rates/ehp/".concat(r))}}))),S.a.createElement("div",{className:"ehp-rates__content"},n.map((function(e){return S.a.createElement("div",{key:e.skill,className:"ehp-rates__section"},S.a.createElement("div",{className:"section__header"},S.a.createElement("img",{className:"section__icon",src:jt(e.skill),alt:""}),S.a.createElement("b",{className:"section__title"},vt.MetricProps[e.skill].name)),S.a.createElement("div",{className:"section__table-wrapper"},S.a.createElement("b",null,"Rates"),S.a.createElement(Nr,{rows:e.methods.slice().sort((function(e,t){return e.startExp-t.startExp})),columns:iu.columns,uniqueKeySelector:iu.uniqueKeySelector})),e.bonuses&&e.bonuses.length>0&&S.a.createElement("div",{className:"section__table-wrapper"},S.a.createElement("b",null,"Bonuses"),S.a.createElement(Nr,{rows:e.bonuses.slice().sort((function(e,t){return e.startExp-t.startExp})),columns:lu.columns,uniqueKeySelector:lu.uniqueKeySelector})))})))):null},uu=(r(236),{uniqueKeySelector:function(e){return e.boss},columns:[{key:"boss",transform:function(e){return S.a.createElement(S.a.Fragment,null,S.a.createElement("img",{src:jt(e,!0),style:{marginRight:7},alt:""}),S.a.createElement("span",null,vt.MetricProps[e].name))}},{key:"rate",isSortable:!1,transform:function(e){return 0===e?"---":"".concat(Nt(e)," kills per hour")}}]});var mu=[{path:"/",component:Hn},{path:"/top/:metric?",component:xa},{path:"/records/:metric?",component:Ja},{path:"/competitions",component:Go},{path:"/competitions/create",component:Qo},{path:"/competitions/:id/edit",component:uc},{path:"/competitions/:id/:section?",component:Yc},{path:"/groups",component:Nl},{path:"/groups/create",component:Ns},{path:"/groups/:id/edit",component:_s},{path:"/groups/:id/:section?",component:bs},{path:"/players/search/:username",component:Ol},{path:"/players/:username/:section?/:metricType?",component:bl},{path:"/names",component:Ds},{path:"/names/submit/:oldName?",component:Is},{path:"/leaderboards/:metric?",component:Qs},{path:"/rates/ehp/:type?",component:su},{path:"/rates/ehb/:type?",component:function(){var e=Object(P.b)(),t=Object(Je.f)(),r=Object(Je.h)().type||"main",n=Object(P.c)(k.getEHBRates),a=Object(_.useMemo)((function(){return[{label:"Main",value:"main"},{label:"Ironman",value:"ironman"}]}),[]),o=a.findIndex((function(e){return e.value===r}));return Object(_.useEffect)((function(){e(N.fetchRates("ehb",r))}),[r]),n?S.a.createElement("div",{className:"ehb-rates__container container"},S.a.createElement(Rn.a,null,S.a.createElement("title",null,"EHB rates")),S.a.createElement("div",{className:"ehb-rates__header row"},S.a.createElement("div",{className:"col-lg-8 col-sm-12"},S.a.createElement(pn,{title:"EHB Rates"})),S.a.createElement("div",{className:"col-lg-4"},S.a.createElement(Qr,{options:a,selectedIndex:o,onSelect:function(e){var r=e.value;t.push("/rates/ehb/".concat(r))}}))),S.a.createElement("div",{className:"ehb-rates__content"},S.a.createElement(Nr,{rows:n,columns:uu.columns,uniqueKeySelector:uu.uniqueKeySelector}))):null}}];function fu(e){var t=mu.find((function(t){var r=t.path,n=Object(Je.e)(e,r);return!!n&&n.isExact}));return t?t.path:null}function pu(){X.a.initialize("UA-163340249-1",{testMode:!1})}function du(e,t){(function(e,t){if(!e||!t)return!0;if(fu(e)!==fu(t))return!0;var r=e.split("/").filter((function(e){return e.length>0})),n=t.split("/").filter((function(e){return e.length>0}));return r.length>1&&n.length>1&&r[1]!==n[1]})(e,t)&&window.scrollTo(0,0);var r=function(e){return e.startsWith("/players/search")?"/players/search/:username":/^\/players\/(\d+)/.test(e)?"/players/:username":/^\/competitions\/(\d+)/.test(e)?"/competition/:id":/^\/competitions\/(\d+)\/edit/.test(e)?"/competition/:id/edit":e}(e);X.a.set({page:r}),X.a.pageview(r)}function hu(e){var t=e.children,r=Object(_.useRef)(null),n=Object(Je.g)();return Object(_.useEffect)(pu,[]),Object(_.useEffect)((function(){du(n.pathname,r.current),r.current=n.pathname}),[n]),t}var vu=function(){return S.a.createElement(Ze.a,null,S.a.createElement(on,null),S.a.createElement(ln,null),S.a.createElement("div",{className:"content"},S.a.createElement(hu,null,S.a.createElement(Je.c,null,mu.map((function(e){var t=e.path,r=e.component;return S.a.createElement(Je.a,{key:t,exact:!0,path:t,component:r})})),S.a.createElement(Je.a,{component:Mn})))))};C.a.render(S.a.createElement(P.a,{store:Xe},S.a.createElement(vu,null)),document.getElementById("root"))}]),[[85,1,2]]]);